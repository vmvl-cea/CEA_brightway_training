<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="prev" title="I. Activity Browser" href="activity-browser.html" />
        <link rel="canonical" href="https://vmvl-cea.github.io/CEA_brightway_training/tutorials/bw25_notebook_EV.html" />
        <link rel="prefetch" href="../_static/BW_black_transparent_square.png" as="image" />
        <link rel="prefetch" href="../_static/BW_white_transparent_square.png" as="image" />

    <!-- Generated with Sphinx 8.2.3 and Furo 2025.07.19 -->
        <title>II. Notebook - Brightway training</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d111a655" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=25af2a20" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=8dab3a3b" />
    
    


<style>
  body {
    --color-code-background: #f2f2f2;
  --color-code-foreground: #1e1e1e;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #2b2b2b;
  --color-code-foreground: #f8f8f2;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #2b2b2b;
  --color-code-foreground: #f8f8f2;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Brightway training</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../_static/BW_black_transparent_square.png" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../_static/BW_white_transparent_square.png" alt="Dark Logo"/>
  </div>
  
  <span class="sidebar-brand-text">Brightway training</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Useful knowledge</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../knowledge/python_env.html">Python Environment for Brightway</a></li>
<li class="toctree-l1"><a class="reference internal" href="../knowledge/brightway_th.html">Brightway theory</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation/bw_env.html">Setting up a Python Environment for Brightway</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/vscode.html">Installation of VS code</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="activity-browser.html">I. Activity Browser</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">II. Notebook</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../_sources/tutorials/bw25_notebook_EV.md.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="ii-notebook">
<h1>II. Notebook<a class="headerlink" href="#ii-notebook" title="Link to this heading">¶</a></h1>
<p>You can <a class="reference download internal" download="" href="../_downloads/22726cadb7d91f919702a558203649dd/bw25_notebook_EV.ipynb"><span class="xref download myst">DOWNLOAD this notebook here</span></a></p>
<p>This is a <a class="reference external" href="https://jupyter-notebook-beginner-guide.readthedocs.io/en/latest/what_is_jupyter.html">Jupyter Notebook</a> with the purpose of making you familiar with the basic Python-based <a class="reference external" href="https://docs.brightway.dev/en/latest/#">Brightway2 LCA framework</a> and its various functionalities, all developed by Chris Mutel and colleagues from the Paul Sherrer Institute (PSI).</p>
<p>This tutorial is made for the old version of bw2, and is not meant to handle the new version bw25 (even if the framework remains quite similar). More informations can be found in the <a class="reference external" href="https://docs.brightway.dev/en/latest/#">documentation</a></p>
<p>This notebook is designed to get you started with creating your own project, setting up your database(s) (used as background systems) and simple foreground systems, performing your first impact assessments, analysing your results, and running Monte Carlo simulations in calculation setups.</p>
<hr class="docutils" />
<p>The notebook is structured as follows:</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#section1"><span class="xref myst">Setup of a project</span></a>: <em>How to set up a project to work in</em></p></li>
<li><p><a class="reference internal" href="#section2"><span class="xref myst">Database import/setup</span></a>: <em>How to import a database and get it ready for use</em></p></li>
<li><p><a class="reference internal" href="#section3"><span class="xref myst">My First LCA</span></a>: <em>How to do an LCA on Brightway2</em></p></li>
<li><p><a class="reference internal" href="#section4"><span class="xref myst">Contribution analysis</span></a>: <em>How to examine the LCA results</em></p></li>
<li><p><a class="reference internal" href="#section5"><span class="xref myst">Edit model &amp; Parametrization</span></a>: <em>How create, modify and parametrize activities?</em></p></li>
<li><p><a class="reference internal" href="#section6"><span class="xref myst">Scenarios analysis</span></a>: <em>How to build and compare LCA scenarios?</em></p></li>
</ol>
<hr class="docutils" />
<p><strong>Outcomes - what are we going to learn?</strong></p>
<p>By completing this notebook (run it locally on your machine and don’t just read the code), we will:</p>
<ul class="simple">
<li><p>have understood the basics of the Brightway2 LCA framework</p></li>
<li><p>know how to import/generate/handle datasets in Brightway2</p></li>
<li><p>be able to run simple LCAs</p></li>
<li><p>be able to parametriz an inventory</p></li>
<li><p>be able to analyse a product system and the results of an LCA</p></li>
<li><p>be able to visualise data in form of tables and figures</p></li>
</ul>
<section id="setup-of-a-project">
<h2>1. Setup of a project<a class="headerlink" href="#setup-of-a-project" title="Link to this heading">¶</a></h2>
<p>A project gets instantiated and relevant libraries/modules imported.</p>
<section id="import-libraries">
<h3>1.1. Import libraries<a class="headerlink" href="#import-libraries" title="Link to this heading">¶</a></h3>
<p>Import some useful libraries for data vizualisation, scientific computation</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
</pre></div>
</div>
<p>Import now brightway libraries that are split into sublibraries :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Brightway2-data</span></code> handles storing and searching all data sources (databases, LCIA methods, etc.).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Brightway2-calc</span></code> does LCA calculations.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Brightway2-io</span></code> tools for the import, export, and management of inventory databases and impact assessment methods. LCA calculations.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Brightway2-analyzer</span></code> analyzes input data like databases and methods, as well as the result of LCA calculations.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Brightway2-parameters</span></code> Library for storing, validating, and calculating with parameters.</p></li>
</ul>
<blockquote>
<div><p>it is better to import these libraries separately rather than a brutal <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">brightway2</span> <span class="pre">import</span> <span class="pre">*</span></code> since with the upcoming update bw25, this will not work anymore.-</p>
</div></blockquote>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">bw2data</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">bd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">bw2io</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">bi</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">bw2calc</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">bc</span>
</pre></div>
</div>
<p>We will import also <code class="docutils literal notranslate"><span class="pre">lca_algebraic</span></code> developped by <a class="reference external" href="https://github.com/oie-mines-paristech/lca_algebraic/">OIE mines paristech</a></p>
<p><strong>lca-algebraic</strong> is a small libray above <strong>brightway2</strong>, designed for the definition of <strong>parametric inventories</strong> with fast computation of LCA impacts, suitable for <strong>monte-carlo</strong> analyis.</p>
<div class="alert alert-block alert-success">
<p><strong>lca-algebraic</strong> provides a set of  <strong>helper functions</strong> for :</p>
<ul class="simple">
<li><p><strong>compact</strong> &amp; <strong>human readable</strong> definition of activites :</p>
<ul>
<li><p>search background (tech and biosphere) activities</p></li>
<li><p>create new foreground activites with parametrized amounts</p></li>
<li><p>parametrize / update existing background activities (extending the class <strong>Activity</strong>)</p></li>
</ul>
</li>
<li><p>Definition of parameters</p></li>
<li><p>Computation of LCAs</p></li>
<li><p>Computation of <strong>statistics</strong> (including sensitivity analysis: OAT and GSA with Sobols indices)</p></li>
<li><p>Compute <strong>simplified parametric model</strong> by fixing minor input parameters</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">lca_algebraic</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">agb</span> <span class="c1">#import the library</span>
<span class="n">agb</span><span class="o">.</span><span class="n">resetParams</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="creation-of-the-project">
<h3>1.2. Creation of the project<a class="headerlink" href="#creation-of-the-project" title="Link to this heading">¶</a></h3>
<p>Let’s list the available projects. This project is at the top level of the BW hierarchy. A project is self-contained, with its own copy of data, LCIA methods, calculations, assumptions, and any other data you need. Each project is completely independent of other projects.Projects are saved as subdirectories in the file system.</p>
<p>We can get more information (installed databases and file sizes) on the individual projects… and also see where they are stored with the following command. (you might need to dig into this folder if any persisting troubles)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">bd</span><span class="o">.</span><span class="n">projects</span><span class="o">.</span><span class="n">dir</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>WindowsPath(&#39;C:/Users/VM256232/AppData/Local/pylca/Brightway3/default.c21f969b5f03d33d43e04f8f136e7682&#39;)
</pre></div>
</div>
<p>list all projects</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">bd</span><span class="o">.</span><span class="n">projects</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Brightway2 projects manager with 73 objects, including:
	BW2_tutorial
	BW2_tutorial_adv
	Batterie
	BatterieV2
	ML_bw25_1
	ML_bw25_v1
	ML_bw2_v1
	all_dbs
	base_6db46847-c65b-4f06-9514-5beec5613169
	base_bw25_ei310
Use `sorted(projects)` to get full list, `projects.report()` to get
	a report on all projects.
</pre></div>
</div>
<p>To create a new project or to access an existing one, we type in:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">bd</span><span class="o">.</span><span class="n">projects</span><span class="o">.</span><span class="n">set_current</span><span class="p">(</span><span class="s2">&quot;formation_bw25&quot;</span><span class="p">)</span> <span class="c1">#Creating/accessing the project</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># how to remove a project</span>
<span class="c1"># bd.projects.delete_project(&#39;ecoinvent311&#39;)</span>
<span class="c1"># to remove all project elements, you might need to deleted the whole folder locally in .\AppData\Local\pylca\Brightway3\</span>
</pre></div>
</div>
</section>
</section>
<section id="database-import-setup">
<h2>2. Database import/setup<a class="headerlink" href="#database-import-setup" title="Link to this heading">¶</a></h2>
<p>LCA draws on a lot of background data. Those can be found in numerous databases, for instance ecoinvent. We can check which databases are available in the current project with the following command:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">bd</span><span class="o">.</span><span class="n">databases</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Databases dictionary with 4 object(s):
	ecoinvent-3.11-biosphere
	ecoinvent-3.11-cutoff
	tuto_EV-ab
	tuto_EV-code
</pre></div>
</div>
<section id="ecoinvent">
<h3>2.1 Ecoinvent<a class="headerlink" href="#ecoinvent" title="Link to this heading">¶</a></h3>
<p>Ecoinvent is already imported. If you want to import it again in a new project, or import another version, go to import_ecoinvent.py and follow the instructions.</p>
<p>Let’s check the ecoinvent-3.11-cutoff database</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">db_ei</span> <span class="o">=</span> <span class="n">bd</span><span class="o">.</span><span class="n">Database</span><span class="p">(</span><span class="s1">&#39;ecoinvent-3.11-cutoff&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">db_ei</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>25412
</pre></div>
</div>
<p>Some of the more basic ones we will be using now are :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">random()</span></code> - returns a random activity in the database</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">get(*valid_exchange_tuple*)</span></code> - returns an activity, but you must know the activity key</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">load()</span></code> - loads the whole database as a dictionary.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make_searchable</span></code> - allows searching of the database (by default, it is already searchable)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">search</span></code> - search the database</p></li>
</ul>
<p>Lets start with <code class="docutils literal notranslate"><span class="pre">random</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">db_ei</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&#39;market for bottom ash, MSWI[F], waste polyvinylchloride&#39; (kilogram, CH, None)
</pre></div>
</div>
<p>This returns a technosphere activity, but without assigning it to a variable, there is not much we can do with it directly.</p>
<p>For now, let’s assign another random activity to a variable:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">random_technosphere</span> <span class="o">=</span> <span class="n">db_ei</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
<span class="n">random_technosphere</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&#39;electricity production, oil&#39; (kilowatt hour, IS, None)
</pre></div>
</div>
<p>We can get the type of the object that was returned from the database:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">random_technosphere</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>bw2data.backends.proxies.Activity
</pre></div>
</div>
<p>The type is an <strong>activity proxy</strong>. Activity proxies allow us to interact with the content of the database. In the journey to and from the database, several translation layers are used:</p>
<blockquote>
<div><p>In Brightway, we <em>almost</em> always work with <code class="docutils literal notranslate"><span class="pre">Activity</span></code> or <code class="docutils literal notranslate"><span class="pre">Exchange</span></code> objects.</p>
</div></blockquote>
<section id="searching-for-activities">
<h4>Searching for activities<a class="headerlink" href="#searching-for-activities" title="Link to this heading">¶</a></h4>
<p>The easiest way to search for activities is using the helper functions of <code class="docutils literal notranslate"><span class="pre">lca_algebraic</span></code>:</p>
<p>Indeed, some <strong>helping functions</strong> have been developped to help searching activities in a brightway database:</p>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">findBioAct</span></code></strong> : Search activity in <strong>biosphere</strong> db</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">findTechAct</span></code></strong> : Search activity in <strong>ecoinvent</strong> db</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">findActivity</span></code></strong> : search activity in one specific db</p></li>
</ul>
<p>Those methods are <strong>faster</strong> and <strong>safer</strong> than using traditionnal “list-comprehension” search :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">agb</span><span class="o">.</span><span class="n">findActivity</span><span class="p">(</span><span class="s2">&quot;market for electricity, low voltage&quot;</span><span class="p">,</span> <span class="n">db_name</span><span class="o">=</span><span class="s1">&#39;ecoinvent-3.11-cutoff&#39;</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;FR&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&#39;market for electricity, low voltage&#39; (kilowatt hour, FR, None)
</pre></div>
</div>
<p>However, they will <strong>fail with an error</strong> if <strong>more than one activity</strong> matches, preventing the model to be based on a random selection of one activity.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">agb</span><span class="o">.</span><span class="n">findActivity</span><span class="p">(</span><span class="s2">&quot;market for electricity, low voltage&quot;</span><span class="p">,</span> <span class="n">db_name</span><span class="o">=</span><span class="s1">&#39;ecoinvent-3.11-cutoff&#39;</span><span class="p">)</span>
<span class="k">except</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Error
</pre></div>
</div>
<p>To avoid this error, you can refine your search by entering parameters in the function, like category, loc (location), or unit. See below the documentation of the function where all search parameters are listed</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">agb</span><span class="o">.</span><span class="n">findActivity</span><span class="err">?</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[31mSignature:[39m
agb.findActivity(
    name=[38;5;28;01mNone[39;00m,
    loc=[38;5;28;01mNone[39;00m,
    code=[38;5;28;01mNone[39;00m,
    categories=[38;5;28;01mNone[39;00m,
    category=[38;5;28;01mNone[39;00m,
    db_name=[38;5;28;01mNone[39;00m,
    single=[38;5;28;01mTrue[39;00m,
    case_sensitive=[38;5;28;01mFalse[39;00m,
    unit=[38;5;28;01mNone[39;00m,
    limit=[32m1500[39m,
) -&gt; lca_algebraic.activity.ActivityExtended
[31mDocstring:[39m
    Find activity by name &amp; location
    Uses index for fast fetching

:param name: Name of the activity. Can contain &#39;*&#39; for searching partial chain
:param loc: optional location
:param code: Unique code. If provided alone, returns the activity for this code
:param categories: Optional : exact list of catagories
:param category: Optional : single category that should be part of the list of categories of the selected activities
:param db_name: Name of the database
:param single: If False, returns a list of matching activities. If True (default) fails if more than one activity fits.
:param case_sensitive: If True (default) ignore the case
:param unit: If provided, only match activities with provided unit
:return: Either a single activity (if single is True) or a list of activities, possibly empty.
[31mFile:[39m      c:\users\vm256232\appdata\local\miniforge3\envs\bw25_tr\lib\site-packages\lca_algebraic\activity.py
[31mType:[39m      function
</pre></div>
</div>
<p>The database object is also iterable, allowing “home-made” searches through list comprehensions. one can add as many criteria as wanted to ensure the list comprehension only returns one activity, and then choose it without fear of choosing the wrong one..</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">act</span> <span class="k">for</span> <span class="n">act</span> <span class="ow">in</span> <span class="n">db_ei</span> <span class="k">if</span> <span class="s1">&#39;market for electricity, low voltage&#39;</span> <span class="ow">in</span> <span class="n">act</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]]</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[&#39;market for electricity, low voltage&#39; (kilowatt hour, PY, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, CA-YK, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, DZ, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, CN-NECG, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, CL, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, DK, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, KZ, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, SV, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, IE, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, BA, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, CR, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, KP, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, UY, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, CA-ON, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, KE, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, BG, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, BR-South-eastern/Mid-western grid, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, JM, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, CA-MB, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, CN-CSG, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, CA-AB, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, LK, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, RU, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, PE, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, UA, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, NP, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, UZ, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, JP, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, CI, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, MD, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, LB, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, CA-NF, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, PK, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, MA, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, CA-NB, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, ME, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, NG, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, CU, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, OM, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, ZW, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, IR, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, RS, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, PA, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, GH, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, BR-Southern grid, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, CN-NWG, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, ES, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, US-WECC, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, PT, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, US-NPCC, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, QA, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, RO, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, AT, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, MZ, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, SS, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, LV, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, SG, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, NZ, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, IL, None),
 &#39;market for electricity, low voltage, renewable energy products&#39; (kilowatt hour, CH, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, SY, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, IS, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, IN-Eastern grid, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, EG, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, MK, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, HN, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, MN, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, FI, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, US-ASCC, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, XK, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, IN-Southern grid, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, NA, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, AL, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, KG, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, TZ, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, BD, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, CN-NCGC, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, AR, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, TG, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, SD, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, MU, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, BH, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, CM, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, MX, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, PL, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, IN-Northern grid, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, CZ, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, AO, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, HT, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, PH, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, CN-ECGC, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, CO, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, GE, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, AZ, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, GT, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, IN-Western grid, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, EC, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, BN, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, US-SERC, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, US-MRO, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, MM, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, HR, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, DE, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, NI, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, CH, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, CA-PE, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, MT, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, SI, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, CG, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, BW, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, IN-North-eastern grid, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, GI, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, US-RFC, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, TW, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, JO, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, CA-BC, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, CD, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, GR, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, LY, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, IT, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, VN, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, TT, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, US-PR, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, CY, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, BY, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, CA-NT, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, ZA, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, MY, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, CW, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, TR, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, ET, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, NO, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, FR, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, AE, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, SK, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, TH, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, DO, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, TJ, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, AM, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, CA-SK, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, BJ, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, VE, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, BO, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, SA, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, BR-Northern grid, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, GB, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, GA, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, EE, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, KW, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, ZM, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, CN-CCG, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, CA-QC, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, NE, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, LU, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, SN, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, KR, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, BE, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, AU, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, LT, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, KH, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, HU, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, HK, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, US-HICC, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, NL, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, CA-NS, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, US-TRE, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, TM, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, TN, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, IQ, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, CA-NU, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, YE, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, ER, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, CN-SWG, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, ID, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, SE, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, BR-North-eastern grid, None)]
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">activity_I_want</span> <span class="o">=</span> <span class="p">[</span><span class="n">act</span> <span class="k">for</span> <span class="n">act</span> <span class="ow">in</span> <span class="n">db_ei</span> <span class="k">if</span> <span class="s1">&#39;market for electricity&#39;</span> <span class="ow">in</span> <span class="n">act</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> 
                                            <span class="ow">and</span> <span class="s1">&#39;low voltage&#39;</span> <span class="ow">in</span> <span class="n">act</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
                                            <span class="ow">and</span> <span class="s1">&#39;FR&#39;</span> <span class="ow">in</span> <span class="n">act</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">]</span>
                                            <span class="p">]</span>
<span class="n">activity_I_want</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[&#39;market for electricity, low voltage&#39; (kilowatt hour, FR, None)]
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">activity_I_want</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>list
</pre></div>
</div>
<p>Be careful this is a list and not the activity. So lets pick the first index of the list</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">activity_I_want</span> <span class="o">=</span> <span class="p">[</span><span class="n">act</span> <span class="k">for</span> <span class="n">act</span> <span class="ow">in</span> <span class="n">db_ei</span> <span class="k">if</span> <span class="s1">&#39;market for electricity&#39;</span> <span class="ow">in</span> <span class="n">act</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> 
                                            <span class="ow">and</span> <span class="s1">&#39;low voltage&#39;</span> <span class="ow">in</span> <span class="n">act</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
                                            <span class="ow">and</span> <span class="s1">&#39;FR&#39;</span> <span class="ow">in</span> <span class="n">act</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">]</span>
                                            <span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="n">activity_I_want</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&#39;market for electricity, low voltage&#39; (kilowatt hour, FR, None)
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">activity_I_want</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>bw2data.backends.proxies.Activity
</pre></div>
</div>
<p>Let’s leave the biosphere database here for now.</p>
</section>
<section id="methods">
<h4>Methods<a class="headerlink" href="#methods" title="Link to this heading">¶</a></h4>
<p>Importation of biosphere also installed LCIA methods. Let’s dig into all these impact categories</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">bd</span><span class="o">.</span><span class="n">methods</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Methods dictionary with 633 objects, including:
	(&#39;ecoinvent-3.11&#39;, &#39;CML v4.8 2016&#39;, &#39;acidification&#39;, &#39;acidification (incl. fate, average Europe total, A&amp;B)&#39;)
	(&#39;ecoinvent-3.11&#39;, &#39;CML v4.8 2016&#39;, &#39;climate change&#39;, &#39;global warming potential (GWP100)&#39;)
	(&#39;ecoinvent-3.11&#39;, &#39;CML v4.8 2016&#39;, &#39;ecotoxicity: freshwater&#39;, &#39;freshwater aquatic ecotoxicity (FAETP inf)&#39;)
	(&#39;ecoinvent-3.11&#39;, &#39;CML v4.8 2016&#39;, &#39;ecotoxicity: marine&#39;, &#39;marine aquatic ecotoxicity (MAETP inf)&#39;)
	(&#39;ecoinvent-3.11&#39;, &#39;CML v4.8 2016&#39;, &#39;ecotoxicity: terrestrial&#39;, &#39;terrestrial ecotoxicity (TETP inf)&#39;)
	(&#39;ecoinvent-3.11&#39;, &#39;CML v4.8 2016&#39;, &#39;energy resources: non-renewable&#39;, &#39;abiotic depletion potential (ADP): fossil fuels&#39;)
	(&#39;ecoinvent-3.11&#39;, &#39;CML v4.8 2016&#39;, &#39;eutrophication&#39;, &#39;eutrophication (fate not incl.)&#39;)
	(&#39;ecoinvent-3.11&#39;, &#39;CML v4.8 2016&#39;, &#39;human toxicity&#39;, &#39;human toxicity (HTP inf)&#39;)
	(&#39;ecoinvent-3.11&#39;, &#39;CML v4.8 2016&#39;, &#39;material resources: metals/minerals&#39;, &#39;abiotic depletion potential (ADP): elements (ultimate reserves)&#39;)
	(&#39;ecoinvent-3.11&#39;, &#39;CML v4.8 2016&#39;, &#39;ozone depletion&#39;, &#39;ozone layer depletion (ODP steady state)&#39;)
Use `list(this object)` to get the complete list.
</pre></div>
</div>
<p>One can load a random method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">bd</span><span class="o">.</span><span class="n">methods</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(&#39;ecoinvent-3.11&#39;,
 &#39;EPS 2020d no LT&#39;,
 &#39;total no LT&#39;,
 &#39;monetary impact value no LT&#39;)
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">bd</span><span class="o">.</span><span class="n">methods</span><span class="o">.</span><span class="n">random</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>tuple
</pre></div>
</div>
<p>Of course, a random method is probably not useful except to play around. To find an actual method, one can again use list comprehensions. Let’s say I am interested in using the IPCC2013 100 years method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">m</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">bd</span><span class="o">.</span><span class="n">methods</span> <span class="k">if</span> <span class="s1">&#39;IPCC 2013&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">m</span><span class="p">)</span> <span class="k">if</span> <span class="s2">&quot;100&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">m</span><span class="p">)]</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[(&#39;ecoinvent-3.11&#39;,
  &#39;EN15804+A2 - Core impact categories and indicators&#39;,
  &#39;climate change: total (EF v3.0 - IPCC 2013)&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EN15804+A2 - Core impact categories and indicators&#39;,
  &#39;climate change: fossil (EF v3.0 - IPCC 2013)&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EN15804+A2 - Core impact categories and indicators&#39;,
  &#39;climate change: biogenic (EF v3.0 - IPCC 2013)&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EN15804+A2 - Core impact categories and indicators&#39;,
  &#39;climate change: land use and land use change (EF v3.0 - IPCC 2013)&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2013 no LT&#39;,
  &#39;climate change no LT&#39;,
  &#39;global temperature change potential (GTP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2013 no LT&#39;,
  &#39;climate change no LT&#39;,
  &#39;global warming potential (GWP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2013&#39;,
  &#39;climate change&#39;,
  &#39;global temperature change potential (GTP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2013&#39;,
  &#39;climate change&#39;,
  &#39;global warming potential (GWP100)&#39;)]
</pre></div>
</div>
<p>You can also use <code class="docutils literal notranslate"><span class="pre">lca_algebraic</span></code> features:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">agb</span><span class="o">.</span><span class="n">findMethods</span><span class="p">(</span><span class="s1">&#39;ipcc 2013&#39;</span><span class="p">)</span> 
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[(&#39;ecoinvent-3.11&#39;,
  &#39;EN15804+A2 - Core impact categories and indicators&#39;,
  &#39;climate change: total (EF v3.0 - IPCC 2013)&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EN15804+A2 - Core impact categories and indicators&#39;,
  &#39;climate change: fossil (EF v3.0 - IPCC 2013)&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EN15804+A2 - Core impact categories and indicators&#39;,
  &#39;climate change: biogenic (EF v3.0 - IPCC 2013)&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EN15804+A2 - Core impact categories and indicators&#39;,
  &#39;climate change: land use and land use change (EF v3.0 - IPCC 2013)&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2013 no LT&#39;,
  &#39;climate change no LT&#39;,
  &#39;global temperature change potential (GTP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2013 no LT&#39;,
  &#39;climate change no LT&#39;,
  &#39;global temperature change potential (GTP20) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2013 no LT&#39;,
  &#39;climate change no LT&#39;,
  &#39;global warming potential (GWP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2013 no LT&#39;,
  &#39;climate change no LT&#39;,
  &#39;global warming potential (GWP20) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2013&#39;,
  &#39;climate change&#39;,
  &#39;global temperature change potential (GTP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2013&#39;,
  &#39;climate change&#39;,
  &#39;global temperature change potential (GTP20)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2013&#39;,
  &#39;climate change&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2013&#39;,
  &#39;climate change&#39;,
  &#39;global warming potential (GWP20)&#39;)]
</pre></div>
</div>
<p>I am interested in one specific method, so i will assign it to a variable. I can will refine my search until there is one element in my list and then choose it by subscripting.</p>
<blockquote>
<div><p><em>you might have an error here, since the exact name of the method depends on the version of bw. Just adapt the syntax to get the method GWP100 by IPCC 2013</em></p>
</div></blockquote>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">agb</span><span class="o">.</span><span class="n">findMethods</span><span class="p">(</span><span class="s1">&#39;climate change&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[(&#39;ecoinvent-3.11&#39;,
  &#39;CML v4.8 2016 no LT&#39;,
  &#39;climate change no LT&#39;,
  &#39;global warming potential (GWP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;CML v4.8 2016&#39;,
  &#39;climate change&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;Ecological Scarcity 2021 no LT&#39;,
  &#39;climate change no LT&#39;,
  &#39;global warming potential (GWP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;Ecological Scarcity 2021&#39;,
  &#39;climate change&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.0 no LT&#39;,
  &#39;climate change no LT&#39;,
  &#39;global warming potential (GWP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.0 no LT&#39;,
  &#39;climate change: biogenic no LT&#39;,
  &#39;global warming potential (GWP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.0 no LT&#39;,
  &#39;climate change: fossil no LT&#39;,
  &#39;global warming potential (GWP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.0 no LT&#39;,
  &#39;climate change: land use and land use change no LT&#39;,
  &#39;global warming potential (GWP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.0&#39;,
  &#39;climate change&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.0&#39;,
  &#39;climate change: biogenic&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.0&#39;,
  &#39;climate change: fossil&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.0&#39;,
  &#39;climate change: land use and land use change&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.1 no LT&#39;,
  &#39;climate change no LT&#39;,
  &#39;global warming potential (GWP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.1 no LT&#39;,
  &#39;climate change: biogenic no LT&#39;,
  &#39;global warming potential (GWP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.1 no LT&#39;,
  &#39;climate change: fossil no LT&#39;,
  &#39;global warming potential (GWP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.1 no LT&#39;,
  &#39;climate change: land use and land use change no LT&#39;,
  &#39;global warming potential (GWP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.1&#39;,
  &#39;climate change&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.1&#39;,
  &#39;climate change: biogenic&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.1&#39;,
  &#39;climate change: fossil&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.1&#39;,
  &#39;climate change: land use and land use change&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EN15804+A2 - Core impact categories and indicators&#39;,
  &#39;climate change: total (EF v3.0 - IPCC 2013)&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EN15804+A2 - Core impact categories and indicators&#39;,
  &#39;climate change: fossil (EF v3.0 - IPCC 2013)&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EN15804+A2 - Core impact categories and indicators&#39;,
  &#39;climate change: biogenic (EF v3.0 - IPCC 2013)&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EN15804+A2 - Core impact categories and indicators&#39;,
  &#39;climate change: land use and land use change (EF v3.0 - IPCC 2013)&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EN15804+A2 - Core impact categories and indicators&#39;,
  &#39;climate change: total (EF v3.1 - IPCC 2021)&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EN15804+A2 - Core impact categories and indicators&#39;,
  &#39;climate change: fossil (EF v3.1 - IPCC 2021)&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EN15804+A2 - Core impact categories and indicators&#39;,
  &#39;climate change: biogenic (EF v3.1 - IPCC 2021)&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EN15804+A2 - Core impact categories and indicators&#39;,
  &#39;climate change: land use and land use change (EF v3.1 - IPCC 2021)&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IMPACT World+ v2.1, footprint version&#39;,
  &#39;climate change&#39;,
  &#39;carbon footprint&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2013 no LT&#39;,
  &#39;climate change no LT&#39;,
  &#39;global temperature change potential (GTP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2013 no LT&#39;,
  &#39;climate change no LT&#39;,
  &#39;global temperature change potential (GTP20) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2013 no LT&#39;,
  &#39;climate change no LT&#39;,
  &#39;global warming potential (GWP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2013 no LT&#39;,
  &#39;climate change no LT&#39;,
  &#39;global warming potential (GWP20) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2013&#39;,
  &#39;climate change&#39;,
  &#39;global temperature change potential (GTP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2013&#39;,
  &#39;climate change&#39;,
  &#39;global temperature change potential (GTP20)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2013&#39;,
  &#39;climate change&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2013&#39;,
  &#39;climate change&#39;,
  &#39;global warming potential (GWP20)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021 (incl. biogenic CO2) no LT&#39;,
  &#39;climate change: biogenic (incl. CO2) no LT&#39;,
  &#39;global warming potential (GWP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021 (incl. biogenic CO2) no LT&#39;,
  &#39;climate change: biogenic emissions (incl. CO2) no LT&#39;,
  &#39;global warming potential (GWP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021 (incl. biogenic CO2) no LT&#39;,
  &#39;climate change: biogenic removals (incl. CO2) no LT&#39;,
  &#39;global warming potential (GWP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021 (incl. biogenic CO2) no LT&#39;,
  &#39;climate change: total (incl. biogenic CO2) no LT&#39;,
  &#39;global warming potential (GWP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021 (incl. biogenic CO2) no LT&#39;,
  &#39;climate change: total (incl. biogenic CO2, incl. SLCFs) no LT&#39;,
  &#39;global warming potential (GWP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021 (incl. biogenic CO2)&#39;,
  &#39;climate change: biogenic (incl. CO2)&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021 (incl. biogenic CO2)&#39;,
  &#39;climate change: biogenic emissions (incl. CO2)&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021 (incl. biogenic CO2)&#39;,
  &#39;climate change: biogenic removals (incl. CO2)&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021 (incl. biogenic CO2)&#39;,
  &#39;climate change: total (incl. biogenic CO2)&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021 (incl. biogenic CO2)&#39;,
  &#39;climate change: total (incl. biogenic CO2, incl. SLCFs)&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021 no LT&#39;,
  &#39;climate change: aircraft emissions no LT&#39;,
  &#39;global warming potential (GWP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021 no LT&#39;,
  &#39;climate change: biogenic (excl. CO2) no LT&#39;,
  &#39;global warming potential (GWP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021 no LT&#39;,
  &#39;climate change: direct land use change no LT&#39;,
  &#39;global warming potential (GWP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021 no LT&#39;,
  &#39;climate change: emissions from direct land use change no LT&#39;,
  &#39;global warming potential (GWP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021 no LT&#39;,
  &#39;climate change: fossil no LT&#39;,
  &#39;global warming potential (GWP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021 no LT&#39;,
  &#39;climate change: fossil emissions (excl. aircraft emissions) no LT&#39;,
  &#39;global warming potential (GWP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021 no LT&#39;,
  &#39;climate change: removals from direct land use change no LT&#39;,
  &#39;global warming potential (GWP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021 no LT&#39;,
  &#39;climate change: total (excl. biogenic CO2) no LT&#39;,
  &#39;global warming potential (GWP500) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021 no LT&#39;,
  &#39;climate change: total (excl. biogenic CO2) no LT&#39;,
  &#39;global warming potential (GWP20) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021 no LT&#39;,
  &#39;climate change: total (excl. biogenic CO2) no LT&#39;,
  &#39;global warming potential (GWP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021 no LT&#39;,
  &#39;climate change: total (excl. biogenic CO2) no LT&#39;,
  &#39;global temperature change potential (GTP50) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021 no LT&#39;,
  &#39;climate change: total (excl. biogenic CO2) no LT&#39;,
  &#39;global temperature change potential (GTP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021 no LT&#39;,
  &#39;climate change: total (excl. biogenic CO2, incl. SLCFs) no LT&#39;,
  &#39;global warming potential (GWP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021 no LT&#39;,
  &#39;climate change: biogenic (excl. CO2, incl. SLCFs) no LT&#39;,
  &#39;global warming potential (GWP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021 no LT&#39;,
  &#39;climate change: fossil (excl. biogenic CO2, incl. SLCFs) no LT&#39;,
  &#39;global warming potential (GWP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021 no LT&#39;,
  &#39;climate change: direct land use change (incl. SLCFs) no LT&#39;,
  &#39;global warming potential (GWP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021&#39;,
  &#39;climate change: aircraft emissions&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021&#39;,
  &#39;climate change: biogenic (excl. CO2)&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021&#39;,
  &#39;climate change: direct land use change&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021&#39;,
  &#39;climate change: emissions from direct land use change&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021&#39;,
  &#39;climate change: fossil&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021&#39;,
  &#39;climate change: fossil emissions (excl. aircraft emissions)&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021&#39;,
  &#39;climate change: removals from direct land use change&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021&#39;,
  &#39;climate change: total (excl. biogenic CO2)&#39;,
  &#39;global warming potential (GWP500)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021&#39;,
  &#39;climate change: total (excl. biogenic CO2)&#39;,
  &#39;global warming potential (GWP20)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021&#39;,
  &#39;climate change: total (excl. biogenic CO2)&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021&#39;,
  &#39;climate change: total (excl. biogenic CO2)&#39;,
  &#39;global temperature change potential (GTP50)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021&#39;,
  &#39;climate change: total (excl. biogenic CO2)&#39;,
  &#39;global temperature change potential (GTP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021&#39;,
  &#39;climate change: total (excl. biogenic CO2, incl. SLCFs)&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021&#39;,
  &#39;climate change: biogenic (excl. CO2, incl. SLCFs)&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021&#39;,
  &#39;climate change: fossil (excl. biogenic CO2, incl. SLCFs)&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2021&#39;,
  &#39;climate change: direct land use change (incl. SLCFs)&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;ReCiPe 2016 v1.03, endpoint (E) no LT&#39;,
  &#39;ecosystem quality no LT&#39;,
  &#39;climate change: freshwater ecosystems no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;ReCiPe 2016 v1.03, endpoint (E) no LT&#39;,
  &#39;ecosystem quality no LT&#39;,
  &#39;climate change: terrestrial ecosystems no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;ReCiPe 2016 v1.03, endpoint (E) no LT&#39;,
  &#39;human health no LT&#39;,
  &#39;climate change: human health no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;ReCiPe 2016 v1.03, endpoint (E)&#39;,
  &#39;ecosystem quality&#39;,
  &#39;climate change: freshwater ecosystems&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;ReCiPe 2016 v1.03, endpoint (E)&#39;,
  &#39;ecosystem quality&#39;,
  &#39;climate change: terrestrial ecosystems&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;ReCiPe 2016 v1.03, endpoint (E)&#39;,
  &#39;human health&#39;,
  &#39;climate change: human health&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;ReCiPe 2016 v1.03, endpoint (H) no LT&#39;,
  &#39;ecosystem quality no LT&#39;,
  &#39;climate change: freshwater ecosystems no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;ReCiPe 2016 v1.03, endpoint (H) no LT&#39;,
  &#39;ecosystem quality no LT&#39;,
  &#39;climate change: terrestrial ecosystems no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;ReCiPe 2016 v1.03, endpoint (H) no LT&#39;,
  &#39;human health no LT&#39;,
  &#39;climate change: human health no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;ReCiPe 2016 v1.03, endpoint (H)&#39;,
  &#39;ecosystem quality&#39;,
  &#39;climate change: freshwater ecosystems&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;ReCiPe 2016 v1.03, endpoint (H)&#39;,
  &#39;ecosystem quality&#39;,
  &#39;climate change: terrestrial ecosystems&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;ReCiPe 2016 v1.03, endpoint (H)&#39;,
  &#39;human health&#39;,
  &#39;climate change: human health&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;ReCiPe 2016 v1.03, endpoint (I) no LT&#39;,
  &#39;ecosystem quality no LT&#39;,
  &#39;climate change: freshwater ecosystems no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;ReCiPe 2016 v1.03, endpoint (I) no LT&#39;,
  &#39;ecosystem quality no LT&#39;,
  &#39;climate change: terrestrial ecosystems no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;ReCiPe 2016 v1.03, endpoint (I) no LT&#39;,
  &#39;human health no LT&#39;,
  &#39;climate change: human health no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;ReCiPe 2016 v1.03, endpoint (I)&#39;,
  &#39;ecosystem quality&#39;,
  &#39;climate change: freshwater ecosystems&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;ReCiPe 2016 v1.03, endpoint (I)&#39;,
  &#39;ecosystem quality&#39;,
  &#39;climate change: terrestrial ecosystems&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;ReCiPe 2016 v1.03, endpoint (I)&#39;,
  &#39;human health&#39;,
  &#39;climate change: human health&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;ReCiPe 2016 v1.03, midpoint (E) no LT&#39;,
  &#39;climate change no LT&#39;,
  &#39;global warming potential (GWP1000) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;ReCiPe 2016 v1.03, midpoint (E)&#39;,
  &#39;climate change&#39;,
  &#39;global warming potential (GWP1000)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;ReCiPe 2016 v1.03, midpoint (H) no LT&#39;,
  &#39;climate change no LT&#39;,
  &#39;global warming potential (GWP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;ReCiPe 2016 v1.03, midpoint (H)&#39;,
  &#39;climate change&#39;,
  &#39;global warming potential (GWP100)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;ReCiPe 2016 v1.03, midpoint (I) no LT&#39;,
  &#39;climate change no LT&#39;,
  &#39;global warming potential (GWP20) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;ReCiPe 2016 v1.03, midpoint (I)&#39;,
  &#39;climate change&#39;,
  &#39;global warming potential (GWP20)&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;TRACI v2.1 no LT&#39;,
  &#39;climate change no LT&#39;,
  &#39;global warming potential (GWP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;TRACI v2.1&#39;,
  &#39;climate change&#39;,
  &#39;global warming potential (GWP100)&#39;)]
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">m</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">bd</span><span class="o">.</span><span class="n">methods</span> <span class="k">if</span> <span class="s1">&#39;IPCC 2013 no LT&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
                        <span class="ow">and</span> <span class="s1">&#39;GWP100&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">m</span><span class="p">)]</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[(&#39;ecoinvent-3.11&#39;,
  &#39;IPCC 2013 no LT&#39;,
  &#39;climate change no LT&#39;,
  &#39;global warming potential (GWP100) no LT&#39;)]
</pre></div>
</div>
<p>Good, now let’s assign it to a variable:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ipcc2013</span> <span class="o">=</span> <span class="p">[</span><span class="n">m</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">bd</span><span class="o">.</span><span class="n">methods</span> <span class="k">if</span> <span class="s1">&#39;IPCC 2013 no LT&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
                        <span class="ow">and</span> <span class="s1">&#39;GWP100&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">m</span><span class="p">)][</span><span class="mi">0</span><span class="p">]</span>
<span class="n">ipcc2013</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(&#39;ecoinvent-3.11&#39;,
 &#39;IPCC 2013 no LT&#39;,
 &#39;climate change no LT&#39;,
 &#39;global warming potential (GWP100) no LT&#39;)
</pre></div>
</div>
<p>Of course, if I know exactly the method I want, and I know the syntax, I can simply type it out</p>
<p>Using <code class="docutils literal notranslate"><span class="pre">bd.method()</span></code>, we have access to the impact category in BW</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ipcc_2013_method</span> <span class="o">=</span> <span class="n">bd</span><span class="o">.</span><span class="n">Method</span><span class="p">(</span><span class="n">ipcc2013</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">ipcc_2013_method</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>bw2data.method.Method
</pre></div>
</div>
<p>Again, there are a bunch of methods associated with a method object. You can access these by typing ipcc_2013_method. and clicking tab.<br />
For example, metadata:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ipcc_2013_method</span><span class="o">.</span><span class="n">name</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(&#39;ecoinvent-3.11&#39;,
 &#39;IPCC 2013 no LT&#39;,
 &#39;climate change no LT&#39;,
 &#39;global warming potential (GWP100) no LT&#39;)
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ipcc_2013_method</span><span class="o">.</span><span class="n">metadata</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{&#39;unit&#39;: &#39;kg CO2-Eq&#39;,
 &#39;filepath&#39;: &#39;C:\\Users\\VM256232\\AppData\\Local\\pylca\\EcoinventInterface\\cache\\ecoinvent 3.11_LCIA_implementation\\LCIA Implementation 3.11.xlsx&#39;,
 &#39;ecoinvent_version&#39;: &#39;3.11&#39;,
 &#39;database&#39;: &#39;ecoinvent-3.11-biosphere&#39;,
 &#39;abbreviation&#39;: &#39;ecoinvent-311icg.a98e5e3ccdfcb6dbc35c9afd4b809fcb&#39;,
 &#39;num_cfs&#39;: 129,
 &#39;geocollections&#39;: [&#39;world&#39;]}
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ipcc_2013_method</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;unit&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&#39;kg CO2-Eq&#39;
</pre></div>
</div>
<p>We can also have a look into the characterization factors, elements of the matrix C.</p>
<blockquote>
<div><p>They consist of the key of the <em>activity = (database name, unique identifier of the activity) and the amount of the CF</em></p>
</div></blockquote>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cf</span> <span class="o">=</span> <span class="n">ipcc_2013_method</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>

<span class="n">cf</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[(128530478201045024, 1301.27019996),
 (128530479622914069, 1301.27019996),
 (128530479367061596, 1301.27019996),
 (128530478029078548, 160.09863099),
 (128530478062633032, 160.09863099),
 (128530478259765285, 160.09863099),
 (128530479828434970, 4804.43907777),
 (128530478834384940, 4804.43907777),
 (128530477651591205, 4804.43907777),
 (128530479694217223, 5823.72618701)]
</pre></div>
</div>
</section>
</section>
<section id="importing-a-dataset-from-excel">
<h3>2.2 Importing a dataset from Excel<a class="headerlink" href="#importing-a-dataset-from-excel" title="Link to this heading">¶</a></h3>
<p>In addition to the import of a standard background database and the manual database creation (see below), we can also import data from various file types, one of them being Excel. This works relatively smoothly, provided the Excel workbook is created correctly.</p>
<blockquote>
<div><p><strong>This is the easiest way to create your own foreground data in Brightway</strong></p>
</div></blockquote>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">imp</span> <span class="o">=</span> <span class="n">bi</span><span class="o">.</span><span class="n">ExcelImporter</span><span class="p">(</span><span class="s2">&quot;tuto_EV-code.xlsx&quot;</span><span class="p">)</span>
<span class="n">imp</span><span class="o">.</span><span class="n">apply_strategies</span><span class="p">()</span>
<span class="n">imp</span><span class="o">.</span><span class="n">match_database</span><span class="p">(</span><span class="n">fields</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;unit&#39;</span><span class="p">,</span> <span class="s1">&#39;location&#39;</span><span class="p">))</span>
<span class="n">imp</span><span class="o">.</span><span class="n">match_database</span><span class="p">(</span><span class="s1">&#39;ecoinvent-3.11-cutoff&#39;</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;unit&#39;</span><span class="p">,</span> <span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="s1">&#39;reference product&#39;</span><span class="p">))</span>
<span class="n">imp</span><span class="o">.</span><span class="n">statistics</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Extracted 1 worksheets in 0.03 seconds
Applying strategy: csv_restore_tuples
Applying strategy: csv_restore_booleans
Applying strategy: csv_numerize
Applying strategy: csv_drop_unknown
Applying strategy: csv_add_missing_exchanges_section
Applying strategy: normalize_units
Applying strategy: normalize_biosphere_categories
Applying strategy: normalize_biosphere_names
Applying strategy: strip_biosphere_exc_locations
Applying strategy: set_code_by_activity_hash
Applying strategy: link_iterable_by_fields
Applying strategy: assign_only_product_as_production
Applying strategy: link_technosphere_by_activity_hash
Applying strategy: drop_falsey_uncertainty_fields_but_keep_zeros
Applying strategy: convert_uncertainty_types_to_integers
Applying strategy: convert_activity_parameters_to_list
Applied 16 strategies in 0.64 seconds
Applying strategy: link_iterable_by_fields
Applying strategy: link_iterable_by_fields
Graph statistics for `tuto_EV-code` importer:
7 graph nodes:
	process: 7
95 graph edges:
	technosphere: 80
	biosphere: 8
	production: 7
95 edges to the following databases:
	ecoinvent-3.11-cutoff: 74
	tuto_EV-code: 13
	ecoinvent-3.11-biosphere: 8
0 unique unlinked edges (0 total):







(7, 95, 0, 0)
</pre></div>
</div>
<p>it seems there is an unlinked exchange. One way to visualize the mismatching errors is to create an excel:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">imp</span><span class="o">.</span><span class="n">write_excel</span><span class="p">()</span>
<span class="c1"># Go to this path to check what the problem is, and correct it</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Wrote matching file to:
C:\Users\VM256232\AppData\Local\pylca\Brightway3\formation_bw25.b56e02cf\output\db-matching-tuto_EV-code.xlsx





WindowsPath(&#39;C:/Users/VM256232/AppData/Local/pylca/Brightway3/formation_bw25.b56e02cf/output/db-matching-tuto_EV-code.xlsx&#39;)
</pre></div>
</div>
<p>When you have corrected the problem in the file “tuto_EV-code.xlsx”, execute again the code for importing the excel database</p>
<p>If no more unlinked exchanges, we can register the database: Having imported the data, we also need to write it to a database to save it:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">imp</span><span class="o">.</span><span class="n">write_database</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>100%|██████████| 7/7 [00:00&lt;00:00, 415.20it/s]


10:12:26+0100 [info     ] Vacuuming database            
Created database: tuto_EV-code
</pre></div>
</div>
<p>Note : to avoid any error due to persistent state, it is better to reset and/or reimport the foreground database every time you use it</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># This new database will be our foreground database. </span>
<span class="c1"># Best practice to avoid mistakes : Never modify the background database (here ecoinvent), only the foreground database</span>
<span class="n">agb</span><span class="o">.</span><span class="n">setForeground</span><span class="p">(</span><span class="s1">&#39;tuto_EV-code&#39;</span><span class="p">)</span> 
<span class="n">agb</span><span class="o">.</span><span class="n">list_databases</span><span class="p">()</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>backend</th>
      <th>nb_activities</th>
      <th>type</th>
    </tr>
    <tr>
      <th>name</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>ecoinvent-3.11-biosphere</th>
      <td>sqlite</td>
      <td>9803</td>
      <td>biosphere</td>
    </tr>
    <tr>
      <th>ecoinvent-3.11-cutoff</th>
      <td>sqlite</td>
      <td>25412</td>
      <td>background</td>
    </tr>
    <tr>
      <th>tuto_EV-ab</th>
      <td>sqlite</td>
      <td>4</td>
      <td>background</td>
    </tr>
    <tr>
      <th>tuto_EV-code</th>
      <td>sqlite</td>
      <td>7</td>
      <td>foreground</td>
    </tr>
  </tbody>
</table>
</div>
<p>To delete a database, here is the syntax:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># del bd.databases[&#39;EcoInvent-Aspirator&#39;]</span>
<span class="c1"># bd.databases</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">db_EV</span> <span class="o">=</span> <span class="n">bd</span><span class="o">.</span><span class="n">Database</span><span class="p">(</span><span class="s1">&#39;tuto_EV-code&#39;</span><span class="p">)</span>
<span class="nb">len</span><span class="p">(</span><span class="n">db_EV</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>7
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">act</span> <span class="ow">in</span> <span class="n">db_EV</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">act</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&#39;powertrain production, for electric passenger car&#39; (kilogram, GLO, None)
&#39;Production&#39; (kilogram, GLO, None)
&#39;battery production, Li-ion, NMC811, rechargeable&#39; (kilogram, CN, None)
&#39;glider production, passenger car&#39; (kilogram, GLO, None)
&#39;End of Life&#39; (kilogram, GLO, None)
&#39;Use&#39; (kilometer, GLO, None)
&#39;Lifecycle&#39; (kilometer, GLO, None)
</pre></div>
</div>
<p>Another technique would be to create your foreground database on Activity browser, save it in your projects and use it in Brightway2 (or export it as an excel file)</p>
<p>Okay, now that we have our background data (be it manually created or imported from an existing database), it’s time to model our foreground system!</p>
</section>
<section id="database-selection-and-a-first-look-at-activities">
<h3>2.3 Database selection and a first look at activities<a class="headerlink" href="#database-selection-and-a-first-look-at-activities" title="Link to this heading">¶</a></h3>
<p>Now we’ll explore more what are really activities and what it contains (spoiler : exchanges)</p>
<section id="lci-activities">
<h4>LCI activities<a class="headerlink" href="#lci-activities" title="Link to this heading">¶</a></h4>
<p>When dealing with <strong>background or foreground databases</strong>, activities refers to <strong>intermediary flows</strong> and are modelled in BW as nodes “within the technosphere” and will be part of the technosphere matrix A. For the <strong>biosphere database</strong>, activities refers to the <strong>elementary flows</strong>, and will be part of the biosphere matrix B.</p>
<p>All theses activities are made of exchanges that consists of <strong>inputs and outputs</strong> which could be different type :</p>
<ul class="simple">
<li><p>biosphere : consumption of resource or emissions,</p></li>
<li><p>technosphere process,</p></li>
<li><p>production : output amount</p></li>
</ul>
<p>Let’s dig into our new database by exploring the activity ‘Lifecycle’</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">lifecycle_act</span> <span class="o">=</span> <span class="n">agb</span><span class="o">.</span><span class="n">findActivity</span><span class="p">(</span><span class="s1">&#39;Lifecycle&#39;</span><span class="p">,</span> <span class="n">db_name</span><span class="o">=</span><span class="s1">&#39;tuto_EV-code&#39;</span><span class="p">)</span>
<span class="n">lifecycle_act</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&#39;Lifecycle&#39; (kilometer, GLO, None)
</pre></div>
</div>
<p>To see what is stored in an activity object, let’s convert our random act in a dictionary. There are a lot of metadata contained in an activity !</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">lifecycle_act</span><span class="o">.</span><span class="n">as_dict</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{&#39;comment&#39;: &#39;Lifecycle of a electric vehicle, driving 1 kilometer&#39;,
 &#39;location&#39;: &#39;GLO&#39;,
 &#39;reference product&#39;: &#39;Lifecycle&#39;,
 &#39;type&#39;: &#39;processwithreferenceproduct&#39;,
 &#39;unit&#39;: &#39;kilometer&#39;,
 &#39;name&#39;: &#39;Lifecycle&#39;,
 &#39;worksheet name&#39;: &#39;example_EV&#39;,
 &#39;database&#39;: &#39;tuto_EV-code&#39;,
 &#39;code&#39;: &#39;845539160c50e2aaf93f296085f9013c&#39;,
 &#39;id&#39;: 241851730520440832}
</pre></div>
</div>
<p>Notice one important thing: <strong>no exchanges</strong>!<br />
Indeed, the exchanges and the activities are stored in two different tables of the <code class="docutils literal notranslate"><span class="pre">databases.db</span></code> database.<br />
It is possible, however, to iterate through the exchanges of the activities.</p>
</section>
<section id="lci-exchanges">
<h4>LCI exchanges<a class="headerlink" href="#lci-exchanges" title="Link to this heading">¶</a></h4>
<p><strong><code class="docutils literal notranslate"><span class="pre">Exchanges</span></code></strong> are the edges between nodes.</p>
<p>These can be an edge:</p>
<ul class="simple">
<li><p>between two activities within the technosphere (an element $a_{ij}$ of matrix $A$)</p></li>
<li><p>between an activity in the technosphere and an activity in the biosphere (an element $b_{kj}$ of the biosphere matrix $B$).</p></li>
</ul>
<p>The simpliest way to display these exchanges is using <code class="docutils literal notranslate"><span class="pre">printAct</span></code> from`the helper functions of ````lca_algebraic```</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">agb</span><span class="o">.</span><span class="n">printAct</span><span class="p">(</span><span class="n">lifecycle_act</span><span class="p">)</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead tr th {
    text-align: left;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th colspan="3" halign="left">Lifecycle (1.000000 kilometer)</th>
    </tr>
    <tr>
      <th></th>
      <th>input</th>
      <th>amount</th>
      <th>unit</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>End of Life</th>
      <td>End of Life{FG}</td>
      <td>-0.0075</td>
      <td>kilogram</td>
    </tr>
    <tr>
      <th>Production</th>
      <td>Production{FG}</td>
      <td>0.0075</td>
      <td>kilogram</td>
    </tr>
    <tr>
      <th>Use</th>
      <td>Use{FG}</td>
      <td>1</td>
      <td>kilometer</td>
    </tr>
  </tbody>
</table>
</div>
<p>One can also iterate through <strong>all</strong> exchanges that have a given activity as <code class="docutils literal notranslate"><span class="pre">output</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">exc</span> <span class="ow">in</span> <span class="n">lifecycle_act</span><span class="o">.</span><span class="n">exchanges</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Exchange: 1 kilometer &#39;Lifecycle&#39; (kilometer, GLO, None) to &#39;Lifecycle&#39; (kilometer, GLO, None)&gt;
Exchange: -0.0075 kilogram &#39;End of Life&#39; (kilogram, GLO, None) to &#39;Lifecycle&#39; (kilometer, GLO, None)&gt;
Exchange: 0.0075 kilogram &#39;Production&#39; (kilogram, GLO, None) to &#39;Lifecycle&#39; (kilometer, GLO, None)&gt;
Exchange: 1 kilometer &#39;Use&#39; (kilometer, GLO, None) to &#39;Lifecycle&#39; (kilometer, GLO, None)&gt;
</pre></div>
</div>
<p>One can also iterate through subsets of the exchanges:</p>
<ul class="simple">
<li><p><strong>Technosphere</strong> exchanges: exchanges linking to other activities in the technosphere, <code class="docutils literal notranslate"><span class="pre">activity.technosphere()</span></code></p></li>
<li><p><strong>Biosphere</strong> exchanges: AKA elementary flows, linking to activities in the biosphere database <code class="docutils literal notranslate"><span class="pre">activity.biosphere()</span></code></p></li>
<li><p><strong>Production</strong> exchange: the reference flow of the activity <code class="docutils literal notranslate"><span class="pre">activity.production</span></code></p></li>
</ul>
<p><strong>Sign Convention in ecoinvent (and thus in bw)</strong></p>
<ul class="simple">
<li><p>for biosphere flows : a positivive value means emissions to the natural environment for [air], [soil], and [water] categories, and consumtion of resources from their environment for [natural resource] category</p></li>
<li><p>for technosphere : negative values represent the consumption of products, while positive values represent the production of products</p></li>
</ul>
<p>For the specific case of End of Life treatment with wastes, reference product is -1 meaning 1kg is treated (or consumed). Thus, exchanges flows of wastes are also negatives. See this <a class="reference external" href="https://stackoverflow.com/questions/68133565/negative-production-for-end-of-life-treatment-process">discussion</a></p>
</section>
</section>
</section>
<section id="my-first-lca">
<h2>3 My first LCA<a class="headerlink" href="#my-first-lca" title="Link to this heading">¶</a></h2>
<p>You have now a sufficient knowledge to perform and understand a LCA in BW.</p>
<p>Brightway has a so-called LCA object, instantiated using :</p>
<p><em>LCA({reference flow : amount}, impact category)</em></p>
<p>The only required argument is a <strong>functional unit, described by a dictionary with keys = activities and values = amounts</strong><br />
A second argument that is often passed is an LCIA method, passed using the method tuple.</p>
<section id="general-syntax">
<h3>3.1 General syntax<a class="headerlink" href="#general-syntax" title="Link to this heading">¶</a></h3>
<p>Let’s create our first LCA object using the activity that models the whole EV lifecycle</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">lifecycle_act</span> <span class="o">=</span> <span class="n">agb</span><span class="o">.</span><span class="n">findActivity</span><span class="p">(</span><span class="s1">&#39;Lifecycle&#39;</span><span class="p">,</span> <span class="n">db_name</span><span class="o">=</span><span class="s1">&#39;tuto_EV-code&#39;</span><span class="p">)</span>
<span class="n">agb</span><span class="o">.</span><span class="n">printAct</span><span class="p">(</span><span class="n">lifecycle_act</span><span class="p">)</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead tr th {
    text-align: left;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th colspan="3" halign="left">Lifecycle (1.000000 kilometer)</th>
    </tr>
    <tr>
      <th></th>
      <th>input</th>
      <th>amount</th>
      <th>unit</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>End of Life</th>
      <td>End of Life{FG}</td>
      <td>-0.0075</td>
      <td>kilogram</td>
    </tr>
    <tr>
      <th>Production</th>
      <td>Production{FG}</td>
      <td>0.0075</td>
      <td>kilogram</td>
    </tr>
    <tr>
      <th>Use</th>
      <td>Use{FG}</td>
      <td>1</td>
      <td>kilometer</td>
    </tr>
  </tbody>
</table>
</div>
<p>Get also one impact category</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">CC</span> <span class="o">=</span> <span class="p">[</span><span class="n">m</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">bd</span><span class="o">.</span><span class="n">methods</span> <span class="k">if</span> <span class="s1">&#39;GWP100&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">m</span><span class="p">)</span> <span class="ow">and</span> <span class="s1">&#39;EF v3.1 no LT&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">m</span><span class="p">)</span> <span class="ow">and</span> <span class="s1">&#39;climate change no LT&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">m</span><span class="p">)][</span><span class="mi">0</span><span class="p">]</span>
<span class="n">CC</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(&#39;ecoinvent-3.11&#39;,
 &#39;EF v3.1 no LT&#39;,
 &#39;climate change no LT&#39;,
 &#39;global warming potential (GWP100) no LT&#39;)
</pre></div>
</div>
<p>The actual LCA class (<code class="docutils literal notranslate"><span class="pre">bw2calc.LCA</span></code>) is more of a coordinator then an accountant, as the matrix builder is doing much of the data manipulation.</p>
<p>The lca class only has to do the following:</p>
<ul class="simple">
<li><p>Translate the functional unit into a demand array</p></li>
<li><p>Find the right parameter arrays, and ask matrix builder for matrces $A$ and $B$</p></li>
<li><p>Solve the linear system $Ax = B$ to get the LCI (b matrix)</p></li>
<li><p>Multiply the result by the LCIA CFs : $h=Cb$</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">myFirstLCA_quick</span> <span class="o">=</span> <span class="n">bc</span><span class="o">.</span><span class="n">LCA</span><span class="p">({</span><span class="n">lifecycle_act</span><span class="p">:</span><span class="mi">1</span><span class="p">},</span> <span class="n">CC</span><span class="p">)</span>
</pre></div>
</div>
<p>We can already get some info. For instance we have acess to the demand array f</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">myFirstLCA_quick</span><span class="o">.</span><span class="n">demand</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{241851730520440832: 1}
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">myFirstLCA_quick</span><span class="o">.</span><span class="n">method</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(&#39;ecoinvent-3.11&#39;,
 &#39;EF v3.1 no LT&#39;,
 &#39;climate change no LT&#39;,
 &#39;global warming potential (GWP100) no LT&#39;)
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">myFirstLCA_quick</span><span class="o">.</span><span class="n">lci</span><span class="p">()</span>    <span class="c1"># Builds matrices, solves the system, generates an LCI matrix.</span>
<span class="n">myFirstLCA_quick</span><span class="o">.</span><span class="n">lcia</span><span class="p">()</span>   <span class="c1"># Characterization, i.e. the multiplication of the elements </span>
                          <span class="c1"># of the LCI matrix with characterization factors from the chosen method</span>
<span class="n">myFirstLCA_quick</span><span class="o">.</span><span class="n">score</span>    <span class="c1"># Returns the score, i.e. the sum of the characterized inventory</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>0.504761624618783
</pre></div>
</div>
<p>An example on how to print the score</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The score to drive 1 km with an EV is </span><span class="si">{:.3f}</span><span class="s2"> </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">myFirstLCA_quick</span><span class="o">.</span><span class="n">score</span><span class="p">,</span> <span class="n">bd</span><span class="o">.</span><span class="n">Method</span><span class="p">(</span><span class="n">CC</span><span class="p">)</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;unit&#39;</span><span class="p">]))</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>The score to drive 1 km with an EV is 0.505 kg CO2-Eq
</pre></div>
</div>
</section>
<section id="even-simpler-with-lca-algebraic">
<h3>3.2 Even simpler with lca_algebraic<a class="headerlink" href="#even-simpler-with-lca-algebraic" title="Link to this heading">¶</a></h3>
<p>You could also compute the impacts quicker using <code class="docutils literal notranslate"><span class="pre">lca_algebraic</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df_impacts</span> <span class="o">=</span> <span class="n">agb</span><span class="o">.</span><span class="n">compute_impacts</span><span class="p">(</span><span class="n">lifecycle_act</span><span class="p">,</span> <span class="p">[</span><span class="n">CC</span><span class="p">])</span>
<span class="n">df_impacts</span> <span class="c1">#this is a DataFrame object, a bit like an excel sheet in python. It is very useful to store, manage and plot large amounts of information</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[INFO] Db changed recently, clearing cache expr
[INFO] Db changed recently, clearing cache lcia
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>EF v3.1 no LT - climate change no LT[kg CO2-Eq]</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Lifecycle</th>
      <td>0.504762</td>
    </tr>
  </tbody>
</table>
</div>
</section>
<section id="example-of-visualization-syntax">
<h3>3.3 Example of visualization syntax<a class="headerlink" href="#example-of-visualization-syntax" title="Link to this heading">¶</a></h3>
<p>An example of visualization:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">seaborn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sns</span> <span class="c1">#for good-looking graph</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">()</span> <span class="c1">#seabron provide good looking display</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set_style</span><span class="p">(</span><span class="s1">&#39;darkgrid&#39;</span><span class="p">)</span>

<span class="n">df_impacts</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">barh</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;Axes: &gt;
</pre></div>
</div>
<p><img alt="png" src="../_images/bw25_notebook_EV_126_1.png" /></p>
<p><strong>Question</strong></p>
<p>Isn’t it a bit high for an EV driving 1 km in France ?</p>
<p>To answer this question, let’s compare it with a diesel vehicle</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#find the activities that might correspond to diesel</span>
<span class="p">[</span><span class="n">act</span> <span class="k">for</span> <span class="n">act</span> <span class="ow">in</span> <span class="n">db_ei</span> <span class="k">if</span> <span class="s1">&#39;diesel&#39;</span> <span class="ow">in</span> <span class="n">act</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="s1">&#39;car&#39;</span> <span class="ow">in</span> <span class="n">act</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]]</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[&#39;transport, passenger, car, diesel, small size, EURO 3&#39; (kilometer, RoW, None),
 &#39;transport, passenger, car, diesel, small size, EURO 5&#39; (kilometer, RER, None),
 &#39;market for transport, passenger, car, diesel, medium size, EURO 4&#39; (kilometer, GLO, None),
 &#39;market for transport, passenger, car, diesel, large size, EURO 5&#39; (kilometer, GLO, None),
 &#39;transport, passenger, car, diesel, small size, EURO 4&#39; (kilometer, RER, None),
 &#39;transport, passenger, car, diesel, large size, EURO 3&#39; (kilometer, RER, None),
 &#39;market for passenger car, diesel&#39; (kilogram, GLO, None),
 &#39;transport, passenger, car, diesel, large size, EURO 5&#39; (kilometer, RoW, None),
 &#39;market for transport, passenger, car, diesel, small size, EURO 3&#39; (kilometer, GLO, None),
 &#39;transport, passenger, car, diesel, medium size, EURO 3&#39; (kilometer, RoW, None),
 &#39;transport, passenger, car, diesel, small size, EURO 4&#39; (kilometer, RoW, None),
 &#39;market for transport, passenger, car, diesel, large size, EURO 3&#39; (kilometer, GLO, None),
 &#39;market for transport, passenger, car, diesel, large size, EURO 4&#39; (kilometer, GLO, None),
 &#39;transport, passenger, car, diesel, medium size, EURO 3&#39; (kilometer, RER, None),
 &#39;market for transport, passenger, car, diesel, medium size, EURO 5&#39; (kilometer, GLO, None),
 &#39;transport, passenger, car, diesel, large size, EURO 3&#39; (kilometer, RoW, None),
 &#39;transport, passenger, car, diesel, large size, EURO 4&#39; (kilometer, RER, None),
 &#39;transport, passenger, car, diesel, small size, EURO 3&#39; (kilometer, RER, None),
 &#39;transport, passenger, car, diesel, large size, EURO 5&#39; (kilometer, RER, None),
 &#39;transport, passenger, car, diesel, medium size, EURO 4&#39; (kilometer, RoW, None),
 &#39;market for transport, passenger, car, diesel, medium size, EURO 3&#39; (kilometer, GLO, None),
 &#39;transport, passenger, car, diesel, medium size, EURO 4&#39; (kilometer, RER, None),
 &#39;market for transport, passenger, car, diesel, small size, EURO 4&#39; (kilometer, GLO, None),
 &#39;transport, passenger, car, diesel, medium size, EURO 5&#39; (kilometer, RER, None),
 &#39;transport, passenger, car, diesel, medium size, EURO 5&#39; (kilometer, RoW, None),
 &#39;passenger car production, diesel&#39; (kilogram, GLO, None),
 &#39;transport, passenger, car, diesel, large size, EURO 4&#39; (kilometer, RoW, None),
 &#39;transport, passenger, car, diesel, small size, EURO 5&#39; (kilometer, RoW, None),
 &#39;market for transport, passenger, car, diesel, small size, EURO 5&#39; (kilometer, GLO, None)]
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#let&#39;s take one</span>
<span class="n">lifecycle_diesel</span> <span class="o">=</span> <span class="n">agb</span><span class="o">.</span><span class="n">findActivity</span><span class="p">(</span><span class="s1">&#39;transport, passenger, car, diesel, medium size, EURO 4&#39;</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;RER&#39;</span><span class="p">,</span> <span class="n">db_name</span><span class="o">=</span><span class="s1">&#39;ecoinvent-3.11-cutoff&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Now let’s compare both</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df_impacts</span> <span class="o">=</span> <span class="n">agb</span><span class="o">.</span><span class="n">compute_impacts</span><span class="p">([</span><span class="n">lifecycle_act</span><span class="p">,</span> <span class="n">lifecycle_diesel</span><span class="p">],</span> <span class="p">[</span><span class="n">CC</span><span class="p">])</span>
<span class="n">df_impacts</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">barh</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;Axes: &gt;
</pre></div>
</div>
<p><img alt="png" src="../_images/bw25_notebook_EV_132_1.png" /></p>
<p>Something is wrong, we will look at it a bit later</p>
</section>
<section id="multi-impacts-analysis">
<h3>3.4 Multi-impacts analysis<a class="headerlink" href="#multi-impacts-analysis" title="Link to this heading">¶</a></h3>
<p>To evaluate the indicator results for the EV for several impact categories; the easiest way is to use the function <code class="docutils literal notranslate"><span class="pre">compute_impacts</span></code> with a list of impact categories</p>
<p>To get the whole list of impact cateogires of one calulcation method, le’s say the <a class="reference external" href="https://green-business.ec.europa.eu/environmental-footprint-methods_en">Environmental Footprint</a> method (named EF in Brightway) :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">list_methods</span><span class="o">=</span><span class="n">agb</span><span class="o">.</span><span class="n">findMethods</span><span class="p">(</span><span class="s1">&#39;EF v3.1 no LT&#39;</span><span class="p">)</span>
<span class="n">list_methods</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[(&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.1 no LT&#39;,
  &#39;acidification no LT&#39;,
  &#39;accumulated exceedance (AE) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.1 no LT&#39;,
  &#39;climate change no LT&#39;,
  &#39;global warming potential (GWP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.1 no LT&#39;,
  &#39;climate change: biogenic no LT&#39;,
  &#39;global warming potential (GWP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.1 no LT&#39;,
  &#39;climate change: fossil no LT&#39;,
  &#39;global warming potential (GWP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.1 no LT&#39;,
  &#39;climate change: land use and land use change no LT&#39;,
  &#39;global warming potential (GWP100) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.1 no LT&#39;,
  &#39;ecotoxicity: freshwater no LT&#39;,
  &#39;comparative toxic unit for ecosystems (CTUe) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.1 no LT&#39;,
  &#39;ecotoxicity: freshwater, inorganics no LT&#39;,
  &#39;comparative toxic unit for ecosystems (CTUe) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.1 no LT&#39;,
  &#39;ecotoxicity: freshwater, organics no LT&#39;,
  &#39;comparative toxic unit for ecosystems (CTUe) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.1 no LT&#39;,
  &#39;energy resources: non-renewable no LT&#39;,
  &#39;abiotic depletion potential (ADP): fossil fuels no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.1 no LT&#39;,
  &#39;eutrophication: freshwater no LT&#39;,
  &#39;fraction of nutrients reaching freshwater end compartment (P) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.1 no LT&#39;,
  &#39;eutrophication: marine no LT&#39;,
  &#39;fraction of nutrients reaching marine end compartment (N) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.1 no LT&#39;,
  &#39;eutrophication: terrestrial no LT&#39;,
  &#39;accumulated exceedance (AE) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.1 no LT&#39;,
  &#39;human toxicity: carcinogenic no LT&#39;,
  &#39;comparative toxic unit for human (CTUh) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.1 no LT&#39;,
  &#39;human toxicity: carcinogenic, inorganics no LT&#39;,
  &#39;comparative toxic unit for human (CTUh) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.1 no LT&#39;,
  &#39;human toxicity: carcinogenic, organics no LT&#39;,
  &#39;comparative toxic unit for human (CTUh) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.1 no LT&#39;,
  &#39;human toxicity: non-carcinogenic no LT&#39;,
  &#39;comparative toxic unit for human (CTUh) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.1 no LT&#39;,
  &#39;human toxicity: non-carcinogenic, inorganics no LT&#39;,
  &#39;comparative toxic unit for human (CTUh) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.1 no LT&#39;,
  &#39;human toxicity: non-carcinogenic, organics no LT&#39;,
  &#39;comparative toxic unit for human (CTUh) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.1 no LT&#39;,
  &#39;ionising radiation: human health no LT&#39;,
  &#39;human exposure efficiency relative to u235 no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.1 no LT&#39;,
  &#39;land use no LT&#39;,
  &#39;soil quality index no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.1 no LT&#39;,
  &#39;material resources: metals/minerals no LT&#39;,
  &#39;abiotic depletion potential (ADP): elements (ultimate reserves) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.1 no LT&#39;,
  &#39;ozone depletion no LT&#39;,
  &#39;ozone depletion potential (ODP) no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.1 no LT&#39;,
  &#39;particulate matter formation no LT&#39;,
  &#39;impact on human health no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.1 no LT&#39;,
  &#39;photochemical oxidant formation: human health no LT&#39;,
  &#39;tropospheric ozone concentration increase no LT&#39;),
 (&#39;ecoinvent-3.11&#39;,
  &#39;EF v3.1 no LT&#39;,
  &#39;water use no LT&#39;,
  &#39;user deprivation potential (deprivation-weighted water consumption) no LT&#39;)]
</pre></div>
</div>
<p>You just need to give the list methods to the function:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">agb</span><span class="o">.</span><span class="n">compute_impacts</span><span class="p">(</span><span class="n">lifecycle_act</span><span class="p">,</span> <span class="n">list_methods</span><span class="p">)</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>EF v3.1 no LT - acidification no LT[mol H+-Eq]</th>
      <th>EF v3.1 no LT - climate change no LT[kg CO2-Eq]</th>
      <th>EF v3.1 no LT - climate change: biogenic no LT[kg CO2-Eq]</th>
      <th>EF v3.1 no LT - climate change: fossil no LT[kg CO2-Eq]</th>
      <th>EF v3.1 no LT - climate change: land use and land use change no LT[kg CO2-Eq]</th>
      <th>EF v3.1 no LT - ecotoxicity: freshwater no LT[CTUe]</th>
      <th>EF v3.1 no LT - ecotoxicity: freshwater, inorganics no LT[CTUe]</th>
      <th>EF v3.1 no LT - ecotoxicity: freshwater, organics no LT[CTUe]</th>
      <th>EF v3.1 no LT - energy resources: non-renewable no LT[MJ, net calorific value]</th>
      <th>EF v3.1 no LT - eutrophication: freshwater no LT[kg P-Eq]</th>
      <th>...</th>
      <th>EF v3.1 no LT - human toxicity: non-carcinogenic no LT[CTUh]</th>
      <th>EF v3.1 no LT - human toxicity: non-carcinogenic, inorganics no LT[CTUh]</th>
      <th>EF v3.1 no LT - human toxicity: non-carcinogenic, organics no LT[CTUh]</th>
      <th>EF v3.1 no LT - ionising radiation: human health no LT[kBq U235-Eq]</th>
      <th>EF v3.1 no LT - land use no LT[dimensionless]</th>
      <th>EF v3.1 no LT - material resources: metals/minerals no LT[kg Sb-Eq]</th>
      <th>EF v3.1 no LT - ozone depletion no LT[kg CFC-11-Eq]</th>
      <th>EF v3.1 no LT - particulate matter formation no LT[disease incidence]</th>
      <th>EF v3.1 no LT - photochemical oxidant formation: human health no LT[kg NMVOC-Eq]</th>
      <th>EF v3.1 no LT - water use no LT[m3 world Eq deprived]</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Lifecycle</th>
      <td>0.00574435</td>
      <td>0.504762</td>
      <td>0.000672769</td>
      <td>0.503844</td>
      <td>0.000245172</td>
      <td>1.47358</td>
      <td>1.43045</td>
      <td>0.0431316</td>
      <td>6.4573</td>
      <td>8.44003e-06</td>
      <td>...</td>
      <td>4.97774e-09</td>
      <td>4.68456e-09</td>
      <td>2.93177e-10</td>
      <td>0.00413568</td>
      <td>0.815954</td>
      <td>9.24182e-06</td>
      <td>7.63387e-09</td>
      <td>1.61485e-08</td>
      <td>0.00770081</td>
      <td>0.0826489</td>
    </tr>
  </tbody>
</table>
<p>1 rows × 25 columns</p>
</div>
</section>
</section>
<section id="contribution-analysis">
<h2>4. Contribution analysis<a class="headerlink" href="#contribution-analysis" title="Link to this heading">¶</a></h2>
<p>To see how the impact is distributed along the lifecycle of an activity, we can do a contribution analysis.</p>
<p>The sections below provide a panel of useful functions and nice plots.</p>
<section id="activity-1-impact-category">
<h3>4.1. 1 activity, 1 impact category<a class="headerlink" href="#activity-1-impact-category" title="Link to this heading">¶</a></h3>
<section id="identify-the-hotspots">
<h4>Identify the hotspots<a class="headerlink" href="#identify-the-hotspots" title="Link to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">bw2analyzer</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ba</span>
</pre></div>
</div>
<p>One very useful method to quickly analyze the contribution tree of an activity in Brightway is the module <code class="docutils literal notranslate"><span class="pre">.print_recursive_calculation()</span></code> which is really easy-to-use:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ba</span><span class="o">.</span><span class="n">print_recursive_calculation</span><span class="err">?</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[31mSignature:[39m
ba.print_recursive_calculation(
    activity,
    lcia_method,
    amount=[32m1[39m,
    max_level=[32m3[39m,
    cutoff=[32m0.01[39m,
    string_length=[32m130[39m,
    file_obj=[38;5;28;01mNone[39;00m,
    tab_character=[33m&#39;  &#39;[39m,
    use_matrix_values=[38;5;28;01mFalse[39;00m,
    _lca_obj=[38;5;28;01mNone[39;00m,
    _total_score=[38;5;28;01mNone[39;00m,
    __level=[32m0[39m,
    __first=[38;5;28;01mTrue[39;00m,
)
[31mDocstring:[39m
Traverse a supply chain graph, and calculate the LCA scores of each component. Prints the result with the format:

{tab_character * level }{fraction of total score} ({absolute LCA score for this input} | {amount of input}) {input activity}

Args:
    activity: ``Activity``. The starting point of the supply chain graph.
    lcia_method: tuple. LCIA method to use when traversing supply chain graph.
    amount: int. Amount of ``activity`` to assess.
    max_level: int. Maximum depth to traverse.
    cutoff: float. Fraction of total score to use as cutoff when deciding whether to traverse deeper.
    string_length: int. Maximum length of printed string.
    file_obj: File-like object (supports ``.write``), optional. Output will be written to this object if provided.
    tab_character: str. Character to use to indicate indentation.
    use_matrix_values: bool. Take exchange values from the matrix instead of the exchange instance ``amount``. Useful for Monte Carlo, but can be incorrect if there is more than one exchange from the same pair of nodes.

Normally internal args:
    _lca_obj: ``LCA``. Can give an instance of the LCA class (e.g. when doing regionalized or Monte Carlo LCA)
    _total_score: float. Needed if specifying ``_lca_obj``.

Internal args (used during recursion, do not touch);
    __level: int.
    __first: bool.

Returns:
    Nothing. Prints to ``sys.stdout`` or ``file_obj``
[31mFile:[39m      c:\users\vm256232\appdata\local\miniforge3\envs\bw25_tr\lib\site-packages\bw2analyzer\utils.py
[31mType:[39m      function
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ba</span><span class="o">.</span><span class="n">print_recursive_calculation</span><span class="p">(</span><span class="n">lifecycle_act</span><span class="p">,</span> <span class="n">CC</span><span class="p">,</span> <span class="n">max_level</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">cutoff</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Fraction of score | Absolute score | Amount | Activity
0001 | 0.5048 |     1 | &#39;Lifecycle&#39; (kilometer, GLO, None)
  0.147 | 0.07422 | 0.0075 | &#39;Production&#39; (kilogram, GLO, None)
  0.844 | 0.4259 |     1 | &#39;Use&#39; (kilometer, GLO, None)
    0.831 | 0.4193 |     4 | &#39;diesel, burned in diesel-electric generating set, 18.5kW&#39; (megajoule, GLO, None)
      0.16 | 0.08077 | 0.0936 | &#39;market group for diesel&#39; (kilogram, GLO, None)
</pre></div>
</div>
</section>
<section id="visualization">
<h4>Visualization<a class="headerlink" href="#visualization" title="Link to this heading">¶</a></h4>
<p>To get a prettier print, we first need to define an intermediate function for graph traversal :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Extract contribution data</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_contributions</span><span class="p">(</span><span class="n">activity</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">max_depth</span><span class="p">,</span> <span class="n">cutoff</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">amount</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parents</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">levels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">depth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;extract the contribution of sub activities to the impact of the main activity.</span>
<span class="sd">    Returns lists that can directly be plotted as suburst or treemap.</span>
<span class="sd">    You can pass values of lca_algebraic parameters</span>

<span class="sd">    :param activity: main activity to plot contribution for</span>
<span class="sd">    :type activity: bw2 activity</span>
<span class="sd">    :param method: lcia method to compute impacts</span>
<span class="sd">    :type method: bw2 method</span>
<span class="sd">    :param max_depth: max recursion depth</span>
<span class="sd">    :type max_depth: int</span>
<span class="sd">    :param cutoff: minimum contribution proportion for an activity to be considered, defaults to 0.01</span>
<span class="sd">    :type cutoff: float, optional</span>
<span class="sd">    :param amount: recursion parameter, amount of exchange</span>
<span class="sd">    :type amount: float, optional</span>
<span class="sd">    :param labels: DO NOT CHANGE, recursion parameter, defaults to []</span>
<span class="sd">    :type labels: list, optional</span>
<span class="sd">    :param parents: DO NOT CHANGE, recursion parameter, defaults to []</span>
<span class="sd">    :type parents: list, optional</span>
<span class="sd">    :param values: DO NOT CHANGE, recursion parameter, defaults to []</span>
<span class="sd">    :type values: list, optional</span>
<span class="sd">    :param levels: DO NOT CHANGE, recursion parameter, defaults to []</span>
<span class="sd">    :type levels: list, optional</span>
<span class="sd">    :param depth: DO NOT CHANGE, recursion parameter, defaults to 1</span>
<span class="sd">    :type depth: int, optional</span>
<span class="sd">    :param total: DO NOT CHANGE, recursion parameter, defaults to None</span>
<span class="sd">    :type total: float, optional</span>
<span class="sd">    :return: tuple of labels, parents, values and levels for sunburst or treemap plot</span>
<span class="sd">    :rtype: tuple</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="k">if</span> <span class="n">depth</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">total</span> <span class="o">=</span> <span class="n">agb</span><span class="o">.</span><span class="n">compute_impacts</span><span class="p">(</span><span class="n">activity</span><span class="p">,</span> <span class="p">[</span><span class="n">method</span><span class="p">],</span> <span class="n">functional_unit</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="n">amount</span><span class="p">),</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="c1">#impact of the main activity</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">parents</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">levels</span> <span class="o">=</span> <span class="p">[]</span>
    
    <span class="k">for</span> <span class="n">exc</span> <span class="ow">in</span> <span class="n">activity</span><span class="o">.</span><span class="n">technosphere</span><span class="p">():</span>
        <span class="n">input_activity</span> <span class="o">=</span> <span class="n">exc</span><span class="o">.</span><span class="n">input</span>
        
        <span class="n">parent</span> <span class="o">=</span> <span class="n">activity</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
        <span class="n">label</span> <span class="o">=</span> <span class="n">input_activity</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">agb</span><span class="o">.</span><span class="n">compute_impacts</span><span class="p">(</span><span class="n">input_activity</span><span class="p">,</span> <span class="p">[</span><span class="n">method</span><span class="p">],</span> <span class="n">functional_unit</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="n">amount</span><span class="o">*</span><span class="n">exc</span><span class="o">.</span><span class="n">amount</span><span class="p">),</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
        
        <span class="k">if</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="n">cutoff</span><span class="o">*</span><span class="n">total</span><span class="p">:</span> <span class="c1">#get only the most contributing activities</span>
        
            <span class="n">parents</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="n">labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
            <span class="n">levels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">depth</span><span class="p">)</span>
            
            <span class="c1"># Recursively get contributions from child activities</span>
            <span class="k">if</span> <span class="n">depth</span> <span class="o">&lt;</span> <span class="n">max_depth</span><span class="p">:</span>
                <span class="n">get_contributions</span><span class="p">(</span><span class="n">input_activity</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">max_depth</span><span class="p">,</span> <span class="n">cutoff</span><span class="p">,</span><span class="n">amount</span><span class="o">*</span><span class="n">exc</span><span class="o">.</span><span class="n">amount</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">parents</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">levels</span><span class="p">,</span> <span class="n">depth</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">total</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>
                
    <span class="k">return</span> <span class="n">labels</span><span class="p">,</span> <span class="n">parents</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">levels</span>

</pre></div>
</div>
<p>Get the contributions of whole lifecycle, for climate change</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">labels</span><span class="p">,</span> <span class="n">parents</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">levels</span> <span class="o">=</span> <span class="n">get_contributions</span><span class="p">(</span><span class="n">lifecycle_act</span><span class="p">,</span> <span class="n">CC</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">)</span>
</pre></div>
</div>
<p>plot a Sunburst</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">plotly.graph_objects</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">go</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">(</span><span class="n">go</span><span class="o">.</span><span class="n">Sunburst</span><span class="p">(</span>
        <span class="n">labels</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span>
        <span class="n">parents</span><span class="o">=</span><span class="n">parents</span><span class="p">,</span>
        <span class="n">values</span><span class="o">=</span><span class="n">values</span><span class="p">,</span> 
        <span class="n">branchvalues</span><span class="o">=</span><span class="s2">&quot;total&quot;</span><span class="p">,</span>
    <span class="p">))</span> 

<span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span><span class="n">margin</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">t</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>or a Treemap</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">(</span><span class="n">go</span><span class="o">.</span><span class="n">Treemap</span><span class="p">(</span>
        <span class="n">labels</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span>
        <span class="n">parents</span><span class="o">=</span><span class="n">parents</span><span class="p">,</span>
        <span class="n">values</span><span class="o">=</span><span class="n">values</span><span class="p">,</span>
        <span class="n">branchvalues</span><span class="o">=</span><span class="s2">&quot;total&quot;</span><span class="p">,</span>
    <span class="p">))</span> 

<span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span><span class="n">margin</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">t</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>/!\ You may have plot problems if different activities have the same activity in input (ex : battery production and use both consume electricity). In that case, play with cutoff and max_depth to avoid this problem</p>
</section>
</section>
<section id="n-activities-1-impact-category">
<h3>4.2. N activities, 1 impact category<a class="headerlink" href="#n-activities-1-impact-category" title="Link to this heading">¶</a></h3>
<p>The method above enables a very detailed analysis of one activity. Now suppose we want to compare several activities and their first-level contributors at the same time</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#example with 2 battery chemistries, see what is available :</span>
<span class="p">[</span><span class="n">act</span> <span class="k">for</span> <span class="n">act</span> <span class="ow">in</span> <span class="n">db_ei</span> <span class="k">if</span> <span class="s1">&#39;battery production&#39;</span> <span class="ow">in</span> <span class="n">act</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]]</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[&#39;battery production, Li-ion, NCA, rechargeable&#39; (kilogram, RoW, None),
 &#39;battery production, Li-ion, NMC111, rechargeable&#39; (kilogram, RoW, None),
 &#39;battery production, NiMH, rechargeable&#39; (kilogram, GLO, None),
 &#39;battery production, Li-ion, LFP, rechargeable&#39; (kilogram, CN, None),
 &#39;battery production, Na-NiCl, rechargeable&#39; (kilogram, CH, None),
 &#39;battery production, Li-ion, NMC532, rechargeable&#39; (kilogram, CN, None),
 &#39;battery production, Li-ion, NCA, rechargeable&#39; (kilogram, CN, None),
 &#39;battery production, Li-ion, NMC622, rechargeable&#39; (kilogram, RoW, None),
 &#39;battery production, Li-ion, LiMn2O4, rechargeable&#39; (kilogram, GLO, None),
 &#39;battery production, Li-ion, NMC532, rechargeable&#39; (kilogram, RoW, None),
 &#39;battery production, Li-ion, NMC622, rechargeable&#39; (kilogram, CN, None),
 &#39;battery production, Li-ion, LFP, rechargeable&#39; (kilogram, RoW, None),
 &#39;battery production, Li-ion, NMC111, rechargeable&#39; (kilogram, CN, None),
 &#39;battery production, lead acid, rechargeable, stationary&#39; (kilogram, RoW, None),
 &#39;battery production, Li-ion, NMC811, rechargeable&#39; (kilogram, RoW, None),
 &#39;battery production, Li-ion, NMC811, rechargeable&#39; (kilogram, CN, None),
 &#39;battery production, lead acid, rechargeable, stationary&#39; (kilogram, US, None)]
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#select the two we want to see</span>
<span class="n">battery_nmc</span> <span class="o">=</span> <span class="n">agb</span><span class="o">.</span><span class="n">findActivity</span><span class="p">(</span><span class="s1">&#39;battery production, Li-ion, NMC811, rechargeable&#39;</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;CN&#39;</span><span class="p">,</span> <span class="n">db_name</span><span class="o">=</span><span class="s1">&#39;ecoinvent-3.11-cutoff&#39;</span><span class="p">)</span>
<span class="n">battery_lfp</span> <span class="o">=</span> <span class="n">agb</span><span class="o">.</span><span class="n">findActivity</span><span class="p">(</span><span class="s1">&#39;battery production, Li-ion, LFP, rechargeable&#39;</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;CN&#39;</span><span class="p">,</span> <span class="n">db_name</span><span class="o">=</span><span class="s1">&#39;ecoinvent-3.11-cutoff&#39;</span><span class="p">)</span>

<span class="n">activities</span> <span class="o">=</span> <span class="p">[</span><span class="n">battery_nmc</span><span class="p">,</span><span class="n">battery_lfp</span><span class="p">]</span>
</pre></div>
</div>
<p>Make use of the function described above, with max_depth set to 1 :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">list_dfs</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1">#initialize the list of results</span>

<span class="k">for</span> <span class="n">activity</span> <span class="ow">in</span> <span class="n">activities</span><span class="p">:</span> <span class="c1">#first level contribution analysis of every activity</span>
    <span class="n">labels</span><span class="p">,</span> <span class="n">parents</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">levels</span> <span class="o">=</span> <span class="n">get_contributions</span><span class="p">(</span><span class="n">activity</span><span class="p">,</span> <span class="n">CC</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span> <span class="c1">#you can change the cutoff value</span>
    <span class="n">list_dfs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="n">activity</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="p">:</span> <span class="n">values</span><span class="p">},</span> <span class="n">index</span><span class="o">=</span><span class="n">labels</span><span class="p">))</span>

<span class="n">df_impacts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">list_dfs</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="c1">#aggregate results</span>

<span class="c1"># Sort the DataFrame by the ascending sum of columns</span>
<span class="n">sorted_df</span> <span class="o">=</span> <span class="n">df_impacts</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df_impacts</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">index</span><span class="p">]</span>

<span class="c1">#plot</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">sorted_df</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">stacked</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> 
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">)</span>

</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.legend.Legend at 0x25c5cc7da00&gt;
</pre></div>
</div>
<p><img alt="png" src="../_images/bw25_notebook_EV_163_1.png" /></p>
</section>
<section id="activity-n-impact-categories">
<h3>4.3. 1 activity, N impact categories<a class="headerlink" href="#activity-n-impact-categories" title="Link to this heading">¶</a></h3>
<p>A way to visualize the contribution for several impact categories in one plot is to use stacked bar chart. To help with this, we can use the code above and loop over several impact categories. What we will do here is more flexible. We will make use of another lca_algebraic functionnality : agb.compute_impacts(activity, methods, axis = ‘phase’)</p>
<p>For this, we need to find the relevant activities, and assign them with a custom attribute : ‘phase’</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#find relevant activities in the foreground database</span>
<span class="n">battery_prod_act</span> <span class="o">=</span> <span class="n">agb</span><span class="o">.</span><span class="n">findActivity</span><span class="p">(</span><span class="s1">&#39;battery production, Li-ion, NMC811, rechargeable&#39;</span><span class="p">,</span> <span class="n">db_name</span><span class="o">=</span><span class="s1">&#39;tuto_EV-code&#39;</span><span class="p">)</span>
<span class="n">glider_prod_act</span> <span class="o">=</span> <span class="n">agb</span><span class="o">.</span><span class="n">findActivity</span><span class="p">(</span><span class="s1">&#39;glider production, passenger car&#39;</span><span class="p">,</span> <span class="n">db_name</span><span class="o">=</span><span class="s1">&#39;tuto_EV-code&#39;</span><span class="p">)</span>
<span class="n">powertrain_prod_act</span> <span class="o">=</span> <span class="n">agb</span><span class="o">.</span><span class="n">findActivity</span><span class="p">(</span><span class="s1">&#39;powertrain production, for electric passenger car&#39;</span><span class="p">,</span> <span class="n">db_name</span><span class="o">=</span><span class="s1">&#39;tuto_EV-code&#39;</span><span class="p">)</span>
<span class="n">use_act</span> <span class="o">=</span> <span class="n">agb</span><span class="o">.</span><span class="n">findActivity</span><span class="p">(</span><span class="s1">&#39;Use&#39;</span><span class="p">,</span> <span class="n">db_name</span><span class="o">=</span><span class="s1">&#39;tuto_EV-code&#39;</span><span class="p">)</span>
<span class="n">eol_act</span> <span class="o">=</span> <span class="n">agb</span><span class="o">.</span><span class="n">findActivity</span><span class="p">(</span><span class="s1">&#39;End of Life&#39;</span><span class="p">,</span> <span class="n">db_name</span><span class="o">=</span><span class="s1">&#39;tuto_EV-code&#39;</span><span class="p">)</span>

<span class="c1">#assign them a custom attribute</span>
<span class="n">battery_prod_act</span><span class="o">.</span><span class="n">updateMeta</span><span class="p">(</span><span class="n">phase</span> <span class="o">=</span> <span class="s1">&#39;Prod - battery&#39;</span><span class="p">)</span>
<span class="n">glider_prod_act</span><span class="o">.</span><span class="n">updateMeta</span><span class="p">(</span><span class="n">phase</span> <span class="o">=</span> <span class="s1">&#39;Prod - other&#39;</span><span class="p">)</span>
<span class="n">powertrain_prod_act</span><span class="o">.</span><span class="n">updateMeta</span><span class="p">(</span><span class="n">phase</span> <span class="o">=</span> <span class="s1">&#39;Prod - other&#39;</span><span class="p">)</span> <span class="c1">#you can assign the same name for several activities, their contributions will be added</span>
<span class="n">use_act</span><span class="o">.</span><span class="n">updateMeta</span><span class="p">(</span><span class="n">phase</span> <span class="o">=</span> <span class="s1">&#39;Use&#39;</span><span class="p">)</span>
<span class="n">eol_act</span><span class="o">.</span><span class="n">updateMeta</span><span class="p">(</span><span class="n">phase</span> <span class="o">=</span> <span class="s1">&#39;EoL&#39;</span><span class="p">)</span>

<span class="c1">#see what has changed</span>
<span class="n">use_act</span><span class="o">.</span><span class="n">as_dict</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{&#39;comment&#39;: &#39;Use phase of electric vehicle, including electricity consumption and maintenance&#39;,
 &#39;location&#39;: &#39;GLO&#39;,
 &#39;reference product&#39;: &#39;Use&#39;,
 &#39;type&#39;: &#39;processwithreferenceproduct&#39;,
 &#39;unit&#39;: &#39;kilometer&#39;,
 &#39;name&#39;: &#39;Use&#39;,
 &#39;worksheet name&#39;: &#39;example_EV&#39;,
 &#39;database&#39;: &#39;tuto_EV-code&#39;,
 &#39;code&#39;: &#39;1bdffe9dc7c4894a8e26a43df916c612&#39;,
 &#39;id&#39;: 241851730520440834,
 &#39;phase&#39;: &#39;Use&#39;}
</pre></div>
</div>
<p>Note that here we do the contribution analysis with the first level input activities, but the power and flexibility of this methods is that you can assign a custom attribute and see the contribution of any activity, independent on its level in the supply chain (as long as it is in the foreground database).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#compute impacts</span>
<span class="n">df_impacts</span> <span class="o">=</span> <span class="n">agb</span><span class="o">.</span><span class="n">compute_impacts</span><span class="p">(</span><span class="n">lifecycle_act</span><span class="p">,</span> <span class="n">list_methods</span><span class="p">,</span> <span class="n">axis</span> <span class="o">=</span> <span class="s1">&#39;phase&#39;</span><span class="p">)</span>
<span class="n">df_impacts</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[INFO] Db changed recently, clearing cache expr
c:\Users\VM256232\AppData\Local\miniforge3\envs\bw25_tr\Lib\site-packages\lca_algebraic\lca.py:945: SymPyDeprecationWarning:



non-Expr objects in a Matrix is deprecated. Matrix represents
a mathematical matrix. To represent a container of non-numeric
entities, Use a list of lists, TableForm, NumPy array, or some
other data structure instead.

See https://docs.sympy.org/latest/explanation/active-deprecations.html#deprecated-non-expr-in-matrix
for details.

This has been deprecated since SymPy version 1.9. It
will be removed in a future version of SymPy.


c:\Users\VM256232\AppData\Local\miniforge3\envs\bw25_tr\Lib\site-packages\sympy\polys\domains\expressionrawdomain.py:54: SymPyDeprecationWarning:



Using non-Expr arguments in Add is deprecated (in this case, one of
the arguments has type &#39;AxisDict&#39;).

If you really did intend to use a multiplication or addition operation with
this object, use the * or + operator instead.

See https://docs.sympy.org/latest/explanation/active-deprecations.html#non-expr-args-deprecated
for details.

This has been deprecated since SymPy version 1.7. It
will be removed in a future version of SymPy.


[INFO] Db changed recently, clearing cache lcia
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>EF v3.1 no LT - acidification no LT[mol H+-Eq]</th>
      <th>EF v3.1 no LT - climate change no LT[kg CO2-Eq]</th>
      <th>EF v3.1 no LT - climate change: biogenic no LT[kg CO2-Eq]</th>
      <th>EF v3.1 no LT - climate change: fossil no LT[kg CO2-Eq]</th>
      <th>EF v3.1 no LT - climate change: land use and land use change no LT[kg CO2-Eq]</th>
      <th>EF v3.1 no LT - ecotoxicity: freshwater no LT[CTUe]</th>
      <th>EF v3.1 no LT - ecotoxicity: freshwater, inorganics no LT[CTUe]</th>
      <th>EF v3.1 no LT - ecotoxicity: freshwater, organics no LT[CTUe]</th>
      <th>EF v3.1 no LT - energy resources: non-renewable no LT[MJ, net calorific value]</th>
      <th>EF v3.1 no LT - eutrophication: freshwater no LT[kg P-Eq]</th>
      <th>...</th>
      <th>EF v3.1 no LT - human toxicity: non-carcinogenic no LT[CTUh]</th>
      <th>EF v3.1 no LT - human toxicity: non-carcinogenic, inorganics no LT[CTUh]</th>
      <th>EF v3.1 no LT - human toxicity: non-carcinogenic, organics no LT[CTUh]</th>
      <th>EF v3.1 no LT - ionising radiation: human health no LT[kBq U235-Eq]</th>
      <th>EF v3.1 no LT - land use no LT[dimensionless]</th>
      <th>EF v3.1 no LT - material resources: metals/minerals no LT[kg Sb-Eq]</th>
      <th>EF v3.1 no LT - ozone depletion no LT[kg CFC-11-Eq]</th>
      <th>EF v3.1 no LT - particulate matter formation no LT[disease incidence]</th>
      <th>EF v3.1 no LT - photochemical oxidant formation: human health no LT[kg NMVOC-Eq]</th>
      <th>EF v3.1 no LT - water use no LT[m3 world Eq deprived]</th>
    </tr>
    <tr>
      <th>phase</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>EoL</th>
      <td>1.8364e-05</td>
      <td>0.00460872</td>
      <td>0.000162334</td>
      <td>0.0044438</td>
      <td>2.58377e-06</td>
      <td>0.0394357</td>
      <td>0.0391911</td>
      <td>0.000244563</td>
      <td>0.018264</td>
      <td>7.21118e-08</td>
      <td>...</td>
      <td>1.07884e-10</td>
      <td>1.05661e-10</td>
      <td>2.22358e-12</td>
      <td>5.95903e-05</td>
      <td>0.00720573</td>
      <td>3.85104e-08</td>
      <td>1.261e-11</td>
      <td>1.02013e-10</td>
      <td>7.53947e-06</td>
      <td>0.00096846</td>
    </tr>
    <tr>
      <th>Prod_battery</th>
      <td>0.000390858</td>
      <td>0.0336888</td>
      <td>7.70744e-05</td>
      <td>0.0335543</td>
      <td>5.73913e-05</td>
      <td>0.404175</td>
      <td>0.399826</td>
      <td>0.0043496</td>
      <td>0.436399</td>
      <td>2.31366e-06</td>
      <td>...</td>
      <td>1.89105e-09</td>
      <td>1.78588e-09</td>
      <td>1.05171e-10</td>
      <td>0.00151375</td>
      <td>0.182989</td>
      <td>3.69494e-06</td>
      <td>5.14974e-10</td>
      <td>3.00117e-09</td>
      <td>0.000152762</td>
      <td>0.0454705</td>
    </tr>
    <tr>
      <th>Prod_other</th>
      <td>0.000289722</td>
      <td>0.0405296</td>
      <td>5.60628e-05</td>
      <td>0.0404067</td>
      <td>6.68587e-05</td>
      <td>0.526547</td>
      <td>0.514241</td>
      <td>0.0123062</td>
      <td>0.531071</td>
      <td>3.18285e-06</td>
      <td>...</td>
      <td>1.36931e-09</td>
      <td>1.2985e-09</td>
      <td>7.08058e-11</td>
      <td>0.00128621</td>
      <td>0.187092</td>
      <td>3.8546e-06</td>
      <td>9.0692e-10</td>
      <td>3.03632e-09</td>
      <td>0.000190797</td>
      <td>0.0154151</td>
    </tr>
    <tr>
      <th>Use</th>
      <td>0.0050454</td>
      <td>0.425935</td>
      <td>0.000377298</td>
      <td>0.425439</td>
      <td>0.000118338</td>
      <td>0.503423</td>
      <td>0.477192</td>
      <td>0.0262312</td>
      <td>5.47157</td>
      <td>2.8714e-06</td>
      <td>...</td>
      <td>1.60949e-09</td>
      <td>1.49451e-09</td>
      <td>1.14977e-10</td>
      <td>0.00127613</td>
      <td>0.438667</td>
      <td>1.65378e-06</td>
      <td>6.19937e-09</td>
      <td>1.0009e-08</td>
      <td>0.00734971</td>
      <td>0.0207948</td>
    </tr>
    <tr>
      <th>_other_</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>*sum*</th>
      <td>0.00574435</td>
      <td>0.504762</td>
      <td>0.000672769</td>
      <td>0.503844</td>
      <td>0.000245172</td>
      <td>1.47358</td>
      <td>1.43045</td>
      <td>0.0431316</td>
      <td>6.4573</td>
      <td>8.44003e-06</td>
      <td>...</td>
      <td>4.97774e-09</td>
      <td>4.68456e-09</td>
      <td>2.93177e-10</td>
      <td>0.00413568</td>
      <td>0.815954</td>
      <td>9.24182e-06</td>
      <td>7.63387e-09</td>
      <td>1.61485e-08</td>
      <td>0.00770081</td>
      <td>0.0826489</td>
    </tr>
  </tbody>
</table>
<p>6 rows × 25 columns</p>
</div>
<p>Now, reorder the lines to be more coherent, and plot this, normalized with total impact</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#reorder lines</span>
<span class="n">df_impacts</span> <span class="o">=</span> <span class="n">df_impacts</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="s1">&#39;Prod_battery&#39;</span><span class="p">,</span><span class="s1">&#39;Prod_other&#39;</span><span class="p">,</span><span class="s1">&#39;Use&#39;</span><span class="p">,</span><span class="s1">&#39;EoL&#39;</span><span class="p">,</span><span class="s1">&#39;_other_&#39;</span><span class="p">,</span><span class="s1">&#39;*sum*&#39;</span><span class="p">]]</span>
<span class="c1">#Rq : df_impacts = df_impacts.iloc[[1,2,3,0,4,5]] does the same thing</span>

<span class="c1">#normalize by the sum</span>
<span class="n">df_normalized</span> <span class="o">=</span> <span class="p">(</span><span class="n">df_impacts</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="n">df_impacts</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">T</span>

<span class="c1">#plot</span>
<span class="n">df_normalized</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">stacked</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;normalized impact&#39;</span><span class="p">)</span>
<span class="c1">#To move the legend : plt.legend(loc=&#39;lower center&#39;)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;Axes: xlabel=&#39;normalized impact&#39;&gt;
</pre></div>
</div>
<p><img alt="png" src="../_images/bw25_notebook_EV_171_1.png" /></p>
</section>
</section>
<section id="edit-model-parametrization">
<h2>5. Edit Model &amp; Parametrization<a class="headerlink" href="#edit-model-parametrization" title="Link to this heading">¶</a></h2>
<p>Since the model provided has errors, we need to modify the activities it contains.</p>
<section id="delete-exchanges">
<h3>5.1 Delete exchanges<a class="headerlink" href="#delete-exchanges" title="Link to this heading">¶</a></h3>
<p>First, we will delete the activity identified previously that leads to overestimated LCA impacts. To do so, again, we will use the functions from <code class="docutils literal notranslate"><span class="pre">lca_algebraic</span></code> to update the activities and their exchanges</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">lifecycle_act</span><span class="o">.</span><span class="n">deleteExchanges</span><span class="err">??</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[31mSignature:[39m lifecycle_act.deleteExchanges(name, single=[38;5;28;01mTrue[39;00m)
[31mSource:[39m   
    [38;5;28;01mdef[39;00m deleteExchanges(self, name, single=[38;5;28;01mTrue[39;00m):
        [33m&quot;&quot;&quot;Remove matching exchanges[39m

[33m        Parameters[39m
[33m        ----------[39m
[33m        name:[39m
[33m            Name of the exchange to delete. Can contain wildcards. See #getExchange for more details.[39m

[33m        single:[39m
[33m            If true (default) expect to only delete a single exchange[39m
[33m        &quot;&quot;&quot;[39m
        exchs = self.getExchange(name, single=single)
        [38;5;28;01mif[39;00m [38;5;28;01mnot[39;00m isinstance(exchs, list):
            exchs = [exchs]
        [38;5;28;01mif[39;00m len(exchs) == [32m0[39m:
            [38;5;28;01mraise[39;00m Exception([33m&quot;No exchange found for &#39;%s&#39;&quot;[39m % name)
        [38;5;28;01mfor[39;00m ex [38;5;28;01min[39;00m exchs:
            ex.delete()
            ex.save()
        self.save()
[31mFile:[39m      c:\users\vm256232\appdata\local\miniforge3\envs\bw25_tr\lib\site-packages\lca_algebraic\activity.py
[31mType:[39m      method
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">use_act</span><span class="o">.</span><span class="n">deleteExchanges</span><span class="p">(</span><span class="s1">&#39;diesel, burned in diesel-electric generating set, 18.5kW&#39;</span><span class="p">)</span>
<span class="n">agb</span><span class="o">.</span><span class="n">printAct</span><span class="p">(</span><span class="n">use_act</span><span class="p">)</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead tr th {
    text-align: left;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th colspan="3" halign="left">Use (1.000000 kilometer)</th>
    </tr>
    <tr>
      <th></th>
      <th>input</th>
      <th>amount</th>
      <th>unit</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>maintenance, passenger car, electric, without battery</th>
      <td>maintenance, passenger car, electric, without ...</td>
      <td>6.6667e-06</td>
      <td>unit</td>
    </tr>
  </tbody>
</table>
</div>
<p>We have remove the wrong exchange and updated successfully our activity</p>
</section>
<section id="add-exchanges">
<h3>5.2 Add exchanges<a class="headerlink" href="#add-exchanges" title="Link to this heading">¶</a></h3>
<p>There is no electricity in Use</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># search for it in ecoinvent</span>
<span class="p">[</span><span class="n">act</span> <span class="k">for</span> <span class="n">act</span> <span class="ow">in</span> <span class="n">db_ei</span> <span class="k">if</span> <span class="s1">&#39;electricity, low voltage&#39;</span> <span class="ow">in</span> <span class="n">act</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="s1">&#39;FR&#39;</span> <span class="ow">in</span> <span class="n">act</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">]]</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[&#39;electricity, low voltage, residual mix&#39; (kilowatt hour, FR, None),
 &#39;market for electricity, low voltage&#39; (kilowatt hour, FR, None)]
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">elec_act</span> <span class="o">=</span> <span class="n">agb</span><span class="o">.</span><span class="n">findActivity</span><span class="p">(</span><span class="s1">&#39;market for electricity, low voltage&#39;</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;FR&#39;</span><span class="p">,</span> <span class="n">db_name</span> <span class="o">=</span> <span class="s1">&#39;ecoinvent-3.11-cutoff&#39;</span><span class="p">)</span>
<span class="n">agb</span><span class="o">.</span><span class="n">printAct</span><span class="p">(</span><span class="n">elec_act</span><span class="p">)</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead tr th {
    text-align: left;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th colspan="3" halign="left">market for electricity, low voltage[FR] (1.000000 kilowatt hour)</th>
    </tr>
    <tr>
      <th></th>
      <th>input</th>
      <th>amount</th>
      <th>unit</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Sulfur hexafluoride</th>
      <td>Sulfur hexafluoride</td>
      <td>4.03e-10</td>
      <td>kilogram</td>
    </tr>
    <tr>
      <th>distribution network, electricity, low voltage</th>
      <td>market for distribution network, electricity, ...</td>
      <td>8.74049e-08</td>
      <td>kilometer</td>
    </tr>
    <tr>
      <th>electricity, low voltage</th>
      <td>electricity production, photovoltaic, 570kWp o...</td>
      <td>0.0132134</td>
      <td>kilowatt hour</td>
    </tr>
    <tr>
      <th>electricity, low voltage#1</th>
      <td>electricity voltage transformation from medium...</td>
      <td>0.948586</td>
      <td>kilowatt hour</td>
    </tr>
    <tr>
      <th>electricity, low voltage#2</th>
      <td>electricity production, photovoltaic, 3kWp sla...</td>
      <td>0.0211754</td>
      <td>kilowatt hour</td>
    </tr>
    <tr>
      <th>electricity, low voltage#3</th>
      <td>market for electricity, low voltage[FR]</td>
      <td>0.0314778</td>
      <td>kilowatt hour</td>
    </tr>
    <tr>
      <th>electricity, low voltage#4</th>
      <td>electricity production, photovoltaic, 3kWp sla...</td>
      <td>0.017025</td>
      <td>kilowatt hour</td>
    </tr>
    <tr>
      <th>sulfur hexafluoride, liquid</th>
      <td>market for sulfur hexafluoride, liquid[RER]</td>
      <td>4.03e-10</td>
      <td>kilogram</td>
    </tr>
  </tbody>
</table>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Update exchanges by their name </span>
<span class="n">use_act</span><span class="o">.</span><span class="n">addExchanges</span><span class="p">({</span>
    <span class="n">elec_act</span> <span class="p">:</span> <span class="mf">0.163</span>
<span class="p">})</span> 
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">agb</span><span class="o">.</span><span class="n">printAct</span><span class="p">(</span><span class="n">use_act</span><span class="p">)</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead tr th {
    text-align: left;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th colspan="3" halign="left">Use (1.000000 kilometer)</th>
    </tr>
    <tr>
      <th></th>
      <th>input</th>
      <th>amount</th>
      <th>unit</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>maintenance, passenger car, electric, without battery</th>
      <td>maintenance, passenger car, electric, without ...</td>
      <td>6.6667e-06</td>
      <td>unit</td>
    </tr>
    <tr>
      <th>market for electricity, low voltage</th>
      <td>market for electricity, low voltage[FR]</td>
      <td>0.163</td>
      <td>kilowatt hour</td>
    </tr>
  </tbody>
</table>
</div>
<p>Now, if you want, you can execute again the code for contribution analysis, and see what has changed</p>
</section>
<section id="add-formulas">
<h3>5.3 Add formulas<a class="headerlink" href="#add-formulas" title="Link to this heading">¶</a></h3>
<p>Parametrization is really useful to adress the variability in LCAs. It consists simply in replacing static amount (ex: 1271 kg production of seeds + cotton) by a formulas that depends on variable parameters that has their own distribution (ex: $production_{cotton} = \lambda * 2 +5$ where $\lambda$ is a normal distribution)</p>
<p>This makes possible to compute a range and even a distrbution of LCA results</p>
<section id="symbolic-calculus">
<h4>Symbolic calculus<a class="headerlink" href="#symbolic-calculus" title="Link to this heading">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">lca_algebraic</span></code> has been specifically designed to handle parametrization in LCA using a <strong>symbolic expression that can be manipulated</strong>, instead of a <strong>numeric value</strong>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sympy</span><span class="w"> </span><span class="kn">import</span> <span class="n">symbols</span> 

<span class="c1"># create sympy symbol</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">symbols</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>

<span class="c1"># Expressions are not directly evaluated </span>
<span class="n">f</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">4</span> 
<span class="n">f</span>
</pre></div>
</div>
<p>$\displaystyle 2 a + 4$</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># symbols can be replaced by values afterwards </span>
<span class="n">f</span><span class="o">.</span><span class="n">subs</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
<p>$\displaystyle 10$</p>
</section>
<section id="define-input-parameters">
<h4>Define input parameters<a class="headerlink" href="#define-input-parameters" title="Link to this heading">¶</a></h4>
<p>Before implementing parameters, this is better to clean up the whole foreground model each time.<br />
Any persistent state is prone to errors.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">agb</span><span class="o">.</span><span class="n">resetParams</span><span class="p">()</span>
</pre></div>
</div>
<p>We start with a parameter to model the electricity consumption of the vehicle, named “efficiency”, in kWh/km</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example of &#39;float&#39; parameters</span>
<span class="n">efficiency</span> <span class="o">=</span> <span class="n">agb</span><span class="o">.</span><span class="n">newFloatParam</span><span class="p">(</span> <span class="c1">#there are several type of parameters (Float, Discrete, Enum, Boolean...) check the documentation to know more</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;efficiency&#39;</span><span class="p">,</span> <span class="c1">#name of the parameter. I recommend writing the same name as the variable, to avoid any confusion</span>
    <span class="n">default</span><span class="o">=</span><span class="mf">0.163</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>  <span class="n">distrib</span><span class="o">=</span><span class="n">agb</span><span class="o">.</span><span class="n">DistributionType</span><span class="o">.</span><span class="n">TRIANGLE</span><span class="p">,</span> <span class="c1"># Distribution type, triangle by default but many exists (Normal, Lognormal...)</span>
    <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;kWh/km&#39;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;electricity consumption of the car, in kWh/km&quot;</span><span class="p">,</span>
    <span class="n">dbname</span><span class="o">=</span><span class="s1">&#39;tuto_EV-code&#39;</span> <span class="c1">#if no database is given, the parameter is linked to the whole project instead of a specific database</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>Create the other parameters (values and distribution are dummy)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mass_EV</span> <span class="o">=</span> <span class="n">agb</span><span class="o">.</span><span class="n">newFloatParam</span><span class="p">(</span> <span class="c1">#there are several type of parameters (Float, Discrete, Enum, Boolean...) check the documentation to know more</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;mass_EV&#39;</span><span class="p">,</span> <span class="c1">#name of the parameter</span>
    <span class="n">default</span><span class="o">=</span><span class="mi">1500</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">2000</span><span class="p">,</span>  <span class="n">distrib</span><span class="o">=</span><span class="n">agb</span><span class="o">.</span><span class="n">DistributionType</span><span class="o">.</span><span class="n">TRIANGLE</span><span class="p">,</span> <span class="c1"># Dummy values</span>
    <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;kg&#39;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s1">&#39;mass of the vehicle&#39;</span><span class="p">,</span>
    <span class="n">dbname</span><span class="o">=</span><span class="s1">&#39;tuto_EV-code&#39;</span>
    <span class="p">)</span>

<span class="n">total_distance</span> <span class="o">=</span> <span class="n">agb</span><span class="o">.</span><span class="n">newFloatParam</span><span class="p">(</span> <span class="c1">#there are several type of parameters (Float, Discrete, Enum, Boolean...) check the documentation to know more</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;total_distance&#39;</span><span class="p">,</span> <span class="c1">#name of the parameter</span>
    <span class="n">default</span><span class="o">=</span><span class="mi">200000</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">100000</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">400000</span><span class="p">,</span>  <span class="n">distrib</span><span class="o">=</span><span class="n">agb</span><span class="o">.</span><span class="n">DistributionType</span><span class="o">.</span><span class="n">TRIANGLE</span><span class="p">,</span> <span class="c1"># Dummy values</span>
    <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;km&#39;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s1">&#39;distance driven by the vehicle during its whole lifecycle&#39;</span><span class="p">,</span>
    <span class="n">dbname</span><span class="o">=</span><span class="s1">&#39;tuto_EV-code&#39;</span>
    <span class="p">)</span>

<span class="n">passenger_number</span> <span class="o">=</span> <span class="n">agb</span><span class="o">.</span><span class="n">newFloatParam</span><span class="p">(</span> <span class="c1">#there are several type of parameters (Float, Discrete, Enum, Boolean...) check the documentation to know more</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;passenger_number&#39;</span><span class="p">,</span> <span class="c1">#name of the parameter</span>
    <span class="n">default</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">distrib</span><span class="o">=</span><span class="n">agb</span><span class="o">.</span><span class="n">DistributionType</span><span class="o">.</span><span class="n">TRIANGLE</span><span class="p">,</span> <span class="c1"># Dummy values</span>
    <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s1">&#39;number of passengers inside the car&#39;</span><span class="p">,</span>
    <span class="n">dbname</span><span class="o">=</span><span class="s1">&#39;tuto_EV-code&#39;</span>
    <span class="p">)</span>

</pre></div>
</div>
<p>To see the list of parameters, almost the same command as for the databases:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">agb</span><span class="o">.</span><span class="n">list_parameters</span><span class="p">()</span>
</pre></div>
</div>
<table>
<thead>
<tr><th>group  </th><th>name            </th><th>label           </th><th style="text-align: right;">   default</th><th style="text-align: right;">     min</th><th style="text-align: right;">     max</th><th>std  </th><th>distrib  </th><th>unit  </th><th>db          </th></tr>
</thead>
<tbody>
<tr><td>       </td><td>efficiency      </td><td>efficiency      </td><td style="text-align: right;">     0.163</td><td style="text-align: right;">     0.1</td><td style="text-align: right;">     0.2</td><td>     </td><td>triangle </td><td>kWh/km</td><td>tuto_EV-code</td></tr>
<tr><td>       </td><td>mass_EV         </td><td>mass EV         </td><td style="text-align: right;">  1500    </td><td style="text-align: right;">  1000  </td><td style="text-align: right;">  2000  </td><td>     </td><td>triangle </td><td>kg    </td><td>tuto_EV-code</td></tr>
<tr><td>       </td><td>passenger_number</td><td>passenger number</td><td style="text-align: right;">     2    </td><td style="text-align: right;">     1  </td><td style="text-align: right;">     4  </td><td>     </td><td>triangle </td><td>      </td><td>tuto_EV-code</td></tr>
<tr><td>       </td><td>total_distance  </td><td>total distance  </td><td style="text-align: right;">200000    </td><td style="text-align: right;">100000  </td><td style="text-align: right;">400000  </td><td>     </td><td>triangle </td><td>km    </td><td>tuto_EV-code</td></tr>
</tbody>
</table>
</section>
<section id="parameterize-the-inventory">
<h4>Parameterize the inventory<a class="headerlink" href="#parameterize-the-inventory" title="Link to this heading">¶</a></h4>
<p>Firstly, we need to update the final production in the lifecycle activity with the mass of the vehicle and total distance parameters</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">lifecycle_act</span><span class="o">.</span><span class="n">updateExchanges</span><span class="p">({</span> <span class="c1"># 1 kilometer</span>
    <span class="s2">&quot;Production&quot;</span><span class="p">:</span> <span class="n">mass_EV</span><span class="o">/</span><span class="n">total_distance</span><span class="p">,</span>
    <span class="s2">&quot;End of Life&quot;</span><span class="p">:</span> <span class="o">-</span><span class="n">mass_EV</span><span class="o">/</span><span class="n">total_distance</span>
<span class="p">})</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">agb</span><span class="o">.</span><span class="n">printAct</span><span class="p">(</span><span class="n">lifecycle_act</span><span class="p">)</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead tr th {
    text-align: left;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th colspan="3" halign="left">Lifecycle (1.000000 kilometer)</th>
    </tr>
    <tr>
      <th></th>
      <th>input</th>
      <th>amount</th>
      <th>unit</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>End of Life</th>
      <td>End of Life{FG}</td>
      <td>-mass_EV/total_distance</td>
      <td>kilogram</td>
    </tr>
    <tr>
      <th>Production</th>
      <td>Production{FG}</td>
      <td>mass_EV/total_distance</td>
      <td>kilogram</td>
    </tr>
    <tr>
      <th>Use</th>
      <td>Use{FG}</td>
      <td>1</td>
      <td>kilometer</td>
    </tr>
  </tbody>
</table>
</div>
<p>Now, we will update the use phase:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">agb</span><span class="o">.</span><span class="n">printAct</span><span class="p">(</span><span class="n">use_act</span><span class="p">)</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead tr th {
    text-align: left;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th colspan="3" halign="left">Use (1.000000 kilometer)</th>
    </tr>
    <tr>
      <th></th>
      <th>input</th>
      <th>amount</th>
      <th>unit</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>maintenance, passenger car, electric, without battery</th>
      <td>maintenance, passenger car, electric, without ...</td>
      <td>6.6667e-06</td>
      <td>unit</td>
    </tr>
    <tr>
      <th>market for electricity, low voltage</th>
      <td>market for electricity, low voltage[FR]</td>
      <td>0.163</td>
      <td>kilowatt hour</td>
    </tr>
  </tbody>
</table>
</div>
<p>Here the electricity mix is the french one, but we want also to parametrize this. First we create a new parameter</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">elec_mix</span> <span class="o">=</span> <span class="n">agb</span><span class="o">.</span><span class="n">newEnumParam</span><span class="p">(</span> <span class="c1">#we define a Enum parameters, that can take discrete values</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;elec_mix&#39;</span><span class="p">,</span> <span class="c1">#name of the parameter</span>
    <span class="n">default</span><span class="o">=</span><span class="s1">&#39;FR&#39;</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;FR&#39;</span><span class="p">,</span><span class="s1">&#39;US&#39;</span><span class="p">,</span><span class="s1">&#39;CN&#39;</span><span class="p">],</span> <span class="c1">#the values this parameter can take</span>
    <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s1">&#39;location of the electricity mix used&#39;</span><span class="p">,</span>
    <span class="n">dbname</span><span class="o">=</span><span class="s1">&#39;tuto_EV-code&#39;</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>Then we create a new activity based on this parameter</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fr_elec</span> <span class="o">=</span> <span class="p">[</span><span class="n">act</span> <span class="k">for</span> <span class="n">act</span> <span class="ow">in</span> <span class="n">bd</span><span class="o">.</span><span class="n">Database</span><span class="p">(</span><span class="s2">&quot;ecoinvent-3.11-cutoff&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="s2">&quot;market for electricity, low voltage&quot;</span> <span class="ow">in</span> <span class="n">act</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="s1">&#39;FR&#39;</span> <span class="ow">in</span> <span class="n">act</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">]][</span><span class="mi">0</span><span class="p">]</span>
<span class="n">eu_elec</span> <span class="o">=</span> <span class="p">[</span><span class="n">act</span> <span class="k">for</span> <span class="n">act</span> <span class="ow">in</span> <span class="n">bd</span><span class="o">.</span><span class="n">Database</span><span class="p">(</span><span class="s2">&quot;ecoinvent-3.11-cutoff&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="s2">&quot;market group for electricity, low voltage&quot;</span> <span class="ow">in</span> <span class="n">act</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="s1">&#39;ENTSO-E&#39;</span> <span class="ow">in</span> <span class="n">act</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">]][</span><span class="mi">0</span><span class="p">]</span>
<span class="n">us_elec</span> <span class="o">=</span> <span class="p">[</span><span class="n">act</span> <span class="k">for</span> <span class="n">act</span> <span class="ow">in</span> <span class="n">bd</span><span class="o">.</span><span class="n">Database</span><span class="p">(</span><span class="s2">&quot;ecoinvent-3.11-cutoff&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="s2">&quot;market group for electricity, low voltage&quot;</span> <span class="ow">in</span> <span class="n">act</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="s1">&#39;US&#39;</span> <span class="ow">in</span> <span class="n">act</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">]][</span><span class="mi">0</span><span class="p">]</span>
<span class="n">cn_elec</span> <span class="o">=</span> <span class="p">[</span><span class="n">act</span> <span class="k">for</span> <span class="n">act</span> <span class="ow">in</span> <span class="n">bd</span><span class="o">.</span><span class="n">Database</span><span class="p">(</span><span class="s2">&quot;ecoinvent-3.11-cutoff&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="s2">&quot;market group for electricity, low voltage&quot;</span> <span class="ow">in</span> <span class="n">act</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="s1">&#39;CN&#39;</span> <span class="ow">in</span> <span class="n">act</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">]][</span><span class="mi">0</span><span class="p">]</span>
<span class="n">glo_elec</span> <span class="o">=</span> <span class="p">[</span><span class="n">act</span> <span class="k">for</span> <span class="n">act</span> <span class="ow">in</span> <span class="n">bd</span><span class="o">.</span><span class="n">Database</span><span class="p">(</span><span class="s2">&quot;ecoinvent-3.11-cutoff&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="s2">&quot;market group for electricity, low voltage&quot;</span> <span class="ow">in</span> <span class="n">act</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="s1">&#39;GLO&#39;</span> <span class="ow">in</span> <span class="n">act</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">]][</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># get the activities corresponding to the different locations</span>
<span class="n">fr_elec</span> <span class="o">=</span> <span class="n">agb</span><span class="o">.</span><span class="n">findActivity</span><span class="p">(</span><span class="s1">&#39;market for electricity, low voltage&#39;</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;FR&#39;</span><span class="p">,</span> <span class="n">db_name</span><span class="o">=</span><span class="s2">&quot;ecoinvent-3.11-cutoff&quot;</span><span class="p">)</span>
<span class="n">eu_elec</span> <span class="o">=</span> <span class="n">agb</span><span class="o">.</span><span class="n">findActivity</span><span class="p">(</span><span class="s1">&#39;market group for electricity, low voltage&#39;</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;US&#39;</span><span class="p">,</span> <span class="n">db_name</span><span class="o">=</span><span class="s2">&quot;ecoinvent-3.11-cutoff&quot;</span><span class="p">)</span>
<span class="n">cn_elec</span> <span class="o">=</span> <span class="n">agb</span><span class="o">.</span><span class="n">findActivity</span><span class="p">(</span><span class="s1">&#39;market group for electricity, low voltage&#39;</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;CN&#39;</span><span class="p">,</span> <span class="n">db_name</span><span class="o">=</span><span class="s2">&quot;ecoinvent-3.11-cutoff&quot;</span><span class="p">)</span>

<span class="c1"># create a new switch activity</span>
<span class="n">elec_switch_act</span> <span class="o">=</span> <span class="n">agb</span><span class="o">.</span><span class="n">newSwitchAct</span><span class="p">(</span><span class="s1">&#39;tuto_EV-code&#39;</span><span class="p">,</span><span class="s1">&#39;electricity&#39;</span><span class="p">,</span>
                                   <span class="n">elec_mix</span><span class="p">,</span>
                                   <span class="p">{</span>
                                       <span class="s1">&#39;FR&#39;</span> <span class="p">:</span> <span class="n">fr_elec</span><span class="p">,</span>
                                       <span class="s1">&#39;US&#39;</span> <span class="p">:</span> <span class="n">us_elec</span><span class="p">,</span>
                                       <span class="s1">&#39;CN&#39;</span> <span class="p">:</span> <span class="n">cn_elec</span><span class="p">,</span>
                                   <span class="p">})</span>
</pre></div>
</div>
<p>Remove the static exchange and add the new one</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">use_act</span><span class="o">.</span><span class="n">deleteExchanges</span><span class="p">(</span><span class="s2">&quot;market for electricity, low voltage&quot;</span><span class="p">)</span>
<span class="n">use_act</span><span class="o">.</span><span class="n">addExchanges</span><span class="p">({</span>
    <span class="n">elec_switch_act</span> <span class="p">:</span> <span class="n">efficiency</span> <span class="c1">#we parametrize also the amount of the exchange</span>
<span class="p">})</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">agb</span><span class="o">.</span><span class="n">printAct</span><span class="p">(</span><span class="n">use_act</span><span class="p">)</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead tr th {
    text-align: left;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th colspan="3" halign="left">Use (1.000000 kilometer)</th>
    </tr>
    <tr>
      <th></th>
      <th>input</th>
      <th>amount</th>
      <th>unit</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>electricity</th>
      <td>electricity{FG}</td>
      <td>efficiency</td>
      <td>kilowatt hour</td>
    </tr>
    <tr>
      <th>maintenance, passenger car, electric, without battery</th>
      <td>maintenance, passenger car, electric, without ...</td>
      <td>6.6667e-06</td>
      <td>unit</td>
    </tr>
  </tbody>
</table>
</div>
<p>Now our inventory is parameterized and ready to be assessed !</p>
</section>
</section>
</section>
<section id="defining-scenarios">
<h2>6. Defining scenarios<a class="headerlink" href="#defining-scenarios" title="Link to this heading">¶</a></h2>
<p>Modify manually parameters, export results and compare them can be very fastidious if you have lots of parameters and scenarios. A way to be more efficient is to use Scenarios.</p>
<p>Scenarios are a set of values for each parameters.
In Brightway, you just need to specify the parameter value when computing the impacts</p>
<div class="alert alert-block alert-danger">
<p>Let’s <strong>compare the following scenarios</strong>:</p>
<ol class="arabic simple">
<li><p>lighter vehicle</p></li>
<li><p>Use in China</p></li>
<li><p>300 000 km , 2 persons in the car instead of one</p></li>
<li><p>Whatever you want</p></li>
</ol>
<p><strong>QUESTION</strong> = Which scenario has the lower impacts ?</p>
<p>First lets compute the impacts with the baseline (or reference) values</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">scenario0</span> <span class="o">=</span> <span class="n">agb</span><span class="o">.</span><span class="n">compute_impacts</span><span class="p">(</span><span class="n">lifecycle_act</span><span class="p">,</span><span class="n">list_methods</span><span class="p">)</span>
<span class="n">scenario0</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[INFO] Db changed recently, clearing cache expr
[INFO] Db changed recently, clearing cache lcia
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>EF v3.1 no LT - acidification no LT[mol H+-Eq]</th>
      <th>EF v3.1 no LT - climate change no LT[kg CO2-Eq]</th>
      <th>EF v3.1 no LT - climate change: biogenic no LT[kg CO2-Eq]</th>
      <th>EF v3.1 no LT - climate change: fossil no LT[kg CO2-Eq]</th>
      <th>EF v3.1 no LT - climate change: land use and land use change no LT[kg CO2-Eq]</th>
      <th>EF v3.1 no LT - ecotoxicity: freshwater no LT[CTUe]</th>
      <th>EF v3.1 no LT - ecotoxicity: freshwater, inorganics no LT[CTUe]</th>
      <th>EF v3.1 no LT - ecotoxicity: freshwater, organics no LT[CTUe]</th>
      <th>EF v3.1 no LT - energy resources: non-renewable no LT[MJ, net calorific value]</th>
      <th>EF v3.1 no LT - eutrophication: freshwater no LT[kg P-Eq]</th>
      <th>...</th>
      <th>EF v3.1 no LT - human toxicity: non-carcinogenic no LT[CTUh]</th>
      <th>EF v3.1 no LT - human toxicity: non-carcinogenic, inorganics no LT[CTUh]</th>
      <th>EF v3.1 no LT - human toxicity: non-carcinogenic, organics no LT[CTUh]</th>
      <th>EF v3.1 no LT - ionising radiation: human health no LT[kBq U235-Eq]</th>
      <th>EF v3.1 no LT - land use no LT[dimensionless]</th>
      <th>EF v3.1 no LT - material resources: metals/minerals no LT[kg Sb-Eq]</th>
      <th>EF v3.1 no LT - ozone depletion no LT[kg CFC-11-Eq]</th>
      <th>EF v3.1 no LT - particulate matter formation no LT[disease incidence]</th>
      <th>EF v3.1 no LT - photochemical oxidant formation: human health no LT[kg NMVOC-Eq]</th>
      <th>EF v3.1 no LT - water use no LT[m3 world Eq deprived]</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Lifecycle</th>
      <td>0.000835449</td>
      <td>0.0997959</td>
      <td>0.000329043</td>
      <td>0.099317</td>
      <td>0.000149833</td>
      <td>1.09</td>
      <td>1.07156</td>
      <td>0.0184377</td>
      <td>2.98352</td>
      <td>6.44308e-06</td>
      <td>...</td>
      <td>4.04216e-09</td>
      <td>3.82708e-09</td>
      <td>2.15086e-10</td>
      <td>0.021714</td>
      <td>0.502014</td>
      <td>8.33517e-06</td>
      <td>1.95118e-09</td>
      <td>7.00629e-09</td>
      <td>0.000862996</td>
      <td>0.0878409</td>
    </tr>
  </tbody>
</table>
<p>1 rows × 25 columns</p>
</div>
<section id="scenario-1">
<h3>6.1 Scenario 1<a class="headerlink" href="#scenario-1" title="Link to this heading">¶</a></h3>
<p><strong>Scenario 1</strong> means we want to compare our Renault tech E5 with a lighter vehicle : BMW i3, with mass 1300 kg and efficiency 130 Wh/km</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">agb</span><span class="o">.</span><span class="n">printAct</span><span class="p">(</span><span class="n">lifecycle_act</span><span class="p">,</span> <span class="n">mass_EV</span><span class="o">=</span><span class="mi">1300</span><span class="p">,</span> <span class="n">efficiency</span><span class="o">=</span><span class="mf">0.130</span><span class="p">)</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead tr th {
    text-align: left;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th colspan="3" halign="left">Lifecycle (1.000000 kilometer)</th>
    </tr>
    <tr>
      <th></th>
      <th>input</th>
      <th>amount</th>
      <th>unit</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>End of Life</th>
      <td>End of Life{FG}</td>
      <td>-1300/total_distance</td>
      <td>kilogram</td>
    </tr>
    <tr>
      <th>Production</th>
      <td>Production{FG}</td>
      <td>1300/total_distance</td>
      <td>kilogram</td>
    </tr>
    <tr>
      <th>Use</th>
      <td>Use{FG}</td>
      <td>1</td>
      <td>kilometer</td>
    </tr>
  </tbody>
</table>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">agb</span><span class="o">.</span><span class="n">printAct</span><span class="p">(</span><span class="n">use_act</span><span class="p">,</span> <span class="n">mass_EV</span><span class="o">=</span><span class="mi">1300</span><span class="p">,</span> <span class="n">efficiency</span><span class="o">=</span><span class="mf">0.130</span><span class="p">)</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead tr th {
    text-align: left;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th colspan="3" halign="left">Use (1.000000 kilometer)</th>
    </tr>
    <tr>
      <th></th>
      <th>input</th>
      <th>amount</th>
      <th>unit</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>electricity</th>
      <td>electricity{FG}</td>
      <td>0.130000000000000</td>
      <td>kilowatt hour</td>
    </tr>
    <tr>
      <th>maintenance, passenger car, electric, without battery</th>
      <td>maintenance, passenger car, electric, without ...</td>
      <td>6.6667e-06</td>
      <td>unit</td>
    </tr>
  </tbody>
</table>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">scenario1</span> <span class="o">=</span> <span class="n">agb</span><span class="o">.</span><span class="n">compute_impacts</span><span class="p">(</span><span class="n">lifecycle_act</span><span class="p">,</span> <span class="n">list_methods</span><span class="p">,</span> <span class="n">mass_EV</span><span class="o">=</span><span class="mi">1300</span><span class="p">,</span> <span class="n">efficiency</span><span class="o">=</span><span class="mf">0.130</span><span class="p">)</span>
<span class="n">scenario1</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>EF v3.1 no LT - acidification no LT[mol H+-Eq]</th>
      <th>EF v3.1 no LT - climate change no LT[kg CO2-Eq]</th>
      <th>EF v3.1 no LT - climate change: biogenic no LT[kg CO2-Eq]</th>
      <th>EF v3.1 no LT - climate change: fossil no LT[kg CO2-Eq]</th>
      <th>EF v3.1 no LT - climate change: land use and land use change no LT[kg CO2-Eq]</th>
      <th>EF v3.1 no LT - ecotoxicity: freshwater no LT[CTUe]</th>
      <th>EF v3.1 no LT - ecotoxicity: freshwater, inorganics no LT[CTUe]</th>
      <th>EF v3.1 no LT - ecotoxicity: freshwater, organics no LT[CTUe]</th>
      <th>EF v3.1 no LT - energy resources: non-renewable no LT[MJ, net calorific value]</th>
      <th>EF v3.1 no LT - eutrophication: freshwater no LT[kg P-Eq]</th>
      <th>...</th>
      <th>EF v3.1 no LT - human toxicity: non-carcinogenic no LT[CTUh]</th>
      <th>EF v3.1 no LT - human toxicity: non-carcinogenic, inorganics no LT[CTUh]</th>
      <th>EF v3.1 no LT - human toxicity: non-carcinogenic, organics no LT[CTUh]</th>
      <th>EF v3.1 no LT - ionising radiation: human health no LT[kBq U235-Eq]</th>
      <th>EF v3.1 no LT - land use no LT[dimensionless]</th>
      <th>EF v3.1 no LT - material resources: metals/minerals no LT[kg Sb-Eq]</th>
      <th>EF v3.1 no LT - ozone depletion no LT[kg CFC-11-Eq]</th>
      <th>EF v3.1 no LT - particulate matter formation no LT[disease incidence]</th>
      <th>EF v3.1 no LT - photochemical oxidant formation: human health no LT[kg NMVOC-Eq]</th>
      <th>EF v3.1 no LT - water use no LT[m3 world Eq deprived]</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Lifecycle</th>
      <td>0.000720347</td>
      <td>0.0863823</td>
      <td>0.000284393</td>
      <td>0.085968</td>
      <td>0.000129969</td>
      <td>0.943263</td>
      <td>0.927256</td>
      <td>0.0160071</td>
      <td>2.47286</td>
      <td>5.57164e-06</td>
      <td>...</td>
      <td>3.4699e-09</td>
      <td>3.28525e-09</td>
      <td>1.84651e-10</td>
      <td>0.0175589</td>
      <td>0.430279</td>
      <td>7.18327e-06</td>
      <td>1.67849e-09</td>
      <td>6.07933e-09</td>
      <td>0.000804796</td>
      <td>0.0747912</td>
    </tr>
  </tbody>
</table>
<p>1 rows × 25 columns</p>
</div>
</section>
<section id="scenario-2">
<h3>6.2 Scenario 2<a class="headerlink" href="#scenario-2" title="Link to this heading">¶</a></h3>
<p><strong>Scenario 2</strong> means we want the electricity mix used during the use phase to be the chinese one</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">agb</span><span class="o">.</span><span class="n">printAct</span><span class="p">(</span><span class="n">elec_switch_act</span><span class="p">,</span> <span class="n">elec_mix</span><span class="o">=</span><span class="s1">&#39;CN&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead tr th {
    text-align: left;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th colspan="3" halign="left">electricity (1.000000 kilowatt hour)</th>
    </tr>
    <tr>
      <th></th>
      <th>input</th>
      <th>amount</th>
      <th>unit</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>market for electricity, low voltage</th>
      <td>market for electricity, low voltage[FR]</td>
      <td>0.0</td>
      <td>kilowatt hour</td>
    </tr>
    <tr>
      <th>market group for electricity, low voltage</th>
      <td>market group for electricity, low voltage[US]</td>
      <td>0.0</td>
      <td>kilowatt hour</td>
    </tr>
    <tr>
      <th>market group for electricity, low voltage#1</th>
      <td>market group for electricity, low voltage[CN]</td>
      <td>1.00000000000000</td>
      <td>kilowatt hour</td>
    </tr>
  </tbody>
</table>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">scenario2</span> <span class="o">=</span> <span class="n">agb</span><span class="o">.</span><span class="n">compute_impacts</span><span class="p">(</span><span class="n">lifecycle_act</span><span class="p">,</span> <span class="n">list_methods</span><span class="p">,</span> <span class="n">elec_mix</span><span class="o">=</span><span class="s1">&#39;CN&#39;</span><span class="p">)</span>
<span class="n">scenario2</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;total_distance&#39; was missing, replacing by default value : 200000
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>EF v3.1 no LT - acidification no LT[mol H+-Eq]</th>
      <th>EF v3.1 no LT - climate change no LT[kg CO2-Eq]</th>
      <th>EF v3.1 no LT - climate change: biogenic no LT[kg CO2-Eq]</th>
      <th>EF v3.1 no LT - climate change: fossil no LT[kg CO2-Eq]</th>
      <th>EF v3.1 no LT - climate change: land use and land use change no LT[kg CO2-Eq]</th>
      <th>EF v3.1 no LT - ecotoxicity: freshwater no LT[CTUe]</th>
      <th>EF v3.1 no LT - ecotoxicity: freshwater, inorganics no LT[CTUe]</th>
      <th>EF v3.1 no LT - ecotoxicity: freshwater, organics no LT[CTUe]</th>
      <th>EF v3.1 no LT - energy resources: non-renewable no LT[MJ, net calorific value]</th>
      <th>EF v3.1 no LT - eutrophication: freshwater no LT[kg P-Eq]</th>
      <th>...</th>
      <th>EF v3.1 no LT - human toxicity: non-carcinogenic no LT[CTUh]</th>
      <th>EF v3.1 no LT - human toxicity: non-carcinogenic, inorganics no LT[CTUh]</th>
      <th>EF v3.1 no LT - human toxicity: non-carcinogenic, organics no LT[CTUh]</th>
      <th>EF v3.1 no LT - ionising radiation: human health no LT[kBq U235-Eq]</th>
      <th>EF v3.1 no LT - land use no LT[dimensionless]</th>
      <th>EF v3.1 no LT - material resources: metals/minerals no LT[kg Sb-Eq]</th>
      <th>EF v3.1 no LT - ozone depletion no LT[kg CFC-11-Eq]</th>
      <th>EF v3.1 no LT - particulate matter formation no LT[disease incidence]</th>
      <th>EF v3.1 no LT - photochemical oxidant formation: human health no LT[kg NMVOC-Eq]</th>
      <th>EF v3.1 no LT - water use no LT[m3 world Eq deprived]</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Lifecycle</th>
      <td>0.00157419</td>
      <td>0.224719</td>
      <td>0.000327831</td>
      <td>0.224195</td>
      <td>0.000195974</td>
      <td>1.44653</td>
      <td>1.42714</td>
      <td>0.0193938</td>
      <td>2.60036</td>
      <td>8.90192e-06</td>
      <td>...</td>
      <td>4.66864e-09</td>
      <td>4.44114e-09</td>
      <td>2.27504e-10</td>
      <td>0.00523727</td>
      <td>0.755909</td>
      <td>8.30851e-06</td>
      <td>1.92554e-09</td>
      <td>1.79087e-08</td>
      <td>0.00129554</td>
      <td>0.0830475</td>
    </tr>
  </tbody>
</table>
<p>1 rows × 25 columns</p>
</div>
</section>
<section id="scenario-3">
<h3>6.3 Scenario 3<a class="headerlink" href="#scenario-3" title="Link to this heading">¶</a></h3>
<p>Scenario 3 = 300000 km, 2 persons in the car instead of 1.</p>
<p>300 000 km :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">agb</span><span class="o">.</span><span class="n">printAct</span><span class="p">(</span><span class="n">lifecycle_act</span><span class="p">,</span> <span class="n">total_distance</span><span class="o">=</span><span class="mi">300000</span><span class="p">)</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead tr th {
    text-align: left;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th colspan="3" halign="left">Lifecycle (1.000000 kilometer)</th>
    </tr>
    <tr>
      <th></th>
      <th>input</th>
      <th>amount</th>
      <th>unit</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>End of Life</th>
      <td>End of Life{FG}</td>
      <td>-mass_EV/300000</td>
      <td>kilogram</td>
    </tr>
    <tr>
      <th>Production</th>
      <td>Production{FG}</td>
      <td>mass_EV/300000</td>
      <td>kilogram</td>
    </tr>
    <tr>
      <th>Use</th>
      <td>Use{FG}</td>
      <td>1</td>
      <td>kilometer</td>
    </tr>
  </tbody>
</table>
</div>
<p>To see the effect of having 2 persons in the car instead of 1, we can change the functional unit of the activity. It was impacts/km, now we can divide also by the number of persons in the car, here is how we do that</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">scenario3</span> <span class="o">=</span> <span class="n">agb</span><span class="o">.</span><span class="n">compute_impacts</span><span class="p">(</span><span class="n">lifecycle_act</span><span class="p">,</span> <span class="n">list_methods</span><span class="p">,</span> <span class="n">functional_unit</span> <span class="o">=</span> <span class="n">passenger_number</span><span class="p">,</span> <span class="n">passenger_number</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">total_distance</span> <span class="o">=</span> <span class="mi">300000</span><span class="p">)</span>
<span class="n">scenario3</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>EF v3.1 no LT - acidification no LT[mol H+-Eq]</th>
      <th>EF v3.1 no LT - climate change no LT[kg CO2-Eq]</th>
      <th>EF v3.1 no LT - climate change: biogenic no LT[kg CO2-Eq]</th>
      <th>EF v3.1 no LT - climate change: fossil no LT[kg CO2-Eq]</th>
      <th>EF v3.1 no LT - climate change: land use and land use change no LT[kg CO2-Eq]</th>
      <th>EF v3.1 no LT - ecotoxicity: freshwater no LT[CTUe]</th>
      <th>EF v3.1 no LT - ecotoxicity: freshwater, inorganics no LT[CTUe]</th>
      <th>EF v3.1 no LT - ecotoxicity: freshwater, organics no LT[CTUe]</th>
      <th>EF v3.1 no LT - energy resources: non-renewable no LT[MJ, net calorific value]</th>
      <th>EF v3.1 no LT - eutrophication: freshwater no LT[kg P-Eq]</th>
      <th>...</th>
      <th>EF v3.1 no LT - human toxicity: non-carcinogenic no LT[CTUh]</th>
      <th>EF v3.1 no LT - human toxicity: non-carcinogenic, inorganics no LT[CTUh]</th>
      <th>EF v3.1 no LT - human toxicity: non-carcinogenic, organics no LT[CTUh]</th>
      <th>EF v3.1 no LT - ionising radiation: human health no LT[kBq U235-Eq]</th>
      <th>EF v3.1 no LT - land use no LT[dimensionless]</th>
      <th>EF v3.1 no LT - material resources: metals/minerals no LT[kg Sb-Eq]</th>
      <th>EF v3.1 no LT - ozone depletion no LT[kg CFC-11-Eq]</th>
      <th>EF v3.1 no LT - particulate matter formation no LT[disease incidence]</th>
      <th>EF v3.1 no LT - photochemical oxidant formation: human health no LT[kg NMVOC-Eq]</th>
      <th>EF v3.1 no LT - water use no LT[m3 world Eq deprived]</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Lifecycle</th>
      <td>0.000301234</td>
      <td>0.0367601</td>
      <td>0.000115276</td>
      <td>0.036591</td>
      <td>5.37775e-05</td>
      <td>0.383305</td>
      <td>0.376903</td>
      <td>0.0064021</td>
      <td>1.32747</td>
      <td>2.29344e-06</td>
      <td>...</td>
      <td>1.45971e-09</td>
      <td>1.38186e-09</td>
      <td>7.78432e-11</td>
      <td>0.0103804</td>
      <td>0.188126</td>
      <td>2.90291e-06</td>
      <td>7.36504e-10</td>
      <td>2.47989e-09</td>
      <td>0.000372981</td>
      <td>0.0336114</td>
    </tr>
  </tbody>
</table>
<p>1 rows × 25 columns</p>
</div>
</section>
<section id="posttreatment-visualization-to-compare-scenarios">
<h3>6.4 PostTreatment: visualization to compare scenarios<a class="headerlink" href="#posttreatment-visualization-to-compare-scenarios" title="Link to this heading">¶</a></h3>
<p>To compare scenario results, we will build nice visualization using <code class="docutils literal notranslate"><span class="pre">pandas</span></code> package for generating nice Tables (so-called Dataframe) and <code class="docutils literal notranslate"><span class="pre">seabron</span></code> package with <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> package for plotting nice graphs with pretty colors</p>
<p>Let’s gather all results in one unique Dataframe:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df_results_scenarios</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span>
    <span class="p">[</span><span class="n">scenario0</span><span class="p">,</span> <span class="n">scenario1</span><span class="p">,</span> <span class="n">scenario2</span><span class="p">,</span> <span class="n">scenario3</span><span class="p">],</span>
    <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
<span class="n">df_results_scenarios</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>EF v3.1 no LT - acidification no LT[mol H+-Eq]</th>
      <th>EF v3.1 no LT - climate change no LT[kg CO2-Eq]</th>
      <th>EF v3.1 no LT - climate change: biogenic no LT[kg CO2-Eq]</th>
      <th>EF v3.1 no LT - climate change: fossil no LT[kg CO2-Eq]</th>
      <th>EF v3.1 no LT - climate change: land use and land use change no LT[kg CO2-Eq]</th>
      <th>EF v3.1 no LT - ecotoxicity: freshwater no LT[CTUe]</th>
      <th>EF v3.1 no LT - ecotoxicity: freshwater, inorganics no LT[CTUe]</th>
      <th>EF v3.1 no LT - ecotoxicity: freshwater, organics no LT[CTUe]</th>
      <th>EF v3.1 no LT - energy resources: non-renewable no LT[MJ, net calorific value]</th>
      <th>EF v3.1 no LT - eutrophication: freshwater no LT[kg P-Eq]</th>
      <th>...</th>
      <th>EF v3.1 no LT - human toxicity: non-carcinogenic no LT[CTUh]</th>
      <th>EF v3.1 no LT - human toxicity: non-carcinogenic, inorganics no LT[CTUh]</th>
      <th>EF v3.1 no LT - human toxicity: non-carcinogenic, organics no LT[CTUh]</th>
      <th>EF v3.1 no LT - ionising radiation: human health no LT[kBq U235-Eq]</th>
      <th>EF v3.1 no LT - land use no LT[dimensionless]</th>
      <th>EF v3.1 no LT - material resources: metals/minerals no LT[kg Sb-Eq]</th>
      <th>EF v3.1 no LT - ozone depletion no LT[kg CFC-11-Eq]</th>
      <th>EF v3.1 no LT - particulate matter formation no LT[disease incidence]</th>
      <th>EF v3.1 no LT - photochemical oxidant formation: human health no LT[kg NMVOC-Eq]</th>
      <th>EF v3.1 no LT - water use no LT[m3 world Eq deprived]</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.000835449</td>
      <td>0.0997959</td>
      <td>0.000329043</td>
      <td>0.099317</td>
      <td>0.000149833</td>
      <td>1.09</td>
      <td>1.07156</td>
      <td>0.0184377</td>
      <td>2.98352</td>
      <td>6.44308e-06</td>
      <td>...</td>
      <td>4.04216e-09</td>
      <td>3.82708e-09</td>
      <td>2.15086e-10</td>
      <td>0.021714</td>
      <td>0.502014</td>
      <td>8.33517e-06</td>
      <td>1.95118e-09</td>
      <td>7.00629e-09</td>
      <td>0.000862996</td>
      <td>0.0878409</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.000720347</td>
      <td>0.0863823</td>
      <td>0.000284393</td>
      <td>0.085968</td>
      <td>0.000129969</td>
      <td>0.943263</td>
      <td>0.927256</td>
      <td>0.0160071</td>
      <td>2.47286</td>
      <td>5.57164e-06</td>
      <td>...</td>
      <td>3.4699e-09</td>
      <td>3.28525e-09</td>
      <td>1.84651e-10</td>
      <td>0.0175589</td>
      <td>0.430279</td>
      <td>7.18327e-06</td>
      <td>1.67849e-09</td>
      <td>6.07933e-09</td>
      <td>0.000804796</td>
      <td>0.0747912</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.00157419</td>
      <td>0.224719</td>
      <td>0.000327831</td>
      <td>0.224195</td>
      <td>0.000195974</td>
      <td>1.44653</td>
      <td>1.42714</td>
      <td>0.0193938</td>
      <td>2.60036</td>
      <td>8.90192e-06</td>
      <td>...</td>
      <td>4.66864e-09</td>
      <td>4.44114e-09</td>
      <td>2.27504e-10</td>
      <td>0.00523727</td>
      <td>0.755909</td>
      <td>8.30851e-06</td>
      <td>1.92554e-09</td>
      <td>1.79087e-08</td>
      <td>0.00129554</td>
      <td>0.0830475</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.000301234</td>
      <td>0.0367601</td>
      <td>0.000115276</td>
      <td>0.036591</td>
      <td>5.37775e-05</td>
      <td>0.383305</td>
      <td>0.376903</td>
      <td>0.0064021</td>
      <td>1.32747</td>
      <td>2.29344e-06</td>
      <td>...</td>
      <td>1.45971e-09</td>
      <td>1.38186e-09</td>
      <td>7.78432e-11</td>
      <td>0.0103804</td>
      <td>0.188126</td>
      <td>2.90291e-06</td>
      <td>7.36504e-10</td>
      <td>2.47989e-09</td>
      <td>0.000372981</td>
      <td>0.0336114</td>
    </tr>
  </tbody>
</table>
<p>4 rows × 25 columns</p>
</div>
<p>To plot all impact categories, one interesting solution is in heatmaps, by comparing the relative increase compared to one reference activity in each impact categories. Here is the syntax</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#we normalize by the results of the reference activity</span>
<span class="n">df_norm</span> <span class="o">=</span> <span class="p">(</span><span class="n">df_results_scenarios</span> <span class="o">/</span> <span class="n">df_results_scenarios</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="c1">#normalizaton with the results from the activity wind</span>
<span class="n">df_norm</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>EF v3.1 no LT - acidification no LT[mol H+-Eq]</th>
      <th>EF v3.1 no LT - climate change no LT[kg CO2-Eq]</th>
      <th>EF v3.1 no LT - climate change: biogenic no LT[kg CO2-Eq]</th>
      <th>EF v3.1 no LT - climate change: fossil no LT[kg CO2-Eq]</th>
      <th>EF v3.1 no LT - climate change: land use and land use change no LT[kg CO2-Eq]</th>
      <th>EF v3.1 no LT - ecotoxicity: freshwater no LT[CTUe]</th>
      <th>EF v3.1 no LT - ecotoxicity: freshwater, inorganics no LT[CTUe]</th>
      <th>EF v3.1 no LT - ecotoxicity: freshwater, organics no LT[CTUe]</th>
      <th>EF v3.1 no LT - energy resources: non-renewable no LT[MJ, net calorific value]</th>
      <th>EF v3.1 no LT - eutrophication: freshwater no LT[kg P-Eq]</th>
      <th>...</th>
      <th>EF v3.1 no LT - human toxicity: non-carcinogenic no LT[CTUh]</th>
      <th>EF v3.1 no LT - human toxicity: non-carcinogenic, inorganics no LT[CTUh]</th>
      <th>EF v3.1 no LT - human toxicity: non-carcinogenic, organics no LT[CTUh]</th>
      <th>EF v3.1 no LT - ionising radiation: human health no LT[kBq U235-Eq]</th>
      <th>EF v3.1 no LT - land use no LT[dimensionless]</th>
      <th>EF v3.1 no LT - material resources: metals/minerals no LT[kg Sb-Eq]</th>
      <th>EF v3.1 no LT - ozone depletion no LT[kg CFC-11-Eq]</th>
      <th>EF v3.1 no LT - particulate matter formation no LT[disease incidence]</th>
      <th>EF v3.1 no LT - photochemical oxidant formation: human health no LT[kg NMVOC-Eq]</th>
      <th>EF v3.1 no LT - water use no LT[m3 world Eq deprived]</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>...</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.862228</td>
      <td>0.86559</td>
      <td>0.864304</td>
      <td>0.865591</td>
      <td>0.867426</td>
      <td>0.865382</td>
      <td>0.865334</td>
      <td>0.868173</td>
      <td>0.828841</td>
      <td>0.864748</td>
      <td>...</td>
      <td>0.858427</td>
      <td>0.858423</td>
      <td>0.858497</td>
      <td>0.808644</td>
      <td>0.857107</td>
      <td>0.861802</td>
      <td>0.860245</td>
      <td>0.867696</td>
      <td>0.932561</td>
      <td>0.85144</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1.88425</td>
      <td>2.25178</td>
      <td>0.996316</td>
      <td>2.25737</td>
      <td>1.30795</td>
      <td>1.3271</td>
      <td>1.33184</td>
      <td>1.05186</td>
      <td>0.871576</td>
      <td>1.38163</td>
      <td>...</td>
      <td>1.15499</td>
      <td>1.16045</td>
      <td>1.05773</td>
      <td>0.241194</td>
      <td>1.50575</td>
      <td>0.996801</td>
      <td>0.986859</td>
      <td>2.55609</td>
      <td>1.50121</td>
      <td>0.94543</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.360565</td>
      <td>0.368353</td>
      <td>0.350338</td>
      <td>0.368427</td>
      <td>0.358917</td>
      <td>0.351657</td>
      <td>0.351733</td>
      <td>0.347229</td>
      <td>0.444934</td>
      <td>0.355953</td>
      <td>...</td>
      <td>0.36112</td>
      <td>0.361076</td>
      <td>0.361916</td>
      <td>0.478051</td>
      <td>0.374742</td>
      <td>0.348273</td>
      <td>0.377467</td>
      <td>0.353953</td>
      <td>0.432194</td>
      <td>0.38264</td>
    </tr>
  </tbody>
</table>
<p>4 rows × 25 columns</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set_style</span><span class="p">(</span><span class="s2">&quot;darkgrid&quot;</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span>
    <span class="n">df_norm</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> 
    <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="c1">#display numerical values</span>
    <span class="n">cbar</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="c1">#color bar appears</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">,</span> 
    <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;RdYlGn_r&#39;</span><span class="p">,</span> <span class="c1">#green for small values, red for higher</span>
    <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span> 
    <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> 
    <span class="n">xticklabels</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;.2e&quot;</span><span class="p">,</span>  <span class="c1"># Format numbers with two decimal places</span>
    <span class="n">annot_kws</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="mi">13</span><span class="p">},</span>  <span class="c1"># Adjust font size for annotations,</span>
    <span class="n">vmin</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mf">1.7</span> <span class="c1">#to set the color scale</span>
<span class="p">)</span>

<span class="c1"># plt.savefig(&quot;./outputs/&quot; + &quot;heatmap_example.png&quot;, dpi=600) #to save the plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p><img alt="png" src="../_images/bw25_notebook_EV_241_0.png" /></p>
<p>another way is a bar plot (maybe too many categories here)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ax</span> <span class="o">=</span> <span class="n">df_norm</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">barh</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.legend.Legend at 0x25c734abb00&gt;
</pre></div>
</div>
<p><img alt="png" src="../_images/bw25_notebook_EV_243_1.png" /></p>
</section>
<section id="exercise">
<h3>6.5 Exercise<a class="headerlink" href="#exercise" title="Link to this heading">¶</a></h3>
<ol class="arabic simple">
<li><p>Create a new parameter, “chemistry”, that can take 2 values : “LFP” or “NMC811”. The default in our model is NMC811.</p></li>
<li><p>Copy the ecoinvent activity for LFP battery into our foreground database (you can search on the internet for this function)</p></li>
<li><p>Create a new switch activity that can point to either battery technology, depending on the chemistry parameter value</p></li>
<li><p>Link this activity to our model</p></li>
<li><p>Make a scenario analysis with a nice plot</p></li>
</ol>
</section>
</section>
<section id="variation-analysis">
<h2>7. Variation analysis<a class="headerlink" href="#variation-analysis" title="Link to this heading">¶</a></h2>
<section id="influence-of-foreground-parameters-sensitivity-analysis">
<h3>7.1. Influence of foreground parameters : sensitivity analysis<a class="headerlink" href="#influence-of-foreground-parameters-sensitivity-analysis" title="Link to this heading">¶</a></h3>
<section id="parameter-1-impact-category-with-contribution-analysis">
<h4>1 parameter, 1 impact category, with contribution analysis<a class="headerlink" href="#parameter-1-impact-category-with-contribution-analysis" title="Link to this heading">¶</a></h4>
<p>Now, we will assess the impact of total distance on the GWP of the car, per km. Again, we make use of the “axis” functionality of compute_impacts.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Total_distances</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">1e5</span><span class="p">,</span><span class="mf">1e6</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span> <span class="c1">#set the range of the parameter we want to compute</span>

<span class="n">list_dfs</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1">#initialize results</span>

<span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">Total_distances</span><span class="p">:</span> <span class="c1">#loop over the total_distances</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">agb</span><span class="o">.</span><span class="n">compute_impacts</span><span class="p">(</span><span class="n">lifecycle_act</span><span class="p">,[</span><span class="n">CC</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;phase&#39;</span><span class="p">,</span><span class="n">total_distance</span><span class="o">=</span><span class="n">d</span><span class="p">)</span> <span class="c1">#compute the impacts, per phase, for given total_distance d</span>
    <span class="n">list_dfs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">res</span><span class="p">)</span> <span class="c1">#save in the list</span>

<span class="n">df_impacts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">list_dfs</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="c1">#concatenate</span>
<span class="n">df_impacts</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">Total_distances</span> <span class="c1">#rename the columns with the distance value</span>
<span class="n">df_impacts</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>c:\Users\VM256232\AppData\Local\miniforge3\envs\bw25_tr\Lib\site-packages\lca_algebraic\lca.py:945: SymPyDeprecationWarning:



non-Expr objects in a Matrix is deprecated. Matrix represents
a mathematical matrix. To represent a container of non-numeric
entities, Use a list of lists, TableForm, NumPy array, or some
other data structure instead.

See https://docs.sympy.org/latest/explanation/active-deprecations.html#deprecated-non-expr-in-matrix
for details.

This has been deprecated since SymPy version 1.9. It
will be removed in a future version of SymPy.


c:\Users\VM256232\AppData\Local\miniforge3\envs\bw25_tr\Lib\site-packages\sympy\polys\domains\expressionrawdomain.py:54: SymPyDeprecationWarning:



Using non-Expr arguments in Add is deprecated (in this case, one of
the arguments has type &#39;AxisDict&#39;).

If you really did intend to use a multiplication or addition operation with
this object, use the * or + operator instead.

See https://docs.sympy.org/latest/explanation/active-deprecations.html#non-expr-args-deprecated
for details.

This has been deprecated since SymPy version 1.7. It
will be removed in a future version of SymPy.


[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>100,000</th>
      <th>200,000</th>
      <th>300,000</th>
      <th>400,000</th>
      <th>500,000</th>
      <th>600,000</th>
      <th>700,000</th>
      <th>800,000</th>
      <th>900,000</th>
      <th>1e+06</th>
    </tr>
    <tr>
      <th>phase</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>EoL</th>
      <td>0.00921744</td>
      <td>0.00460872</td>
      <td>0.00307248</td>
      <td>0.00230436</td>
      <td>0.00184349</td>
      <td>0.00153624</td>
      <td>0.00131678</td>
      <td>0.00115218</td>
      <td>0.00102416</td>
      <td>0.000921744</td>
    </tr>
    <tr>
      <th>Prod_battery</th>
      <td>0.0673775</td>
      <td>0.0336888</td>
      <td>0.0224592</td>
      <td>0.0168444</td>
      <td>0.0134755</td>
      <td>0.0112296</td>
      <td>0.00962536</td>
      <td>0.00842219</td>
      <td>0.00748639</td>
      <td>0.00673775</td>
    </tr>
    <tr>
      <th>Prod_other</th>
      <td>0.0810593</td>
      <td>0.0405296</td>
      <td>0.0270198</td>
      <td>0.0202648</td>
      <td>0.0162119</td>
      <td>0.0135099</td>
      <td>0.0115799</td>
      <td>0.0101324</td>
      <td>0.00900659</td>
      <td>0.00810593</td>
    </tr>
    <tr>
      <th>Use</th>
      <td>0.00662829</td>
      <td>0.00662829</td>
      <td>0.00662829</td>
      <td>0.00662829</td>
      <td>0.00662829</td>
      <td>0.00662829</td>
      <td>0.00662829</td>
      <td>0.00662829</td>
      <td>0.00662829</td>
      <td>0.00662829</td>
    </tr>
    <tr>
      <th>_other_</th>
      <td>0.0143405</td>
      <td>0.0143405</td>
      <td>0.0143405</td>
      <td>0.0143405</td>
      <td>0.0143405</td>
      <td>0.0143405</td>
      <td>0.0143405</td>
      <td>0.0143405</td>
      <td>0.0143405</td>
      <td>0.0143405</td>
    </tr>
    <tr>
      <th>*sum*</th>
      <td>0.178623</td>
      <td>0.0997959</td>
      <td>0.0735202</td>
      <td>0.0603823</td>
      <td>0.0524996</td>
      <td>0.0472445</td>
      <td>0.0434908</td>
      <td>0.0406756</td>
      <td>0.0384859</td>
      <td>0.0367342</td>
    </tr>
  </tbody>
</table>
</div>
<p>Reorganize and plot</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df_impacts</span> <span class="o">=</span> <span class="n">df_impacts</span><span class="o">.</span><span class="n">iloc</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">]]</span> <span class="c1">#select and reorder the lines we want to plot</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">df_impacts</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">area</span><span class="p">()</span> <span class="c1">#plot an stacked area chart</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;total_distance (km)&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;GWP [kgCO2-eq / km]&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Text(0, 0.5, &#39;GWP [kgCO2-eq / km]&#39;)
</pre></div>
</div>
<p><img alt="png" src="../_images/bw25_notebook_EV_252_1.png" /></p>
</section>
<section id="parameter-n-impact-categories">
<h4>1 parameter, N impact categories<a class="headerlink" href="#parameter-n-impact-categories" title="Link to this heading">¶</a></h4>
<p>We can directly provide a list of parameters values in compute_impacts</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df_impacts</span> <span class="o">=</span> <span class="n">agb</span><span class="o">.</span><span class="n">compute_impacts</span><span class="p">(</span><span class="n">lifecycle_act</span><span class="p">,</span><span class="n">list_methods</span><span class="p">,</span><span class="n">total_distance</span><span class="o">=</span><span class="n">Total_distances</span><span class="p">)</span>
<span class="n">df_impacts</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">Total_distances</span> <span class="c1">#reindex to store total_distance values</span>
<span class="n">df_impacts</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;mass_EV&#39; was missing, replacing by default value : 1500
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;efficiency&#39; was missing, replacing by default value : 0.163
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
[INFO] Required param &#39;elec_mix&#39; was missing, replacing by default value : FR
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>EF v3.1 no LT - acidification no LT[mol H+-Eq]</th>
      <th>EF v3.1 no LT - climate change no LT[kg CO2-Eq]</th>
      <th>EF v3.1 no LT - climate change: biogenic no LT[kg CO2-Eq]</th>
      <th>EF v3.1 no LT - climate change: fossil no LT[kg CO2-Eq]</th>
      <th>EF v3.1 no LT - climate change: land use and land use change no LT[kg CO2-Eq]</th>
      <th>EF v3.1 no LT - ecotoxicity: freshwater no LT[CTUe]</th>
      <th>EF v3.1 no LT - ecotoxicity: freshwater, inorganics no LT[CTUe]</th>
      <th>EF v3.1 no LT - ecotoxicity: freshwater, organics no LT[CTUe]</th>
      <th>EF v3.1 no LT - energy resources: non-renewable no LT[MJ, net calorific value]</th>
      <th>EF v3.1 no LT - eutrophication: freshwater no LT[kg P-Eq]</th>
      <th>...</th>
      <th>EF v3.1 no LT - human toxicity: non-carcinogenic no LT[CTUh]</th>
      <th>EF v3.1 no LT - human toxicity: non-carcinogenic, inorganics no LT[CTUh]</th>
      <th>EF v3.1 no LT - human toxicity: non-carcinogenic, organics no LT[CTUh]</th>
      <th>EF v3.1 no LT - ionising radiation: human health no LT[kBq U235-Eq]</th>
      <th>EF v3.1 no LT - land use no LT[dimensionless]</th>
      <th>EF v3.1 no LT - material resources: metals/minerals no LT[kg Sb-Eq]</th>
      <th>EF v3.1 no LT - ozone depletion no LT[kg CFC-11-Eq]</th>
      <th>EF v3.1 no LT - particulate matter formation no LT[disease incidence]</th>
      <th>EF v3.1 no LT - photochemical oxidant formation: human health no LT[kg NMVOC-Eq]</th>
      <th>EF v3.1 no LT - water use no LT[m3 world Eq deprived]</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>100,000</th>
      <td>0.00153439</td>
      <td>0.178623</td>
      <td>0.000624514</td>
      <td>0.177722</td>
      <td>0.000276667</td>
      <td>2.06015</td>
      <td>2.02482</td>
      <td>0.035338</td>
      <td>3.96925</td>
      <td>1.20117e-05</td>
      <td>...</td>
      <td>7.41041e-09</td>
      <td>7.01712e-09</td>
      <td>3.93287e-10</td>
      <td>0.0245735</td>
      <td>0.8793</td>
      <td>1.59232e-05</td>
      <td>3.38568e-09</td>
      <td>1.31458e-08</td>
      <td>0.00121409</td>
      <td>0.149695</td>
    </tr>
    <tr>
      <th>200,000</th>
      <td>0.000835449</td>
      <td>0.0997959</td>
      <td>0.000329043</td>
      <td>0.099317</td>
      <td>0.000149833</td>
      <td>1.09</td>
      <td>1.07156</td>
      <td>0.0184377</td>
      <td>2.98352</td>
      <td>6.44308e-06</td>
      <td>...</td>
      <td>4.04216e-09</td>
      <td>3.82708e-09</td>
      <td>2.15086e-10</td>
      <td>0.021714</td>
      <td>0.502014</td>
      <td>8.33517e-06</td>
      <td>1.95118e-09</td>
      <td>7.00629e-09</td>
      <td>0.000862996</td>
      <td>0.0878409</td>
    </tr>
    <tr>
      <th>300,000</th>
      <td>0.000602467</td>
      <td>0.0735202</td>
      <td>0.000230553</td>
      <td>0.0731821</td>
      <td>0.000107555</td>
      <td>0.76661</td>
      <td>0.753805</td>
      <td>0.0128042</td>
      <td>2.65494</td>
      <td>4.58687e-06</td>
      <td>...</td>
      <td>2.91941e-09</td>
      <td>2.76373e-09</td>
      <td>1.55686e-10</td>
      <td>0.0207608</td>
      <td>0.376251</td>
      <td>5.80582e-06</td>
      <td>1.47301e-09</td>
      <td>4.95979e-09</td>
      <td>0.000745963</td>
      <td>0.0672229</td>
    </tr>
    <tr>
      <th>400,000</th>
      <td>0.000485977</td>
      <td>0.0603823</td>
      <td>0.000181308</td>
      <td>0.0601146</td>
      <td>8.64161e-05</td>
      <td>0.604916</td>
      <td>0.594929</td>
      <td>0.00998746</td>
      <td>2.49065</td>
      <td>3.65877e-06</td>
      <td>...</td>
      <td>2.35804e-09</td>
      <td>2.23205e-09</td>
      <td>1.25986e-10</td>
      <td>0.0202842</td>
      <td>0.31337</td>
      <td>4.54115e-06</td>
      <td>1.23392e-09</td>
      <td>3.93654e-09</td>
      <td>0.000687446</td>
      <td>0.0569139</td>
    </tr>
    <tr>
      <th>500,000</th>
      <td>0.000416082</td>
      <td>0.0524996</td>
      <td>0.00015176</td>
      <td>0.0522741</td>
      <td>7.37327e-05</td>
      <td>0.507901</td>
      <td>0.499603</td>
      <td>0.00829742</td>
      <td>2.39208</td>
      <td>3.1019e-06</td>
      <td>...</td>
      <td>2.02121e-09</td>
      <td>1.91305e-09</td>
      <td>1.08166e-10</td>
      <td>0.0199982</td>
      <td>0.275642</td>
      <td>3.78234e-06</td>
      <td>1.09047e-09</td>
      <td>3.32259e-09</td>
      <td>0.000652337</td>
      <td>0.0507285</td>
    </tr>
    <tr>
      <th>600,000</th>
      <td>0.000369486</td>
      <td>0.0472445</td>
      <td>0.000132062</td>
      <td>0.0470472</td>
      <td>6.52771e-05</td>
      <td>0.443223</td>
      <td>0.436053</td>
      <td>0.00717073</td>
      <td>2.32636</td>
      <td>2.73066e-06</td>
      <td>...</td>
      <td>1.79666e-09</td>
      <td>1.70038e-09</td>
      <td>9.62863e-11</td>
      <td>0.0198076</td>
      <td>0.250489</td>
      <td>3.27647e-06</td>
      <td>9.9484e-10</td>
      <td>2.91329e-09</td>
      <td>0.00062893</td>
      <td>0.0466049</td>
    </tr>
    <tr>
      <th>700,000</th>
      <td>0.000336203</td>
      <td>0.0434908</td>
      <td>0.000117992</td>
      <td>0.0433136</td>
      <td>5.92374e-05</td>
      <td>0.397025</td>
      <td>0.390659</td>
      <td>0.00636595</td>
      <td>2.27942</td>
      <td>2.46549e-06</td>
      <td>...</td>
      <td>1.63627e-09</td>
      <td>1.54847e-09</td>
      <td>8.78005e-11</td>
      <td>0.0196714</td>
      <td>0.232523</td>
      <td>2.91514e-06</td>
      <td>9.26531e-10</td>
      <td>2.62093e-09</td>
      <td>0.000612211</td>
      <td>0.0436594</td>
    </tr>
    <tr>
      <th>800,000</th>
      <td>0.000311241</td>
      <td>0.0406756</td>
      <td>0.00010744</td>
      <td>0.0405134</td>
      <td>5.47077e-05</td>
      <td>0.362377</td>
      <td>0.356615</td>
      <td>0.00576237</td>
      <td>2.24422</td>
      <td>2.26661e-06</td>
      <td>...</td>
      <td>1.51598e-09</td>
      <td>1.43454e-09</td>
      <td>8.14362e-11</td>
      <td>0.0195693</td>
      <td>0.219049</td>
      <td>2.64414e-06</td>
      <td>8.75298e-10</td>
      <td>2.40166e-09</td>
      <td>0.000599672</td>
      <td>0.0414503</td>
    </tr>
    <tr>
      <th>900,000</th>
      <td>0.000291826</td>
      <td>0.0384859</td>
      <td>9.92323e-05</td>
      <td>0.0383355</td>
      <td>5.11845e-05</td>
      <td>0.335428</td>
      <td>0.330135</td>
      <td>0.00529291</td>
      <td>2.21683</td>
      <td>2.11193e-06</td>
      <td>...</td>
      <td>1.42241e-09</td>
      <td>1.34593e-09</td>
      <td>7.64862e-11</td>
      <td>0.0194899</td>
      <td>0.208568</td>
      <td>2.43336e-06</td>
      <td>8.35451e-10</td>
      <td>2.23112e-09</td>
      <td>0.000589919</td>
      <td>0.0397322</td>
    </tr>
    <tr>
      <th>1e+06</th>
      <td>0.000276294</td>
      <td>0.0367342</td>
      <td>9.26662e-05</td>
      <td>0.0365932</td>
      <td>4.8366e-05</td>
      <td>0.313869</td>
      <td>0.308952</td>
      <td>0.00491735</td>
      <td>2.19493</td>
      <td>1.98818e-06</td>
      <td>...</td>
      <td>1.34756e-09</td>
      <td>1.27504e-09</td>
      <td>7.25262e-11</td>
      <td>0.0194263</td>
      <td>0.200184</td>
      <td>2.26473e-06</td>
      <td>8.03573e-10</td>
      <td>2.09469e-09</td>
      <td>0.000582117</td>
      <td>0.0383576</td>
    </tr>
  </tbody>
</table>
<p>10 rows × 25 columns</p>
</div>
<p>Now let’s normalize, so that we can have all the impact categories in one graph</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ax</span> <span class="o">=</span> <span class="p">(</span><span class="n">df_impacts</span><span class="o">/</span><span class="n">df_impacts</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mf">2e5</span><span class="p">])</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span> <span class="c1">#normalize by the reference value : 200000 km, and plot</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">)</span> <span class="c1">#put the legend on the left, otherwise we can&#39;t see the graph</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;total_distance (km)&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;normalized impact&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Text(0, 0.5, &#39;normalized impact&#39;)
</pre></div>
</div>
<p><img alt="png" src="../_images/bw25_notebook_EV_257_1.png" /></p>
</section>
<section id="n-parameters-n-impact-categories">
<h4>N parameters, N impact categories<a class="headerlink" href="#n-parameters-n-impact-categories" title="Link to this heading">¶</a></h4>
<p>Now, we will try to answer the question : what is the most influent parameter of our model ?</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">agb</span><span class="o">.</span><span class="n">list_parameters</span><span class="p">()</span>
</pre></div>
</div>
<table>
<thead>
<tr><th>group  </th><th>name            </th><th>label           </th><th>default  </th><th style="text-align: right;">     min</th><th style="text-align: right;">     max</th><th>std  </th><th>distrib  </th><th>unit  </th><th>db          </th></tr>
</thead>
<tbody>
<tr><td>       </td><td>efficiency      </td><td>efficiency      </td><td>0.163    </td><td style="text-align: right;">     0.1</td><td style="text-align: right;">     0.2</td><td>     </td><td>triangle </td><td>kWh/km</td><td>tuto_EV-code</td></tr>
<tr><td>       </td><td>elec_mix        </td><td>elec mix        </td><td>FR       </td><td style="text-align: right;">        </td><td style="text-align: right;">        </td><td>     </td><td>         </td><td>      </td><td>tuto_EV-code</td></tr>
<tr><td>       </td><td>mass_EV         </td><td>mass EV         </td><td>1500     </td><td style="text-align: right;">  1000  </td><td style="text-align: right;">  2000  </td><td>     </td><td>triangle </td><td>kg    </td><td>tuto_EV-code</td></tr>
<tr><td>       </td><td>passenger_number</td><td>passenger number</td><td>2        </td><td style="text-align: right;">     1  </td><td style="text-align: right;">     4  </td><td>     </td><td>triangle </td><td>      </td><td>tuto_EV-code</td></tr>
<tr><td>       </td><td>total_distance  </td><td>total distance  </td><td>200000   </td><td style="text-align: right;">100000  </td><td style="text-align: right;">400000  </td><td>     </td><td>triangle </td><td>km    </td><td>tuto_EV-code</td></tr>
</tbody>
</table>
<p>For this, lca_algebraic uses Global Sensitivity Analysis (GSA). It leverages fast computation of monte-carlo approches.</p>
<p>We compute Sobol indices. they represent the ratio between the variance due to a given parameter and the total variance.</p>
<p>Sobol indices can vary between 0 and 1. 0 meaning a parameter has no influence on the results, 1 meaning that it is the only one that has an influence.</p>
<p>lca_algebraic computes the variance based on the distribution we provided for every parameter</p>
<p>Show sobol indices</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">agb</span><span class="o">.</span><span class="n">incer_stochastic_matrix</span><span class="p">(</span><span class="n">lifecycle_act</span><span class="p">,</span><span class="n">list_methods</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Generating samples ...
Transforming samples ...
Processing Sobol indices ...
Processing sobol for (&#39;ecoinvent-3.11&#39;, &#39;EF v3.1 no LT&#39;, &#39;acidification no LT&#39;, &#39;accumulated exceedance (AE) no LT&#39;)


c:\Users\VM256232\AppData\Local\miniforge3\envs\bw25_tr\Lib\site-packages\SALib\util\__init__.py:274: FutureWarning:

unique with argument that is not not a Series, Index, ExtensionArray, or np.ndarray is deprecated and will raise in a future version.



Processing sobol for (&#39;ecoinvent-3.11&#39;, &#39;EF v3.1 no LT&#39;, &#39;climate change no LT&#39;, &#39;global warming potential (GWP100) no LT&#39;)
Processing sobol for (&#39;ecoinvent-3.11&#39;, &#39;EF v3.1 no LT&#39;, &#39;climate change: biogenic no LT&#39;, &#39;global warming potential (GWP100) no LT&#39;)
Processing sobol for (&#39;ecoinvent-3.11&#39;, &#39;EF v3.1 no LT&#39;, &#39;climate change: fossil no LT&#39;, &#39;global warming potential (GWP100) no LT&#39;)
Processing sobol for (&#39;ecoinvent-3.11&#39;, &#39;EF v3.1 no LT&#39;, &#39;climate change: land use and land use change no LT&#39;, &#39;global warming potential (GWP100) no LT&#39;)
Processing sobol for (&#39;ecoinvent-3.11&#39;, &#39;EF v3.1 no LT&#39;, &#39;ecotoxicity: freshwater no LT&#39;, &#39;comparative toxic unit for ecosystems (CTUe) no LT&#39;)
Processing sobol for (&#39;ecoinvent-3.11&#39;, &#39;EF v3.1 no LT&#39;, &#39;ecotoxicity: freshwater, inorganics no LT&#39;, &#39;comparative toxic unit for ecosystems (CTUe) no LT&#39;)
Processing sobol for (&#39;ecoinvent-3.11&#39;, &#39;EF v3.1 no LT&#39;, &#39;ecotoxicity: freshwater, organics no LT&#39;, &#39;comparative toxic unit for ecosystems (CTUe) no LT&#39;)
Processing sobol for (&#39;ecoinvent-3.11&#39;, &#39;EF v3.1 no LT&#39;, &#39;energy resources: non-renewable no LT&#39;, &#39;abiotic depletion potential (ADP): fossil fuels no LT&#39;)
Processing sobol for (&#39;ecoinvent-3.11&#39;, &#39;EF v3.1 no LT&#39;, &#39;eutrophication: freshwater no LT&#39;, &#39;fraction of nutrients reaching freshwater end compartment (P) no LT&#39;)
Processing sobol for (&#39;ecoinvent-3.11&#39;, &#39;EF v3.1 no LT&#39;, &#39;eutrophication: marine no LT&#39;, &#39;fraction of nutrients reaching marine end compartment (N) no LT&#39;)
Processing sobol for (&#39;ecoinvent-3.11&#39;, &#39;EF v3.1 no LT&#39;, &#39;eutrophication: terrestrial no LT&#39;, &#39;accumulated exceedance (AE) no LT&#39;)
Processing sobol for (&#39;ecoinvent-3.11&#39;, &#39;EF v3.1 no LT&#39;, &#39;human toxicity: carcinogenic no LT&#39;, &#39;comparative toxic unit for human (CTUh) no LT&#39;)
Processing sobol for (&#39;ecoinvent-3.11&#39;, &#39;EF v3.1 no LT&#39;, &#39;human toxicity: carcinogenic, inorganics no LT&#39;, &#39;comparative toxic unit for human (CTUh) no LT&#39;)
Processing sobol for (&#39;ecoinvent-3.11&#39;, &#39;EF v3.1 no LT&#39;, &#39;human toxicity: carcinogenic, organics no LT&#39;, &#39;comparative toxic unit for human (CTUh) no LT&#39;)
Processing sobol for (&#39;ecoinvent-3.11&#39;, &#39;EF v3.1 no LT&#39;, &#39;human toxicity: non-carcinogenic no LT&#39;, &#39;comparative toxic unit for human (CTUh) no LT&#39;)
Processing sobol for (&#39;ecoinvent-3.11&#39;, &#39;EF v3.1 no LT&#39;, &#39;human toxicity: non-carcinogenic, inorganics no LT&#39;, &#39;comparative toxic unit for human (CTUh) no LT&#39;)
Processing sobol for (&#39;ecoinvent-3.11&#39;, &#39;EF v3.1 no LT&#39;, &#39;human toxicity: non-carcinogenic, organics no LT&#39;, &#39;comparative toxic unit for human (CTUh) no LT&#39;)
Processing sobol for (&#39;ecoinvent-3.11&#39;, &#39;EF v3.1 no LT&#39;, &#39;ionising radiation: human health no LT&#39;, &#39;human exposure efficiency relative to u235 no LT&#39;)
Processing sobol for (&#39;ecoinvent-3.11&#39;, &#39;EF v3.1 no LT&#39;, &#39;land use no LT&#39;, &#39;soil quality index no LT&#39;)
Processing sobol for (&#39;ecoinvent-3.11&#39;, &#39;EF v3.1 no LT&#39;, &#39;material resources: metals/minerals no LT&#39;, &#39;abiotic depletion potential (ADP): elements (ultimate reserves) no LT&#39;)
Processing sobol for (&#39;ecoinvent-3.11&#39;, &#39;EF v3.1 no LT&#39;, &#39;ozone depletion no LT&#39;, &#39;ozone depletion potential (ODP) no LT&#39;)
Processing sobol for (&#39;ecoinvent-3.11&#39;, &#39;EF v3.1 no LT&#39;, &#39;particulate matter formation no LT&#39;, &#39;impact on human health no LT&#39;)
Processing sobol for (&#39;ecoinvent-3.11&#39;, &#39;EF v3.1 no LT&#39;, &#39;photochemical oxidant formation: human health no LT&#39;, &#39;tropospheric ozone concentration increase no LT&#39;)
Processing sobol for (&#39;ecoinvent-3.11&#39;, &#39;EF v3.1 no LT&#39;, &#39;water use no LT&#39;, &#39;user deprivation potential (deprivation-weighted water consumption) no LT&#39;)



interactive(children=(Dropdown(description=&#39;indice&#39;, options=(&#39;s1&#39;, &#39;st&#39;), value=&#39;s1&#39;), Dropdown(description=&#39;…





&lt;lca_algebraic.stats.SobolResults at 0x25c5d42c170&gt;
</pre></div>
</div>
<p><strong>NOTE</strong> <br />
While the inventories created in lca_algebraic are stored in the Brightway project, the formulas and parameters are not compatible with Activity Browser Before computing impacts with vanilla Brightway2 or Activity Browser, you may use the function <code class="docutils literal notranslate"><span class="pre">freezeParams()</span></code> to update the amounts in your database for a given scenario / set of parameter values.</p>
</section>
</section>
<section id="influence-of-background-data-uncertainty-analysis">
<h3>7.2. Influence of background data : uncertainty analysis<a class="headerlink" href="#influence-of-background-data-uncertainty-analysis" title="Link to this heading">¶</a></h3>
<p>According to British statistician George Cox <em>“all models are wrong but some are useful”</em> - in that light, quantifying uncertainty makes LCA results more reliable/robust.</p>
<p>One of the easiest/ most common ways to do so is to perform a <a class="reference external" href="https://en.wikipedia.org/wiki/Monte_Carlo_method">Monte Carlo simulation</a>, a random sampling technique. Before elaborating on that, we need to understand how uncertainty information is stored in Brightway:</p>
<section id="uncertainty-information-in-brightway">
<h4>Uncertainty information in Brightway<a class="headerlink" href="#uncertainty-information-in-brightway" title="Link to this heading">¶</a></h4>
<p>Uncertainty is stored at the level of the exchanges - remember this! So, let’s have a look at a random battery exchange, for which uncerainty is defined :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">exc</span> <span class="k">for</span> <span class="n">exc</span> <span class="ow">in</span> <span class="n">battery_prod_act</span><span class="o">.</span><span class="n">technosphere</span><span class="p">()][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">as_dict</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{&#39;name&#39;: &#39;battery cell production, Li-ion, NMC811&#39;,
 &#39;amount&#39;: 0.71359,
 &#39;database&#39;: &#39;ecoinvent-3.11-cutoff&#39;,
 &#39;location&#39;: &#39;CN&#39;,
 &#39;unit&#39;: &#39;kilogram&#39;,
 &#39;type&#39;: &#39;technosphere&#39;,
 &#39;uncertainty type&#39;: 2,
 &#39;loc&#39;: -0.3374467112674416,
 &#39;scale&#39;: 0.066332495807108,
 &#39;comment&#39;: &#39;Literature.&#39;,
 &#39;pedigree&#39;: (&#39;2&#39;, &#39;3&#39;, &#39;3&#39;, &#39;1&#39;, &#39;2&#39;, &#39;1&#39;),
 &#39;reference product&#39;: &#39;battery cell, Li-ion, NMC811&#39;,
 &#39;input&#39;: (&#39;ecoinvent-3.11-cutoff&#39;, &#39;370b15a311df01e126a9603b18c2e29b&#39;),
 &#39;output&#39;: (&#39;tuto_EV-code&#39;, &#39;2ca58142dd46428d84cb8e6a2607cf5e&#39;)}
</pre></div>
</div>
<p>The <em>necessary</em> uncertainty information of an exchange is described in the following fields:</p>
<ul class="simple">
<li><p><strong>‘uncertainty type’</strong> : type of probability distribution function that the exchange follows. For example, the uncertainty type = 2 indicates a <code class="docutils literal notranslate"><span class="pre">lognormal</span></code>  distribution.</p></li>
<li><p><strong>‘loc’, ‘scale’, ‘shape’, ‘minimum’, ‘maximum’</strong>: parameters of the distribution function, which are respectively the location (mean $\mu$, mode, offset, or median), scale (e.g. standard deviation $\sigma$), and shape as well as minimum and maximum of the underlying distribution. Mind that different distribution functions require different parameters - not all parameters have to be defined for each distribution.</p></li>
</ul>
<p>Some <em>additional</em> uncertainty related information (‘scale without pedigree’, ‘pedigree’) are also there, but are not directly used in the calculation of the uncertainty. They are also specific to ecoinvent.</p>
<p>Uncertainty in Brightway is dealt with using a Python package called <code class="docutils literal notranslate"><span class="pre">stats_arrays</span></code> (see <a class="reference external" href="http://stats-arrays.readthedocs.io/en/latest/">here</a>), developed by Chris Mutel in the context of the development of Brightway but applicable to any stochastic model in Python. Have a look at it to see which probability distribution functions are available. And then, let’s import this package!</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">stats_arrays</span>
</pre></div>
</div>
<p>Just to give a brief example of how the uncertainty information “works”, let’s have a look at the lognormal distribution. As a reminder:</p>
<ul class="simple">
<li><p>a random variable $X$ is a lognormal if its natural logarithm $ln(X)$ is normally distributed</p></li>
<li><p>the natural logarithm of the <em>median</em> of the lognormal distribution is equal to the median (=mean) of the underlying distribution</p></li>
</ul>
<p>Taking the deterministic amount <code class="docutils literal notranslate"><span class="pre">amount</span></code> to be the median, we should have <code class="docutils literal notranslate"><span class="pre">loc</span></code> = <code class="docutils literal notranslate"><span class="pre">ln('amount')</span></code>. Let’s do this for the first exchange of a random ecoinvent activity that has a lognormal distribution.</p>
<blockquote>
<div><p>You can check it by lookiing at the uncertainty type in the activity</p>
</div></blockquote>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">exc</span> <span class="k">for</span> <span class="n">exc</span> <span class="ow">in</span> <span class="n">battery_prod_act</span><span class="o">.</span><span class="n">technosphere</span><span class="p">()][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">as_dict</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{&#39;name&#39;: &#39;battery cell production, Li-ion, NMC811&#39;,
 &#39;amount&#39;: 0.71359,
 &#39;database&#39;: &#39;ecoinvent-3.11-cutoff&#39;,
 &#39;location&#39;: &#39;CN&#39;,
 &#39;unit&#39;: &#39;kilogram&#39;,
 &#39;type&#39;: &#39;technosphere&#39;,
 &#39;uncertainty type&#39;: 2,
 &#39;loc&#39;: -0.3374467112674416,
 &#39;scale&#39;: 0.066332495807108,
 &#39;comment&#39;: &#39;Literature.&#39;,
 &#39;pedigree&#39;: (&#39;2&#39;, &#39;3&#39;, &#39;3&#39;, &#39;1&#39;, &#39;2&#39;, &#39;1&#39;),
 &#39;reference product&#39;: &#39;battery cell, Li-ion, NMC811&#39;,
 &#39;input&#39;: (&#39;ecoinvent-3.11-cutoff&#39;, &#39;370b15a311df01e126a9603b18c2e29b&#39;),
 &#39;output&#39;: (&#39;tuto_EV-code&#39;, &#39;2ca58142dd46428d84cb8e6a2607cf5e&#39;)}
</pre></div>
</div>
</section>
<section id="basic-monte-carlo-simulation">
<h4>Basic Monte Carlo simulation<a class="headerlink" href="#basic-monte-carlo-simulation" title="Link to this heading">¶</a></h4>
<p><strong>One functional unit, one impact category</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ipcc2013</span> <span class="o">=</span> <span class="p">[</span><span class="n">m</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">bd</span><span class="o">.</span><span class="n">methods</span> <span class="k">if</span> <span class="s1">&#39;IPCC 2013 no LT&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
                        <span class="ow">and</span> <span class="s1">&#39;GWP100&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">m</span><span class="p">)][</span><span class="mi">0</span><span class="p">]</span>
<span class="n">ipcc2013</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(&#39;ecoinvent-3.11&#39;,
 &#39;IPCC 2013 no LT&#39;,
 &#39;climate change no LT&#39;,
 &#39;global warming potential (GWP100) no LT&#39;)
</pre></div>
</div>
<p><strong>NOTE</strong> : above we parametrized our inventory and made the calculations using <em><strong>lca_algebraic</strong></em> library.</p>
<p>If you want to use <em><strong>brightway2</strong></em> calculation functions, like MonteCarlo, you first need to freeze the parameters with <code class="docutils literal notranslate"><span class="pre">agb.freezeParams()</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">agb</span><span class="o">.</span><span class="n">freezeParams</span><span class="err">?</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[31mSignature:[39m agb.freezeParams(db_name, **params: Dict[str, float])
[31mDocstring:[39m
Freezes amounts in all exchanges for a given set of parameter values.
The formulas are computed and the &#39;amount&#39; attributes are set with the result.

This enables parametric datasets to be used by standard, non-parametric tools of Brightway2 (like Activities browser).

Parameters
----------
db_name :
    Name of the database for freeze (your foreground db usually)

params:
    All other parameters of this function are threated as the values of *lca_algebraic* parameters to be set.
    The default values will be used for the *lca_algebraic* parameters not mentioned here.

Examples
--------

&gt;&gt;&gt; freezeParams(&quot;USER_DB&quot;, p1=0.1, p2=3.0)
[31mFile:[39m      c:\users\vm256232\appdata\local\miniforge3\envs\bw25_tr\lib\site-packages\lca_algebraic\params.py
[31mType:[39m      function
</pre></div>
</div>
<p>In our case, we will perform Monte Carlo on the battery production activity, which is not parametrized, therefore we don’t need to do it. Let’s continue :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#MC simulation with 10 iterations for our battery production and the IPCC GWP100a method</span>
<span class="n">mc</span> <span class="o">=</span> <span class="n">bc</span><span class="o">.</span><span class="n">LCA</span><span class="p">({</span><span class="n">battery_prod_act</span><span class="p">:</span><span class="mi">1</span><span class="p">},</span>  <span class="n">ipcc2013</span><span class="p">,</span> <span class="n">use_distributions</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">mc</span><span class="o">.</span><span class="n">lci</span><span class="p">()</span>
<span class="n">mc</span><span class="o">.</span><span class="n">lcia</span><span class="p">()</span>
<span class="n">scores</span> <span class="o">=</span> <span class="p">[</span><span class="n">mc</span><span class="o">.</span><span class="n">score</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">mc</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))]</span>
<span class="n">scores</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[22.572324188626087,
 26.58144692877027,
 24.409250044495035,
 25.513772888112705,
 25.108336887298464,
 25.08589764403687,
 26.667312109864124,
 22.314705730295184,
 21.249822311664055,
 27.480823481092987]
</pre></div>
</div>
<p>Let’s print the results of our MC:</p>
<p>Well, this doesn’t really look like anything yet. We should increase the number of iterations - which yields more robust results. Around 10,000 iterations is a good starting point. However, this takes a while, so we will just give it a try with 1000 now. See for yourself how long it would take for a higher number of iterations.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#define the number of iterations</span>
<span class="n">n_runs</span> <span class="o">=</span> <span class="mi">1000</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="n">time</span>
<span class="n">scores</span> <span class="o">=</span> <span class="p">[</span><span class="n">mc</span><span class="o">.</span><span class="n">score</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">mc</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">))]</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CPU times: total: 2min 12s
Wall time: 1min 39s
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">scores</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>One functional unit, multiple impact categories</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># define the function for MC simulation</span>
<span class="k">def</span><span class="w"> </span><span class="nf">multiImpactMonteCarloLCA</span><span class="p">(</span><span class="n">functional_unit</span><span class="p">,</span> <span class="n">list_methods</span><span class="p">,</span> <span class="n">iterations</span><span class="p">):</span>
    <span class="c1"># Step 1</span>
    <span class="n">MC_lca</span> <span class="o">=</span> <span class="n">bc</span><span class="o">.</span><span class="n">MonteCarloLCA</span><span class="p">(</span><span class="n">functional_unit</span><span class="p">)</span>
    <span class="n">MC_lca</span><span class="o">.</span><span class="n">lci</span><span class="p">()</span>
    <span class="c1"># Step 2</span>
    <span class="n">C_matrices</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1"># Step 3</span>
    <span class="k">for</span> <span class="n">method</span> <span class="ow">in</span> <span class="n">list_methods</span><span class="p">:</span>
        <span class="n">MC_lca</span><span class="o">.</span><span class="n">switch_method</span><span class="p">(</span><span class="n">method</span><span class="p">)</span>
        <span class="n">C_matrices</span><span class="p">[</span><span class="n">method</span><span class="p">]</span> <span class="o">=</span> <span class="n">MC_lca</span><span class="o">.</span><span class="n">characterization_matrix</span>
    <span class="c1"># Step 4</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">list_methods</span><span class="p">),</span> <span class="n">iterations</span><span class="p">))</span>
    <span class="c1"># Step 5</span>
    <span class="k">for</span> <span class="n">iteration</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">iterations</span><span class="p">):</span>
        <span class="nb">next</span><span class="p">(</span><span class="n">MC_lca</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">method_index</span><span class="p">,</span> <span class="n">method</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">list_methods</span><span class="p">):</span>
            <span class="n">results</span><span class="p">[</span><span class="n">method_index</span><span class="p">,</span> <span class="n">iteration</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">C_matrices</span><span class="p">[</span><span class="n">method</span><span class="p">]</span><span class="o">*</span><span class="n">MC_lca</span><span class="o">.</span><span class="n">inventory</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">results</span>

<span class="c1"># define the LCIA methods, functional unit, and the number of iterations</span>
<span class="n">fu</span> <span class="o">=</span> <span class="p">{</span><span class="n">battery_prod_act</span><span class="p">:</span><span class="mi">1</span><span class="p">}</span>
<span class="n">iterations</span> <span class="o">=</span> <span class="mi">10</span> <span class="c1">#number of iterations</span>

<span class="c1"># let it run!</span>
<span class="n">test_results</span> <span class="o">=</span> <span class="n">multiImpactMonteCarloLCA</span><span class="p">(</span><span class="n">fu</span><span class="p">,</span> <span class="n">list_methods</span><span class="p">,</span> <span class="n">iterations</span><span class="p">)</span>
<span class="n">test_results</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#we can get the plots for all 34 ILCD methods (--&gt; type: len(ILCD)) by changing the index in the brackets</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">test_results</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="additionnal-features">
<h2>8. Additionnal features<a class="headerlink" href="#additionnal-features" title="Link to this heading">¶</a></h2>
<p>As a complement, here we show additionnal lca_algebraic features.</p>
<p>A dashboard groups all the sensitivity analysis information in a single interface with tabs.</p>
<p>It also shows total variation of impacts. This last graph could be improved by showing stacked colored bars with the contribution of each parameter to this variation, according to Sobol indices.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">agb</span><span class="o">.</span><span class="n">incer_stochastic_dashboard</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="n">lifecycle_act</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="n">list_methods</span><span class="p">)</span>
</pre></div>
</div>
<p>One of te outcome of the statisticall analysis above would be to identify main input parameters and produce simplidied models, fixing the minor ones.</p>
<p><code class="docutils literal notranslate"><span class="pre">lca_algebraic</span></code> provide several functions for doing this.</p>
<p>First, let’s look at the full expression defining our model</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">expr</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">agb</span><span class="o">.</span><span class="n">actToExpression</span><span class="p">(</span><span class="n">lifecycle_act</span><span class="p">)</span>
<span class="n">expr</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">agb</span><span class="o">.</span><span class="n">list_parameters</span><span class="p">()</span>
</pre></div>
</div>
<p>We provide some method to automatically select a subset of parameters, based on the <strong>sobol indices</strong>, and then compute simplified models for it.</p>
<p>We also round numerical expression to 3 digits, and we remove terms in sums that are less than 1% of total.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">simplified</span> <span class="o">=</span> <span class="n">agb</span><span class="o">.</span><span class="n">sobol_simplify_model</span><span class="p">(</span>
    <span class="n">lifecycle_act</span><span class="p">,</span> <span class="c1"># The model</span>
    <span class="p">[</span><span class="n">list_methods</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="c1"># Impact(s) category(ies) to consider, could be done on the whole list (but longer)</span>
    <span class="n">n</span><span class="o">=</span><span class="mi">10000</span><span class="p">,</span> <span class="c1"># For large model, you may test other value and ensure ST and sum(S1) are close to 1.0</span>
    <span class="n">min_ratio</span><span class="o">=</span><span class="mf">0.95</span><span class="p">,</span> <span class="c1"># Min ratio of variability to explain</span>

    <span class="n">num_digits</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>Let’s look at the expression for first impact again
much simpler !</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">simplified</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">expr</span>
</pre></div>
</div>
<p>You can also compare the simplified expression with the complete one with</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">agb</span><span class="o">.</span><span class="n">compare_simplified</span><span class="p">(</span><span class="n">lifecycle_act</span><span class="p">,</span> <span class="p">[</span><span class="n">list_methods</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="n">simplified</span><span class="p">)</span>
</pre></div>
</div>
<p>This feature can be useful to share simplified models for people who are not trained to brightway, as you are now ;)</p>
</section>
<section id="conclusion">
<h2>9. Conclusion<a class="headerlink" href="#conclusion" title="Link to this heading">¶</a></h2>
<p>This notebook comes to an end. Now feel free to start from scratch with the same database, and explore any parameter / scenario / visualization you want !</p>
<p>To start your own new project with ecoinvent 3.11 cutoff installed, you can copy the tuto project so that you don’t have to re-install ecoinvent:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">bd</span><span class="o">.</span><span class="n">projects</span><span class="o">.</span><span class="n">set_current</span><span class="p">(</span><span class="s2">&quot;ecoinvent311&quot;</span><span class="p">)</span>
<span class="n">bd</span><span class="o">.</span><span class="n">projects</span><span class="o">.</span><span class="n">copy_project</span><span class="p">(</span><span class="s1">&#39;your_project_name&#39;</span><span class="p">,</span> <span class="n">switch</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1">#copy the project and set the current project to the new one</span>
<span class="k">del</span> <span class="n">bd</span><span class="o">.</span><span class="n">databases</span><span class="p">[</span><span class="s1">&#39;tuto_EV-ab&#39;</span><span class="p">]</span> <span class="c1">#delete the foreground databases to start with a clean project containing only ecoinvent</span>
<span class="k">del</span> <span class="n">bd</span><span class="o">.</span><span class="n">databases</span><span class="p">[</span><span class="s1">&#39;tuto_EV-code&#39;</span><span class="p">]</span>
<span class="n">bd</span><span class="o">.</span><span class="n">databases</span> <span class="c1">#print databases</span>
</pre></div>
</div>
<p>You can refer to the documentation for any clarification / additional feature :</p>
<ul class="simple">
<li><p>https://github.com/LCA-ActivityBrowser/activity-browser</p></li>
<li><p>https://docs.brightway.dev/en/legacy/index.html</p></li>
<li><p>https://lca-algebraic.readthedocs.io/en/stable/</p></li>
</ul>
<p>How ecoinvent cutoff is built :</p>
<ul class="simple">
<li><p>https://support.ecoinvent.org/system-models</p></li>
</ul>
<p>Advanced content : dynamic and prospective LCA (not compatible with bw2, need bw25 instead) :</p>
<ul class="simple">
<li><p>https://premise.readthedocs.io/en/latest/</p></li>
<li><p>https://docs.brightway.dev/projects/bw-timex/en/latest/</p></li>
</ul>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          <a class="prev-page" href="activity-browser.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">I. Activity Browser</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025, V. Maneval, M. Boutrouelle
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">II. Notebook</a><ul>
<li><a class="reference internal" href="#setup-of-a-project">1. Setup of a project</a><ul>
<li><a class="reference internal" href="#import-libraries">1.1. Import libraries</a></li>
<li><a class="reference internal" href="#creation-of-the-project">1.2. Creation of the project</a></li>
</ul>
</li>
<li><a class="reference internal" href="#database-import-setup">2. Database import/setup</a><ul>
<li><a class="reference internal" href="#ecoinvent">2.1 Ecoinvent</a><ul>
<li><a class="reference internal" href="#searching-for-activities">Searching for activities</a></li>
<li><a class="reference internal" href="#methods">Methods</a></li>
</ul>
</li>
<li><a class="reference internal" href="#importing-a-dataset-from-excel">2.2 Importing a dataset from Excel</a></li>
<li><a class="reference internal" href="#database-selection-and-a-first-look-at-activities">2.3 Database selection and a first look at activities</a><ul>
<li><a class="reference internal" href="#lci-activities">LCI activities</a></li>
<li><a class="reference internal" href="#lci-exchanges">LCI exchanges</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#my-first-lca">3 My first LCA</a><ul>
<li><a class="reference internal" href="#general-syntax">3.1 General syntax</a></li>
<li><a class="reference internal" href="#even-simpler-with-lca-algebraic">3.2 Even simpler with lca_algebraic</a></li>
<li><a class="reference internal" href="#example-of-visualization-syntax">3.3 Example of visualization syntax</a></li>
<li><a class="reference internal" href="#multi-impacts-analysis">3.4 Multi-impacts analysis</a></li>
</ul>
</li>
<li><a class="reference internal" href="#contribution-analysis">4. Contribution analysis</a><ul>
<li><a class="reference internal" href="#activity-1-impact-category">4.1. 1 activity, 1 impact category</a><ul>
<li><a class="reference internal" href="#identify-the-hotspots">Identify the hotspots</a></li>
<li><a class="reference internal" href="#visualization">Visualization</a></li>
</ul>
</li>
<li><a class="reference internal" href="#n-activities-1-impact-category">4.2. N activities, 1 impact category</a></li>
<li><a class="reference internal" href="#activity-n-impact-categories">4.3. 1 activity, N impact categories</a></li>
</ul>
</li>
<li><a class="reference internal" href="#edit-model-parametrization">5. Edit Model &amp; Parametrization</a><ul>
<li><a class="reference internal" href="#delete-exchanges">5.1 Delete exchanges</a></li>
<li><a class="reference internal" href="#add-exchanges">5.2 Add exchanges</a></li>
<li><a class="reference internal" href="#add-formulas">5.3 Add formulas</a><ul>
<li><a class="reference internal" href="#symbolic-calculus">Symbolic calculus</a></li>
<li><a class="reference internal" href="#define-input-parameters">Define input parameters</a></li>
<li><a class="reference internal" href="#parameterize-the-inventory">Parameterize the inventory</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#defining-scenarios">6. Defining scenarios</a><ul>
<li><a class="reference internal" href="#scenario-1">6.1 Scenario 1</a></li>
<li><a class="reference internal" href="#scenario-2">6.2 Scenario 2</a></li>
<li><a class="reference internal" href="#scenario-3">6.3 Scenario 3</a></li>
<li><a class="reference internal" href="#posttreatment-visualization-to-compare-scenarios">6.4 PostTreatment: visualization to compare scenarios</a></li>
<li><a class="reference internal" href="#exercise">6.5 Exercise</a></li>
</ul>
</li>
<li><a class="reference internal" href="#variation-analysis">7. Variation analysis</a><ul>
<li><a class="reference internal" href="#influence-of-foreground-parameters-sensitivity-analysis">7.1. Influence of foreground parameters : sensitivity analysis</a><ul>
<li><a class="reference internal" href="#parameter-1-impact-category-with-contribution-analysis">1 parameter, 1 impact category, with contribution analysis</a></li>
<li><a class="reference internal" href="#parameter-n-impact-categories">1 parameter, N impact categories</a></li>
<li><a class="reference internal" href="#n-parameters-n-impact-categories">N parameters, N impact categories</a></li>
</ul>
</li>
<li><a class="reference internal" href="#influence-of-background-data-uncertainty-analysis">7.2. Influence of background data : uncertainty analysis</a><ul>
<li><a class="reference internal" href="#uncertainty-information-in-brightway">Uncertainty information in Brightway</a></li>
<li><a class="reference internal" href="#basic-monte-carlo-simulation">Basic Monte Carlo simulation</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#additionnal-features">8. Additionnal features</a></li>
<li><a class="reference internal" href="#conclusion">9. Conclusion</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=2709fde1"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=46bd48cc"></script>
    </body>
</html>